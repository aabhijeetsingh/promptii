(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function pS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vp={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function eR(){if(iT)return Gl;iT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:l}}return Gl.Fragment=e,Gl.jsx=t,Gl.jsxs=t,Gl}var sT;function tR(){return sT||(sT=1,vp.exports=eR()),vp.exports}var L=tR(),Tp={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function nR(){if(rT)return Ne;rT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(B){return B===null||typeof B!="object"?null:(B=S&&B[S]||B["@@iterator"],typeof B=="function"?B:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,z={};function W(B,ne,ae){this.props=B,this.context=ne,this.refs=z,this.updater=ae||k}W.prototype.isReactComponent={},W.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},W.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=W.prototype;function J(B,ne,ae){this.props=B,this.context=ne,this.refs=z,this.updater=ae||k}var Z=J.prototype=new $;Z.constructor=J,O(Z,W.prototype),Z.isPureReactComponent=!0;var ue=Array.isArray;function le(){}var D={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(B,ne,ae){var fe=ae.ref;return{$$typeof:n,type:B,key:ne,ref:fe!==void 0?fe:null,props:ae}}function P(B,ne){return N(B.type,ne,B.props)}function M(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function V(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ae){return ne[ae]})}var x=/\/+/g;function Se(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):ne.toString(36)}function we(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(le,le):(B.status="pending",B.then(function(ne){B.status==="pending"&&(B.status="fulfilled",B.value=ne)},function(ne){B.status==="pending"&&(B.status="rejected",B.reason=ne)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function X(B,ne,ae,fe,ve){var be=typeof B;(be==="undefined"||be==="boolean")&&(B=null);var Pe=!1;if(B===null)Pe=!0;else switch(be){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(B.$$typeof){case n:case e:Pe=!0;break;case v:return Pe=B._init,X(Pe(B._payload),ne,ae,fe,ve)}}if(Pe)return ve=ve(B),Pe=fe===""?"."+Se(B,0):fe,ue(ve)?(ae="",Pe!=null&&(ae=Pe.replace(x,"$&/")+"/"),X(ve,ne,ae,"",function(mr){return mr})):ve!=null&&(M(ve)&&(ve=P(ve,ae+(ve.key==null||B&&B.key===ve.key?"":(""+ve.key).replace(x,"$&/")+"/")+Pe)),ne.push(ve)),1;Pe=0;var mt=fe===""?".":fe+":";if(ue(B))for(var Ze=0;Ze<B.length;Ze++)fe=B[Ze],be=mt+Se(fe,Ze),Pe+=X(fe,ne,ae,be,ve);else if(Ze=I(B),typeof Ze=="function")for(B=Ze.call(B),Ze=0;!(fe=B.next()).done;)fe=fe.value,be=mt+Se(fe,Ze++),Pe+=X(fe,ne,ae,be,ve);else if(be==="object"){if(typeof B.then=="function")return X(we(B),ne,ae,fe,ve);throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function oe(B,ne,ae){if(B==null)return B;var fe=[],ve=0;return X(B,fe,"","",function(be){return ne.call(ae,be,ve++)}),fe}function pe(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(ae){(B._status===0||B._status===-1)&&(B._status=1,B._result=ae)},function(ae){(B._status===0||B._status===-1)&&(B._status=2,B._result=ae)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var He=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Xe={map:oe,forEach:function(B,ne,ae){oe(B,function(){ne.apply(this,arguments)},ae)},count:function(B){var ne=0;return oe(B,function(){ne++}),ne},toArray:function(B){return oe(B,function(ne){return ne})||[]},only:function(B){if(!M(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ne.Activity=T,Ne.Children=Xe,Ne.Component=W,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=J,Ne.StrictMode=i,Ne.Suspense=m,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(B){return D.H.useMemoCache(B)}},Ne.cache=function(B){return function(){return B.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(B,ne,ae){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var fe=O({},B.props),ve=B.key;if(ne!=null)for(be in ne.key!==void 0&&(ve=""+ne.key),ne)!b.call(ne,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ne.ref===void 0||(fe[be]=ne[be]);var be=arguments.length-2;if(be===1)fe.children=ae;else if(1<be){for(var Pe=Array(be),mt=0;mt<be;mt++)Pe[mt]=arguments[mt+2];fe.children=Pe}return N(B.type,ve,fe)},Ne.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Ne.createElement=function(B,ne,ae){var fe,ve={},be=null;if(ne!=null)for(fe in ne.key!==void 0&&(be=""+ne.key),ne)b.call(ne,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ve[fe]=ne[fe]);var Pe=arguments.length-2;if(Pe===1)ve.children=ae;else if(1<Pe){for(var mt=Array(Pe),Ze=0;Ze<Pe;Ze++)mt[Ze]=arguments[Ze+2];ve.children=mt}if(B&&B.defaultProps)for(fe in Pe=B.defaultProps,Pe)ve[fe]===void 0&&(ve[fe]=Pe[fe]);return N(B,be,ve)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(B){return{$$typeof:f,render:B}},Ne.isValidElement=M,Ne.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:pe}},Ne.memo=function(B,ne){return{$$typeof:h,type:B,compare:ne===void 0?null:ne}},Ne.startTransition=function(B){var ne=D.T,ae={};D.T=ae;try{var fe=B(),ve=D.S;ve!==null&&ve(ae,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(le,He)}catch(be){He(be)}finally{ne!==null&&ae.types!==null&&(ne.types=ae.types),D.T=ne}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(B){return D.H.use(B)},Ne.useActionState=function(B,ne,ae){return D.H.useActionState(B,ne,ae)},Ne.useCallback=function(B,ne){return D.H.useCallback(B,ne)},Ne.useContext=function(B){return D.H.useContext(B)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(B,ne){return D.H.useDeferredValue(B,ne)},Ne.useEffect=function(B,ne){return D.H.useEffect(B,ne)},Ne.useEffectEvent=function(B){return D.H.useEffectEvent(B)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(B,ne,ae){return D.H.useImperativeHandle(B,ne,ae)},Ne.useInsertionEffect=function(B,ne){return D.H.useInsertionEffect(B,ne)},Ne.useLayoutEffect=function(B,ne){return D.H.useLayoutEffect(B,ne)},Ne.useMemo=function(B,ne){return D.H.useMemo(B,ne)},Ne.useOptimistic=function(B,ne){return D.H.useOptimistic(B,ne)},Ne.useReducer=function(B,ne,ae){return D.H.useReducer(B,ne,ae)},Ne.useRef=function(B){return D.H.useRef(B)},Ne.useState=function(B){return D.H.useState(B)},Ne.useSyncExternalStore=function(B,ne,ae){return D.H.useSyncExternalStore(B,ne,ae)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.0",Ne}var oT;function Mm(){return oT||(oT=1,Tp.exports=nR()),Tp.exports}var ge=Mm();const mS=pS(ge);var Ep={exports:{}},Kl={},Sp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function iR(){return aT||(aT=1,(function(n){function e(X,oe){var pe=X.length;X.push(oe);e:for(;0<pe;){var He=pe-1>>>1,Xe=X[He];if(0<o(Xe,oe))X[He]=oe,X[pe]=Xe,pe=He;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],pe=X.pop();if(pe!==oe){X[0]=pe;e:for(var He=0,Xe=X.length,B=Xe>>>1;He<B;){var ne=2*(He+1)-1,ae=X[ne],fe=ne+1,ve=X[fe];if(0>o(ae,pe))fe<Xe&&0>o(ve,ae)?(X[He]=ve,X[fe]=pe,He=fe):(X[He]=ae,X[ne]=pe,He=ne);else if(fe<Xe&&0>o(ve,pe))X[He]=ve,X[fe]=pe,He=fe;else break e}}return oe}function o(X,oe){var pe=X.sortIndex-oe.sortIndex;return pe!==0?pe:X.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],h=[],v=1,T=null,S=3,I=!1,k=!1,O=!1,z=!1,W=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function Z(X){for(var oe=t(h);oe!==null;){if(oe.callback===null)i(h);else if(oe.startTime<=X)i(h),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(h)}}function ue(X){if(O=!1,Z(X),!k)if(t(m)!==null)k=!0,le||(le=!0,V());else{var oe=t(h);oe!==null&&we(ue,oe.startTime-X)}}var le=!1,D=-1,b=5,N=-1;function P(){return z?!0:!(n.unstable_now()-N<b)}function M(){if(z=!1,le){var X=n.unstable_now();N=X;var oe=!0;try{e:{k=!1,O&&(O=!1,$(D),D=-1),I=!0;var pe=S;try{t:{for(Z(X),T=t(m);T!==null&&!(T.expirationTime>X&&P());){var He=T.callback;if(typeof He=="function"){T.callback=null,S=T.priorityLevel;var Xe=He(T.expirationTime<=X);if(X=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,Z(X),oe=!0;break t}T===t(m)&&i(m),Z(X)}else i(m);T=t(m)}if(T!==null)oe=!0;else{var B=t(h);B!==null&&we(ue,B.startTime-X),oe=!1}}break e}finally{T=null,S=pe,I=!1}oe=void 0}}finally{oe?V():le=!1}}}var V;if(typeof J=="function")V=function(){J(M)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Se=x.port2;x.port1.onmessage=M,V=function(){Se.postMessage(null)}}else V=function(){W(M,0)};function we(X,oe){D=W(function(){X(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(X){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var pe=S;S=oe;try{return X()}finally{S=pe}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var pe=S;S=X;try{return oe()}finally{S=pe}},n.unstable_scheduleCallback=function(X,oe,pe){var He=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?He+pe:He):pe=He,X){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=pe+Xe,X={id:v++,callback:oe,priorityLevel:X,startTime:pe,expirationTime:Xe,sortIndex:-1},pe>He?(X.sortIndex=pe,e(h,X),t(m)===null&&X===t(h)&&(O?($(D),D=-1):O=!0,we(ue,pe-He))):(X.sortIndex=Xe,e(m,X),k||I||(k=!0,le||(le=!0,V()))),X},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(X){var oe=S;return function(){var pe=S;S=oe;try{return X.apply(this,arguments)}finally{S=pe}}}})(Ap)),Ap}var lT;function sR(){return lT||(lT=1,Sp.exports=iR()),Sp.exports}var Cp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function rR(){if(uT)return en;uT=1;var n=Mm();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,h,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(m,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(m,h,null,v)},en.flushSync=function(m){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=v,i.d.f()}},en.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},en.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},en.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var v=h.as,T=f(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},en.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=f(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},en.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,T=f(v,h.crossOrigin);i.d.L(m,v,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},en.preloadModule=function(m,h){if(typeof m=="string")if(h){var v=f(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},en.requestFormReset=function(m){i.d.r(m)},en.unstable_batchedUpdates=function(m,h){return m(h)},en.useFormState=function(m,h,v){return u.H.useFormState(m,h,v)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.2.0",en}var cT;function oR(){if(cT)return Cp.exports;cT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cp.exports=rR(),Cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function aR(){if(fT)return Kl;fT=1;var n=sR(),e=Mm(),t=oR();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var a=s,c=r;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(c=g.return,c!==null){a=c;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return m(g),s;if(_===c)return m(g),r;_=_.sibling}throw Error(i(188))}if(a.return!==c.return)a=g,c=_;else{for(var A=!1,w=g.child;w;){if(w===a){A=!0,a=g,c=_;break}if(w===c){A=!0,c=g,a=_;break}w=w.sibling}if(!A){for(w=_.child;w;){if(w===a){A=!0,a=_,c=g;break}if(w===c){A=!0,c=_,a=g;break}w=w.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),J=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var x=Symbol.for("react.client.reference");function Se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===x?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case W:return"Profiler";case z:return"StrictMode";case ue:return"Suspense";case le:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case J:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case Z:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return r=s.displayName||null,r!==null?r:Se(s.type)||"Memo";case b:r=s._payload,s=s._init;try{return Se(s(r))}catch{}}return null}var we=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},He=[],Xe=-1;function B(s){return{current:s}}function ne(s){0>Xe||(s.current=He[Xe],He[Xe]=null,Xe--)}function ae(s,r){Xe++,He[Xe]=s.current,s.current=r}var fe=B(null),ve=B(null),be=B(null),Pe=B(null);function mt(s,r){switch(ae(be,r),ae(ve,s),ae(fe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Iv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Iv(r),s=Rv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(fe),ae(fe,s)}function Ze(){ne(fe),ne(ve),ne(be)}function mr(s){s.memoizedState!==null&&ae(Pe,s);var r=fe.current,a=Rv(r,s.type);r!==a&&(ae(ve,s),ae(fe,a))}function ho(s){ve.current===s&&(ne(fe),ne(ve)),Pe.current===s&&(ne(Pe),zl._currentValue=pe)}var po,mo;function ai(s){if(po===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);po=r&&r[1]||"",mo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+po+s+mo}var za=!1;function gr(s,r){if(!s||za)return"";za=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(j){var Y=j}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(j){Y=j}s.call(ie.prototype)}}else{try{throw Error()}catch(j){Y=j}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(j){if(j&&Y&&typeof j.stack=="string")return[j.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],w=_[1];if(A&&w){var U=A.split(`
`),K=w.split(`
`);for(g=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;if(c===U.length||g===K.length)for(c=U.length-1,g=K.length-1;1<=c&&0<=g&&U[c]!==K[g];)g--;for(;1<=c&&0<=g;c--,g--)if(U[c]!==K[g]){if(c!==1||g!==1)do if(c--,g--,0>g||U[c]!==K[g]){var ee=`
`+U[c].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=c&&0<=g);break}}}finally{za=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?ai(a):""}function Ba(s,r){switch(s.tag){case 26:case 27:case 5:return ai(s.type);case 16:return ai("Lazy");case 13:return s.child!==r&&r!==null?ai("Suspense Fallback"):ai("Suspense");case 19:return ai("SuspenseList");case 0:case 15:return gr(s.type,!1);case 11:return gr(s.type.render,!1);case 1:return gr(s.type,!0);case 31:return ai("Activity");default:return""}}function Ha(s){try{var r="",a=null;do r+=Ba(s,a),a=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,gs=n.unstable_cancelCallback,Ed=n.unstable_shouldYield,Pu=n.unstable_requestPaint,an=n.unstable_now,yr=n.unstable_getCurrentPriorityLevel,Fa=n.unstable_ImmediatePriority,Ga=n.unstable_UserBlockingPriority,ys=n.unstable_NormalPriority,Sd=n.unstable_LowPriority,Vu=n.unstable_IdlePriority,Uu=n.log,Lu=n.unstable_setDisableYieldValue,Kn=null,Kt=null;function Nn(s){if(typeof Uu=="function"&&Lu(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Kn,s)}catch{}}var _t=Math.clz32?Math.clz32:qu,Ou=Math.log,go=Math.LN2;function qu(s){return s>>>=0,s===0?32:31-(Ou(s)/go|0)|0}var li=256,_r=262144,wt=4194304;function ui(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ci(s,r,a){var c=s.pendingLanes;if(c===0)return 0;var g=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?g=ui(c):(A&=w,A!==0?g=ui(A):a||(a=w&~s,a!==0&&(g=ui(a))))):(w=c&~_,w!==0?g=ui(w):A!==0?g=ui(A):a||(a=c&~s,a!==0&&(g=ui(a)))),g===0?0:r!==0&&r!==g&&(r&_)===0&&(_=g&-g,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:g}function Jn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Ad(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zu(){var s=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),s}function fi(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function vr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Cd(s,r,a,c,g,_){var A=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var w=s.entanglements,U=s.expirationTimes,K=s.hiddenUpdates;for(a=A&~a;0<a;){var ee=31-_t(a),ie=1<<ee;w[ee]=0,U[ee]=-1;var Y=K[ee];if(Y!==null)for(K[ee]=null,ee=0;ee<Y.length;ee++){var j=Y[ee];j!==null&&(j.lane&=-536870913)}a&=~ie}c!==0&&Tr(s,c,0),_!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function Tr(s,r,a){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-_t(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function Ka(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var c=31-_t(a),g=1<<c;g&r|s[c]&r&&(s[c]|=r),a&=~g}}function Ja(s,r){var a=r&-r;return a=(a&42)!==0?1:Er(a),(a&(s.suspendedLanes|r))!==0?0:a}function Er(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function zi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bu(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:Wv(s.type))}function Yn(s,r){var a=oe.p;try{return oe.p=s,r()}finally{oe.p=a}}var Xn=Math.random().toString(36).slice(2),It="__reactFiber$"+Xn,zt="__reactProps$"+Xn,di="__reactContainer$"+Xn,yo="__reactEvents$"+Xn,wd="__reactListeners$"+Xn,Hu="__reactHandles$"+Xn,Fu="__reactResources$"+Xn,hi="__reactMarker$"+Xn;function _o(s){delete s[It],delete s[zt],delete s[yo],delete s[wd],delete s[Hu]}function pi(s){var r=s[It];if(r)return r;for(var a=s.parentNode;a;){if(r=a[di]||a[It]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=Pv(s);s!==null;){if(a=s[It])return a;s=Pv(s)}return r}s=a,a=s.parentNode}return null}function Mn(s){if(s=s[It]||s[di]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Tn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function mi(s){var r=s[Fu];return r||(r=s[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(s){s[hi]=!0}var Ya=new Set,Xa={};function gi(s,r){yi(s,r),yi(s+"Capture",r)}function yi(s,r){for(Xa[s]=r,s=0;s<r.length;s++)Ya.add(r[s])}var $a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wa={},Qa={};function Gu(s){return Ct.call(Qa,s)?!0:Ct.call(Wa,s)?!1:$a.test(s)?Qa[s]=!0:(Wa[s]=!0,!1)}function vo(s,r,a){if(Gu(r))if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+a)}}function En(s,r,a){if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+a)}}function bt(s,r,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(r,a,""+c)}}function Bt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function _s(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Za(s,r,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function je(s){if(!s._valueTracker){var r=_s(s)?"checked":"value";s._valueTracker=Za(s,r,""+s[r])}}function Sr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return s&&(c=_s(s)?s.checked?"true":"false":s.value),s=c,s!==a?(r.setValue(s),!0):!1}function _i(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ar=/[\n"\\]/g;function fn(s){return s.replace(Ar,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function To(s,r,a,c,g,_,A,w){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Bt(r)):s.value!==""+Bt(r)&&(s.value=""+Bt(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?ja(s,A,Bt(r)):a!=null?ja(s,A,Bt(a)):c!=null&&s.removeAttribute("value"),g==null&&_!=null&&(s.defaultChecked=!!_),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+Bt(w):s.removeAttribute("name")}function Ku(s,r,a,c,g,_,A,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){je(s);return}a=a!=null?""+Bt(a):"",r=r!=null?""+Bt(r):a,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),je(s)}function ja(s,r,a){r==="number"&&_i(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function vs(s,r,a,c){if(s=s.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<s.length;a++)g=r.hasOwnProperty("$"+s[a].value),s[a].selected!==g&&(s[a].selected=g),g&&c&&(s[a].defaultSelected=!0)}else{for(a=""+Bt(a),r=null,g=0;g<s.length;g++){if(s[g].value===a){s[g].selected=!0,c&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function Ju(s,r,a){if(r!=null&&(r=""+Bt(r),r!==s.value&&(s.value=r),a==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=a!=null?""+Bt(a):""}function Ts(s,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(i(92));if(we(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Bt(r),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),je(s)}function dn(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(s,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,a):typeof a!="number"||a===0||Yu.has(r)?r==="float"?s.cssFloat=a:s[r]=(""+a).trim():s[r]=a+"px"}function tl(s,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var g in r)c=r[g],r.hasOwnProperty(g)&&a[g]!==c&&el(s,g,c)}else for(var _ in r)r.hasOwnProperty(_)&&el(s,_,r[_])}function Eo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Es=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function So(s){return Es.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function $n(){}var nl=null;function xn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ss=null,vi=null;function Cr(s){var r=Mn(s);if(r&&(s=r.stateNode)){var a=s[zt]||null;e:switch(s=r.stateNode,r.type){case"input":if(To(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==s&&c.form===s.form){var g=c[zt]||null;if(!g)throw Error(i(90));To(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===s.form&&Sr(c)}break e;case"textarea":Ju(s,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&vs(s,!!a.multiple,r,!1)}}}var Ao=!1;function As(s,r,a){if(Ao)return s(r,a);Ao=!0;try{var c=s(r);return c}finally{if(Ao=!1,(Ss!==null||vi!==null)&&(Bc(),Ss&&(r=Ss,s=vi,vi=Ss=null,Cr(r),s)))for(r=0;r<s.length;r++)Cr(s[r])}}function Wn(s,r){var a=s.stateNode;if(a===null)return null;var c=a[zt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wr=!1;if(Dn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){wr=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{wr=!1}var Ti=null,il=null,Ir=null;function sl(){if(Ir)return Ir;var s,r=il,a=r.length,c,g="value"in Ti?Ti.value:Ti.textContent,_=g.length;for(s=0;s<a&&r[s]===g[s];s++);var A=a-s;for(c=1;c<=A&&r[a-c]===g[_-c];c++);return Ir=g.slice(s,1<c?1-c:void 0)}function Rr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Bi(){return!0}function Qn(){return!1}function Jt(s){function r(a,c,g,_,A){this._reactName=a,this._targetInst=g,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(a=s[w],this[w]=a?a(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Bi:Qn,this.isPropagationStopped=Qn,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),r}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Jt(Hi),Cs=T({},Hi,{view:0,detail:0}),rl=Jt(Cs),ws,Co,Si,wo=T({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Si&&(Si&&s.type==="mousemove"?(ws=s.screenX-Si.screenX,Co=s.screenY-Si.screenY):Co=ws=0,Si=s),ws)},movementY:function(s){return"movementY"in s?s.movementY:Co}}),ol=Jt(wo),br=T({},wo,{dataTransfer:0}),$u=Jt(br),Wu=T({},Cs,{relatedTarget:0}),Nr=Jt(Wu),al=T({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=Jt(al),Io=T({},Hi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zu=Jt(Io),ju=T({},Hi,{data:0}),Ai=Jt(ju),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ic(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=nc[s])?!!r[s]:!1}function Is(){return ic}var ln=T({},Cs,{key:function(s){if(s.key){var r=ec[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Rr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?tc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(s){return s.type==="keypress"?Rr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Rr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sc=Jt(ln),rc=T({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=Jt(rc),p=T({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),E=Jt(p),C=T({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Jt(C),F=T({},wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Jt(F),ce=T({},Hi,{newState:0,oldState:0}),xe=Jt(ce),vt=[9,13,27,32],$e=Dn&&"CompositionEvent"in window,dt=null;Dn&&"documentMode"in document&&(dt=document.documentMode);var kn=Dn&&"TextEvent"in window&&!dt,Ci=Dn&&(!$e||dt&&8<dt&&11>=dt),Zn=" ",jn=!1;function Mr(s,r){switch(s){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ro(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var bo=!1;function Cw(s,r){switch(s){case"compositionend":return Ro(r);case"keypress":return r.which!==32?null:(jn=!0,Zn);case"textInput":return s=r.data,s===Zn&&jn?null:s;default:return null}}function ww(s,r){if(bo)return s==="compositionend"||!$e&&Mr(s,r)?(s=sl(),Ir=il=Ti=null,bo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ci&&r.locale!=="ko"?null:r.data;default:return null}}var Iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Iw[s.type]:r==="textarea"}function Og(s,r,a,c){Ss?vi?vi.push(c):vi=[c]:Ss=c,r=Xc(r,"onChange"),0<r.length&&(a=new Ei("onChange","change",null,a,c),s.push({event:a,listeners:r}))}var ll=null,ul=null;function Rw(s){Tv(s,0)}function oc(s){var r=Tn(s);if(Sr(r))return s}function qg(s,r){if(s==="change")return r}var zg=!1;if(Dn){var Id;if(Dn){var Rd="oninput"in document;if(!Rd){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),Rd=typeof Bg.oninput=="function"}Id=Rd}else Id=!1;zg=Id&&(!document.documentMode||9<document.documentMode)}function Hg(){ll&&(ll.detachEvent("onpropertychange",Fg),ul=ll=null)}function Fg(s){if(s.propertyName==="value"&&oc(ul)){var r=[];Og(r,ul,s,xn(s)),As(Rw,r)}}function bw(s,r,a){s==="focusin"?(Hg(),ll=r,ul=a,ll.attachEvent("onpropertychange",Fg)):s==="focusout"&&Hg()}function Nw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return oc(ul)}function Mw(s,r){if(s==="click")return oc(r)}function xw(s,r){if(s==="input"||s==="change")return oc(r)}function Dw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Sn=typeof Object.is=="function"?Object.is:Dw;function cl(s,r){if(Sn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var g=a[c];if(!Ct.call(r,g)||!Sn(s[g],r[g]))return!1}return!0}function Gg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Kg(s,r){var a=Gg(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=r&&c>=r)return{node:a,offset:r-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Gg(a)}}function Jg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Jg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Yg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=_i(s.document);r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=_i(s.document)}return r}function bd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var kw=Dn&&"documentMode"in document&&11>=document.documentMode,No=null,Nd=null,fl=null,Md=!1;function Xg(s,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Md||No==null||No!==_i(c)||(c=No,"selectionStart"in c&&bd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),fl&&cl(fl,c)||(fl=c,c=Xc(Nd,"onSelect"),0<c.length&&(r=new Ei("onSelect","select",null,r,a),s.push({event:r,listeners:c}),r.target=No)))}function xr(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var Mo={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},xd={},$g={};Dn&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Dr(s){if(xd[s])return xd[s];if(!Mo[s])return s;var r=Mo[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in $g)return xd[s]=r[a];return s}var Wg=Dr("animationend"),Qg=Dr("animationiteration"),Zg=Dr("animationstart"),Pw=Dr("transitionrun"),Vw=Dr("transitionstart"),Uw=Dr("transitioncancel"),jg=Dr("transitionend"),ey=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function ei(s,r){ey.set(s,r),gi(r,[s])}var ac=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Pn=[],xo=0,kd=0;function lc(){for(var s=xo,r=kd=xo=0;r<s;){var a=Pn[r];Pn[r++]=null;var c=Pn[r];Pn[r++]=null;var g=Pn[r];Pn[r++]=null;var _=Pn[r];if(Pn[r++]=null,c!==null&&g!==null){var A=c.pending;A===null?g.next=g:(g.next=A.next,A.next=g),c.pending=g}_!==0&&ty(a,g,_)}}function uc(s,r,a,c){Pn[xo++]=s,Pn[xo++]=r,Pn[xo++]=a,Pn[xo++]=c,kd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Pd(s,r,a,c){return uc(s,r,a,c),cc(s)}function kr(s,r){return uc(s,null,null,r),cc(s)}function ty(s,r,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var g=!1,_=s.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(g=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,g&&r!==null&&(g=31-_t(a),s=_.hiddenUpdates,c=s[g],c===null?s[g]=[r]:c.push(r),r.lane=a|536870912),_):null}function cc(s){if(50<kl)throw kl=0,Fh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Do={};function Lw(s,r,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(s,r,a,c){return new Lw(s,r,a,c)}function Vd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gi(s,r){var a=s.alternate;return a===null?(a=An(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function ny(s,r){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function fc(s,r,a,c,g,_){var A=0;if(c=s,typeof s=="function")Vd(s)&&(A=1);else if(typeof s=="string")A=HI(s,a,fe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=An(31,a,r,g),s.elementType=N,s.lanes=_,s;case O:return Pr(a.children,g,_,r);case z:A=8,g|=24;break;case W:return s=An(12,a,r,g|2),s.elementType=W,s.lanes=_,s;case ue:return s=An(13,a,r,g),s.elementType=ue,s.lanes=_,s;case le:return s=An(19,a,r,g),s.elementType=le,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case J:A=10;break e;case $:A=9;break e;case Z:A=11;break e;case D:A=14;break e;case b:A=16,c=null;break e}A=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=An(A,a,r,g),r.elementType=s,r.type=c,r.lanes=_,r}function Pr(s,r,a,c){return s=An(7,s,c,r),s.lanes=a,s}function Ud(s,r,a){return s=An(6,s,null,r),s.lanes=a,s}function iy(s){var r=An(18,null,null,0);return r.stateNode=s,r}function Ld(s,r,a){return r=An(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var sy=new WeakMap;function Vn(s,r){if(typeof s=="object"&&s!==null){var a=sy.get(s);return a!==void 0?a:(r={value:s,source:r,stack:Ha(r)},sy.set(s,r),r)}return{value:s,source:r,stack:Ha(r)}}var ko=[],Po=0,dc=null,dl=0,Un=[],Ln=0,Rs=null,wi=1,Ii="";function Ki(s,r){ko[Po++]=dl,ko[Po++]=dc,dc=s,dl=r}function ry(s,r,a){Un[Ln++]=wi,Un[Ln++]=Ii,Un[Ln++]=Rs,Rs=s;var c=wi;s=Ii;var g=32-_t(c)-1;c&=~(1<<g),a+=1;var _=32-_t(r)+g;if(30<_){var A=g-g%5;_=(c&(1<<A)-1).toString(32),c>>=A,g-=A,wi=1<<32-_t(r)+g|a<<g|c,Ii=_+s}else wi=1<<_|a<<g|c,Ii=s}function Od(s){s.return!==null&&(Ki(s,1),ry(s,1,0))}function qd(s){for(;s===dc;)dc=ko[--Po],ko[Po]=null,dl=ko[--Po],ko[Po]=null;for(;s===Rs;)Rs=Un[--Ln],Un[Ln]=null,Ii=Un[--Ln],Un[Ln]=null,wi=Un[--Ln],Un[Ln]=null}function oy(s,r){Un[Ln++]=wi,Un[Ln++]=Ii,Un[Ln++]=Rs,wi=r.id,Ii=r.overflow,Rs=s}var Yt=null,at=null,Fe=!1,bs=null,On=!1,zd=Error(i(519));function Ns(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hl(Vn(r,s)),zd}function ay(s){var r=s.stateNode,a=s.type,c=s.memoizedProps;switch(r[It]=s,r[zt]=c,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<Vl.length;a++)Ue(Vl[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Ku(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Ts(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||Cv(r.textContent,a)?(c.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),c.onScroll!=null&&Ue("scroll",r),c.onScrollEnd!=null&&Ue("scrollend",r),c.onClick!=null&&(r.onclick=$n),r=!0):r=!1,r||Ns(s,!0)}function ly(s){for(Yt=s.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Yt=Yt.return}}function Vo(s){if(s!==Yt)return!1;if(!Fe)return ly(s),Fe=!0,!1;var r=s.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||sp(s.type,s.memoizedProps)),a=!a),a&&at&&Ns(s),ly(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));at=kv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));at=kv(s)}else r===27?(r=at,Fs(s.type)?(s=up,up=null,at=s):at=r):at=Yt?zn(s.stateNode.nextSibling):null;return!0}function Vr(){at=Yt=null,Fe=!1}function Bd(){var s=bs;return s!==null&&(gn===null?gn=s:gn.push.apply(gn,s),bs=null),s}function hl(s){bs===null?bs=[s]:bs.push(s)}var Hd=B(null),Ur=null,Ji=null;function Ms(s,r,a){ae(Hd,r._currentValue),r._currentValue=a}function Yi(s){s._currentValue=Hd.current,ne(Hd)}function Fd(s,r,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===a)break;s=s.return}}function Gd(s,r,a,c){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=g;for(var U=0;U<r.length;U++)if(w.context===r[U]){_.lanes|=a,w=_.alternate,w!==null&&(w.lanes|=a),Fd(_.return,a,s),c||(A=null);break e}_=w.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Fd(A,a,s),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===s){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function Uo(s,r,a,c){s=null;for(var g=r,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var w=g.type;Sn(g.pendingProps.value,A.value)||(s!==null?s.push(w):s=[w])}}else if(g===Pe.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(zl):s=[zl])}g=g.return}s!==null&&Gd(r,s,a,c),r.flags|=262144}function hc(s){for(s=s.firstContext;s!==null;){if(!Sn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lr(s){Ur=s,Ji=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Xt(s){return uy(Ur,s)}function pc(s,r){return Ur===null&&Lr(s),uy(s,r)}function uy(s,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ji===null){if(s===null)throw Error(i(308));Ji=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Ji=Ji.next=r;return a}var Ow=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(a){return a()})}},qw=n.unstable_scheduleCallback,zw=n.unstable_NormalPriority,Nt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new Ow,data:new Map,refCount:0}}function pl(s){s.refCount--,s.refCount===0&&qw(zw,function(){s.controller.abort()})}var ml=null,Jd=0,Lo=0,Oo=null;function Bw(s,r){if(ml===null){var a=ml=[];Jd=0,Lo=$h(),Oo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Jd++,r.then(cy,cy),r}function cy(){if(--Jd===0&&ml!==null){Oo!==null&&(Oo.status="fulfilled");var s=ml;ml=null,Lo=0,Oo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Hw(s,r){var a=[],c={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(c.status="rejected",c.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),c}var fy=X.S;X.S=function(s,r){X_=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Bw(s,r),fy!==null&&fy(s,r)};var Or=B(null);function Yd(){var s=Or.current;return s!==null?s:ot.pooledCache}function mc(s,r){r===null?ae(Or,Or.current):ae(Or,r.pool)}function dy(){var s=Yd();return s===null?null:{parent:Nt._currentValue,pool:s}}var qo=Error(i(460)),Xd=Error(i(474)),gc=Error(i(542)),yc={then:function(){}};function hy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function py(s,r,a){switch(a=s[a],a===void 0?s.push(r):a!==r&&(r.then($n,$n),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,gy(s),s;default:if(typeof r.status=="string")r.then($n,$n);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=c}},function(c){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,gy(s),s}throw zr=r,qo}}function qr(s){try{var r=s._init;return r(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zr=a,qo):a}}var zr=null;function my(){if(zr===null)throw Error(i(459));var s=zr;return zr=null,s}function gy(s){if(s===qo||s===gc)throw Error(i(483))}var zo=null,gl=0;function _c(s){var r=gl;return gl+=1,zo===null&&(zo=[]),py(zo,s,r)}function yl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function vc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function yy(s){function r(H,q){if(s){var G=H.deletions;G===null?(H.deletions=[q],H.flags|=16):G.push(q)}}function a(H,q){if(!s)return null;for(;q!==null;)r(H,q),q=q.sibling;return null}function c(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function g(H,q){return H=Gi(H,q),H.index=0,H.sibling=null,H}function _(H,q,G){return H.index=G,s?(G=H.alternate,G!==null?(G=G.index,G<q?(H.flags|=67108866,q):G):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function A(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function w(H,q,G,te){return q===null||q.tag!==6?(q=Ud(G,H.mode,te),q.return=H,q):(q=g(q,G),q.return=H,q)}function U(H,q,G,te){var Te=G.type;return Te===O?ee(H,q,G.props.children,te,G.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&qr(Te)===q.type)?(q=g(q,G.props),yl(q,G),q.return=H,q):(q=fc(G.type,G.key,G.props,null,H.mode,te),yl(q,G),q.return=H,q)}function K(H,q,G,te){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=Ld(G,H.mode,te),q.return=H,q):(q=g(q,G.children||[]),q.return=H,q)}function ee(H,q,G,te,Te){return q===null||q.tag!==7?(q=Pr(G,H.mode,te,Te),q.return=H,q):(q=g(q,G),q.return=H,q)}function ie(H,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ud(""+q,H.mode,G),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return G=fc(q.type,q.key,q.props,null,H.mode,G),yl(G,q),G.return=H,G;case k:return q=Ld(q,H.mode,G),q.return=H,q;case b:return q=qr(q),ie(H,q,G)}if(we(q)||V(q))return q=Pr(q,H.mode,G,null),q.return=H,q;if(typeof q.then=="function")return ie(H,_c(q),G);if(q.$$typeof===J)return ie(H,pc(H,q),G);vc(H,q)}return null}function Y(H,q,G,te){var Te=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Te!==null?null:w(H,q,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return G.key===Te?U(H,q,G,te):null;case k:return G.key===Te?K(H,q,G,te):null;case b:return G=qr(G),Y(H,q,G,te)}if(we(G)||V(G))return Te!==null?null:ee(H,q,G,te,null);if(typeof G.then=="function")return Y(H,q,_c(G),te);if(G.$$typeof===J)return Y(H,q,pc(H,G),te);vc(H,G)}return null}function j(H,q,G,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return H=H.get(G)||null,w(q,H,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return H=H.get(te.key===null?G:te.key)||null,U(q,H,te,Te);case k:return H=H.get(te.key===null?G:te.key)||null,K(q,H,te,Te);case b:return te=qr(te),j(H,q,G,te,Te)}if(we(te)||V(te))return H=H.get(G)||null,ee(q,H,te,Te,null);if(typeof te.then=="function")return j(H,q,G,_c(te),Te);if(te.$$typeof===J)return j(H,q,G,pc(q,te),Te);vc(q,te)}return null}function he(H,q,G,te){for(var Te=null,Ke=null,ye=q,ke=q=0,Oe=null;ye!==null&&ke<G.length;ke++){ye.index>ke?(Oe=ye,ye=null):Oe=ye.sibling;var Je=Y(H,ye,G[ke],te);if(Je===null){ye===null&&(ye=Oe);break}s&&ye&&Je.alternate===null&&r(H,ye),q=_(Je,q,ke),Ke===null?Te=Je:Ke.sibling=Je,Ke=Je,ye=Oe}if(ke===G.length)return a(H,ye),Fe&&Ki(H,ke),Te;if(ye===null){for(;ke<G.length;ke++)ye=ie(H,G[ke],te),ye!==null&&(q=_(ye,q,ke),Ke===null?Te=ye:Ke.sibling=ye,Ke=ye);return Fe&&Ki(H,ke),Te}for(ye=c(ye);ke<G.length;ke++)Oe=j(ye,H,ke,G[ke],te),Oe!==null&&(s&&Oe.alternate!==null&&ye.delete(Oe.key===null?ke:Oe.key),q=_(Oe,q,ke),Ke===null?Te=Oe:Ke.sibling=Oe,Ke=Oe);return s&&ye.forEach(function(Xs){return r(H,Xs)}),Fe&&Ki(H,ke),Te}function Ae(H,q,G,te){if(G==null)throw Error(i(151));for(var Te=null,Ke=null,ye=q,ke=q=0,Oe=null,Je=G.next();ye!==null&&!Je.done;ke++,Je=G.next()){ye.index>ke?(Oe=ye,ye=null):Oe=ye.sibling;var Xs=Y(H,ye,Je.value,te);if(Xs===null){ye===null&&(ye=Oe);break}s&&ye&&Xs.alternate===null&&r(H,ye),q=_(Xs,q,ke),Ke===null?Te=Xs:Ke.sibling=Xs,Ke=Xs,ye=Oe}if(Je.done)return a(H,ye),Fe&&Ki(H,ke),Te;if(ye===null){for(;!Je.done;ke++,Je=G.next())Je=ie(H,Je.value,te),Je!==null&&(q=_(Je,q,ke),Ke===null?Te=Je:Ke.sibling=Je,Ke=Je);return Fe&&Ki(H,ke),Te}for(ye=c(ye);!Je.done;ke++,Je=G.next())Je=j(ye,H,ke,Je.value,te),Je!==null&&(s&&Je.alternate!==null&&ye.delete(Je.key===null?ke:Je.key),q=_(Je,q,ke),Ke===null?Te=Je:Ke.sibling=Je,Ke=Je);return s&&ye.forEach(function(jI){return r(H,jI)}),Fe&&Ki(H,ke),Te}function rt(H,q,G,te){if(typeof G=="object"&&G!==null&&G.type===O&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case I:e:{for(var Te=G.key;q!==null;){if(q.key===Te){if(Te=G.type,Te===O){if(q.tag===7){a(H,q.sibling),te=g(q,G.props.children),te.return=H,H=te;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&qr(Te)===q.type){a(H,q.sibling),te=g(q,G.props),yl(te,G),te.return=H,H=te;break e}a(H,q);break}else r(H,q);q=q.sibling}G.type===O?(te=Pr(G.props.children,H.mode,te,G.key),te.return=H,H=te):(te=fc(G.type,G.key,G.props,null,H.mode,te),yl(te,G),te.return=H,H=te)}return A(H);case k:e:{for(Te=G.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){a(H,q.sibling),te=g(q,G.children||[]),te.return=H,H=te;break e}else{a(H,q);break}else r(H,q);q=q.sibling}te=Ld(G,H.mode,te),te.return=H,H=te}return A(H);case b:return G=qr(G),rt(H,q,G,te)}if(we(G))return he(H,q,G,te);if(V(G)){if(Te=V(G),typeof Te!="function")throw Error(i(150));return G=Te.call(G),Ae(H,q,G,te)}if(typeof G.then=="function")return rt(H,q,_c(G),te);if(G.$$typeof===J)return rt(H,q,pc(H,G),te);vc(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(a(H,q.sibling),te=g(q,G),te.return=H,H=te):(a(H,q),te=Ud(G,H.mode,te),te.return=H,H=te),A(H)):a(H,q)}return function(H,q,G,te){try{gl=0;var Te=rt(H,q,G,te);return zo=null,Te}catch(ye){if(ye===qo||ye===gc)throw ye;var Ke=An(29,ye,null,H.mode);return Ke.lanes=te,Ke.return=H,Ke}finally{}}}var Br=yy(!0),_y=yy(!1),xs=!1;function $d(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ds(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ks(s,r,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var g=c.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),c.pending=r,r=cc(s),ty(s,null,a),r}return uc(s,c,r,a),cc(s)}function _l(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,a|=c,r.lanes=a,Ka(s,a)}}function Qd(s,r){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=r:_=_.next=r}else g=_=r;a={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}var Zd=!1;function vl(){if(Zd){var s=Oo;if(s!==null)throw s}}function Tl(s,r,a,c){Zd=!1;var g=s.updateQueue;xs=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,w=g.shared.pending;if(w!==null){g.shared.pending=null;var U=w,K=U.next;U.next=null,A===null?_=K:A.next=K,A=U;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==A&&(w===null?ee.firstBaseUpdate=K:w.next=K,ee.lastBaseUpdate=U))}if(_!==null){var ie=g.baseState;A=0,ee=K=U=null,w=_;do{var Y=w.lane&-536870913,j=Y!==w.lane;if(j?(Le&Y)===Y:(c&Y)===Y){Y!==0&&Y===Lo&&(Zd=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var he=s,Ae=w;Y=r;var rt=a;switch(Ae.tag){case 1:if(he=Ae.payload,typeof he=="function"){ie=he.call(rt,ie,Y);break e}ie=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ae.payload,Y=typeof he=="function"?he.call(rt,ie,Y):he,Y==null)break e;ie=T({},ie,Y);break e;case 2:xs=!0}}Y=w.callback,Y!==null&&(s.flags|=64,j&&(s.flags|=8192),j=g.callbacks,j===null?g.callbacks=[Y]:j.push(Y))}else j={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(K=ee=j,U=ie):ee=ee.next=j,A|=Y;if(w=w.next,w===null){if(w=g.shared.pending,w===null)break;j=w,w=j.next,j.next=null,g.lastBaseUpdate=j,g.shared.pending=null}}while(!0);ee===null&&(U=ie),g.baseState=U,g.firstBaseUpdate=K,g.lastBaseUpdate=ee,_===null&&(g.shared.lanes=0),Os|=A,s.lanes=A,s.memoizedState=ie}}function vy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Ty(s,r){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)vy(a[s],r)}var Bo=B(null),Tc=B(0);function Ey(s,r){s=ns,ae(Tc,s),ae(Bo,r),ns=s|r.baseLanes}function jd(){ae(Tc,ns),ae(Bo,Bo.current)}function eh(){ns=Tc.current,ne(Bo),ne(Tc)}var Cn=B(null),qn=null;function Ps(s){var r=s.alternate;ae(Tt,Tt.current&1),ae(Cn,s),qn===null&&(r===null||Bo.current!==null||r.memoizedState!==null)&&(qn=s)}function th(s){ae(Tt,Tt.current),ae(Cn,s),qn===null&&(qn=s)}function Sy(s){s.tag===22?(ae(Tt,Tt.current),ae(Cn,s),qn===null&&(qn=s)):Vs()}function Vs(){ae(Tt,Tt.current),ae(Cn,Cn.current)}function wn(s){ne(Cn),qn===s&&(qn=null),ne(Tt)}var Tt=B(0);function Ec(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ap(a)||lp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Xi=0,De=null,it=null,Mt=null,Sc=!1,Ho=!1,Hr=!1,Ac=0,El=0,Fo=null,Fw=0;function gt(){throw Error(i(321))}function nh(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!Sn(s[a],r[a]))return!1;return!0}function ih(s,r,a,c,g,_){return Xi=_,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=s===null||s.memoizedState===null?r_:_h,Hr=!1,_=a(c,g),Hr=!1,Ho&&(_=Cy(r,a,c,g)),Ay(s),_}function Ay(s){X.H=Cl;var r=it!==null&&it.next!==null;if(Xi=0,Mt=it=De=null,Sc=!1,El=0,Fo=null,r)throw Error(i(300));s===null||xt||(s=s.dependencies,s!==null&&hc(s)&&(xt=!0))}function Cy(s,r,a,c){De=s;var g=0;do{if(Ho&&(Fo=null),El=0,Ho=!1,25<=g)throw Error(i(301));if(g+=1,Mt=it=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=o_,_=r(a,c)}while(Ho);return _}function Gw(){var s=X.H,r=s.useState()[0];return r=typeof r.then=="function"?Sl(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(De.flags|=1024),r}function sh(){var s=Ac!==0;return Ac=0,s}function rh(s,r,a){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~a}function oh(s){if(Sc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Sc=!1}Xi=0,Mt=it=De=null,Ho=!1,El=Ac=0,Fo=null}function un(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?De.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Et(){if(it===null){var s=De.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=Mt===null?De.memoizedState:Mt.next;if(r!==null)Mt=r,it=s;else{if(s===null)throw De.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Mt===null?De.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(s){var r=El;return El+=1,Fo===null&&(Fo=[]),s=py(Fo,s,r),r=De,(Mt===null?r.memoizedState:Mt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?r_:_h),s}function wc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Sl(s);if(s.$$typeof===J)return Xt(s)}throw Error(i(438,String(s)))}function ah(s){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Cc(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(s),c=0;c<s;c++)a[c]=P;return r.index++,a}function $i(s,r){return typeof r=="function"?r(s):r}function Ic(s){var r=Et();return lh(r,it,s)}function lh(s,r,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var g=s.baseQueue,_=c.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}r.baseQueue=g=_,c.pending=null}if(_=s.baseState,g===null)s.memoizedState=_;else{r=g.next;var w=A=null,U=null,K=r,ee=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Le&ie)===ie:(Xi&ie)===ie){var Y=K.revertLane;if(Y===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Lo&&(ee=!0);else if((Xi&Y)===Y){K=K.next,Y===Lo&&(ee=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(w=U=ie,A=_):U=U.next=ie,De.lanes|=Y,Os|=Y;ie=K.action,Hr&&a(_,ie),_=K.hasEagerState?K.eagerState:a(_,ie)}else Y={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(w=U=Y,A=_):U=U.next=Y,De.lanes|=ie,Os|=ie;K=K.next}while(K!==null&&K!==r);if(U===null?A=_:U.next=w,!Sn(_,s.memoizedState)&&(xt=!0,ee&&(a=Oo,a!==null)))throw a;s.memoizedState=_,s.baseState=A,s.baseQueue=U,c.lastRenderedState=_}return g===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function uh(s){var r=Et(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,g=a.pending,_=r.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=s(_,A.action),A=A.next;while(A!==g);Sn(_,r.memoizedState)||(xt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function wy(s,r,a){var c=De,g=Et(),_=Fe;if(_){if(a===void 0)throw Error(i(407));a=a()}else a=r();var A=!Sn((it||g).memoizedState,a);if(A&&(g.memoizedState=a,xt=!0),g=g.queue,dh(by.bind(null,c,g,s),[s]),g.getSnapshot!==r||A||Mt!==null&&Mt.memoizedState.tag&1){if(c.flags|=2048,Go(9,{destroy:void 0},Ry.bind(null,c,g,a,r),null),ot===null)throw Error(i(349));_||(Xi&127)!==0||Iy(c,r,a)}return a}function Iy(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=Cc(),De.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function Ry(s,r,a,c){r.value=a,r.getSnapshot=c,Ny(r)&&My(s)}function by(s,r,a){return a(function(){Ny(r)&&My(s)})}function Ny(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!Sn(s,a)}catch{return!0}}function My(s){var r=kr(s,2);r!==null&&yn(r,s,2)}function ch(s){var r=un();if(typeof s=="function"){var a=s;if(s=a(),Hr){Nn(!0);try{a()}finally{Nn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:s},r}function xy(s,r,a,c){return s.baseState=a,lh(s,it,typeof c=="function"?c:$i)}function Kw(s,r,a,c,g){if(Nc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};X.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,Dy(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Dy(s,r){var a=r.action,c=r.payload,g=s.state;if(r.isTransition){var _=X.T,A={};X.T=A;try{var w=a(g,c),U=X.S;U!==null&&U(A,w),ky(s,r,w)}catch(K){fh(s,r,K)}finally{_!==null&&A.types!==null&&(_.types=A.types),X.T=_}}else try{_=a(g,c),ky(s,r,_)}catch(K){fh(s,r,K)}}function ky(s,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Py(s,r,c)},function(c){return fh(s,r,c)}):Py(s,r,a)}function Py(s,r,a){r.status="fulfilled",r.value=a,Vy(r),s.state=a,r=s.pending,r!==null&&(a=r.next,a===r?s.pending=null:(a=a.next,r.next=a,Dy(s,a)))}function fh(s,r,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Vy(r),r=r.next;while(r!==c)}s.action=null}function Vy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Uy(s,r){return r}function Ly(s,r){if(Fe){var a=ot.formState;if(a!==null){e:{var c=De;if(Fe){if(at){t:{for(var g=at,_=On;g.nodeType!==8;){if(!_){g=null;break t}if(g=zn(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){at=zn(g.nextSibling),c=g.data==="F!";break e}}Ns(c)}c=!1}c&&(r=a[0])}}return a=un(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uy,lastRenderedState:r},a.queue=c,a=n_.bind(null,De,c),c.dispatch=a,c=ch(!1),_=yh.bind(null,De,!1,c.queue),c=un(),g={state:r,dispatch:null,action:s,pending:null},c.queue=g,a=Kw.bind(null,De,g,_,a),g.dispatch=a,c.memoizedState=s,[r,a,!1]}function Oy(s){var r=Et();return qy(r,it,s)}function qy(s,r,a){if(r=lh(s,r,Uy)[0],s=Ic($i)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Sl(r)}catch(A){throw A===qo?gc:A}else c=r;r=Et();var g=r.queue,_=g.dispatch;return a!==r.memoizedState&&(De.flags|=2048,Go(9,{destroy:void 0},Jw.bind(null,g,a),null)),[c,_,s]}function Jw(s,r){s.action=r}function zy(s){var r=Et(),a=it;if(a!==null)return qy(r,a,s);Et(),r=r.memoizedState,a=Et();var c=a.queue.dispatch;return a.memoizedState=s,[r,c,!1]}function Go(s,r,a,c){return s={tag:s,create:a,deps:c,inst:r,next:null},r=De.updateQueue,r===null&&(r=Cc(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,r.lastEffect=s),s}function By(){return Et().memoizedState}function Rc(s,r,a,c){var g=un();De.flags|=s,g.memoizedState=Go(1|r,{destroy:void 0},a,c===void 0?null:c)}function bc(s,r,a,c){var g=Et();c=c===void 0?null:c;var _=g.memoizedState.inst;it!==null&&c!==null&&nh(c,it.memoizedState.deps)?g.memoizedState=Go(r,_,a,c):(De.flags|=s,g.memoizedState=Go(1|r,_,a,c))}function Hy(s,r){Rc(8390656,8,s,r)}function dh(s,r){bc(2048,8,s,r)}function Yw(s){De.flags|=4;var r=De.updateQueue;if(r===null)r=Cc(),De.updateQueue=r,r.events=[s];else{var a=r.events;a===null?r.events=[s]:a.push(s)}}function Fy(s){var r=Et().memoizedState;return Yw({ref:r,nextImpl:s}),function(){if((We&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Gy(s,r){return bc(4,2,s,r)}function Ky(s,r){return bc(4,4,s,r)}function Jy(s,r){if(typeof r=="function"){s=s();var a=r(s);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Yy(s,r,a){a=a!=null?a.concat([s]):null,bc(4,4,Jy.bind(null,r,s),a)}function hh(){}function Xy(s,r){var a=Et();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&nh(r,c[1])?c[0]:(a.memoizedState=[s,r],s)}function $y(s,r){var a=Et();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&nh(r,c[1]))return c[0];if(c=s(),Hr){Nn(!0);try{s()}finally{Nn(!1)}}return a.memoizedState=[c,r],c}function ph(s,r,a){return a===void 0||(Xi&1073741824)!==0&&(Le&261930)===0?s.memoizedState=r:(s.memoizedState=a,s=W_(),De.lanes|=s,Os|=s,a)}function Wy(s,r,a,c){return Sn(a,r)?a:Bo.current!==null?(s=ph(s,a,c),Sn(s,r)||(xt=!0),s):(Xi&42)===0||(Xi&1073741824)!==0&&(Le&261930)===0?(xt=!0,s.memoizedState=a):(s=W_(),De.lanes|=s,Os|=s,r)}function Qy(s,r,a,c,g){var _=oe.p;oe.p=_!==0&&8>_?_:8;var A=X.T,w={};X.T=w,yh(s,!1,r,a);try{var U=g(),K=X.S;if(K!==null&&K(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ee=Hw(U,c);Al(s,r,ee,bn(s))}else Al(s,r,c,bn(s))}catch(ie){Al(s,r,{then:function(){},status:"rejected",reason:ie},bn())}finally{oe.p=_,A!==null&&w.types!==null&&(A.types=w.types),X.T=A}}function Xw(){}function mh(s,r,a,c){if(s.tag!==5)throw Error(i(476));var g=Zy(s).queue;Qy(s,g,r,pe,a===null?Xw:function(){return jy(s),a(c)})}function Zy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:pe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function jy(s){var r=Zy(s);r.next===null&&(r=s.alternate.memoizedState),Al(s,r.next.queue,{},bn())}function gh(){return Xt(zl)}function e_(){return Et().memoizedState}function t_(){return Et().memoizedState}function $w(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var a=bn();s=Ds(a);var c=ks(r,s,a);c!==null&&(yn(c,r,a),_l(c,r,a)),r={cache:Kd()},s.payload=r;return}r=r.return}}function Ww(s,r,a){var c=bn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Nc(s)?i_(r,a):(a=Pd(s,r,a,c),a!==null&&(yn(a,s,c),s_(a,r,c)))}function n_(s,r,a){var c=bn();Al(s,r,a,c)}function Al(s,r,a,c){var g={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nc(s))i_(r,g);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,w=_(A,a);if(g.hasEagerState=!0,g.eagerState=w,Sn(w,A))return uc(s,r,g,0),ot===null&&lc(),!1}catch{}finally{}if(a=Pd(s,r,g,c),a!==null)return yn(a,s,c),s_(a,r,c),!0}return!1}function yh(s,r,a,c){if(c={lane:2,revertLane:$h(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Nc(s)){if(r)throw Error(i(479))}else r=Pd(s,a,c,2),r!==null&&yn(r,s,2)}function Nc(s){var r=s.alternate;return s===De||r!==null&&r===De}function i_(s,r){Ho=Sc=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function s_(s,r,a){if((a&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,a|=c,r.lanes=a,Ka(s,a)}}var Cl={readContext:Xt,use:wc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Cl.useEffectEvent=gt;var r_={readContext:Xt,use:wc,useCallback:function(s,r){return un().memoizedState=[s,r===void 0?null:r],s},useContext:Xt,useEffect:Hy,useImperativeHandle:function(s,r,a){a=a!=null?a.concat([s]):null,Rc(4194308,4,Jy.bind(null,r,s),a)},useLayoutEffect:function(s,r){return Rc(4194308,4,s,r)},useInsertionEffect:function(s,r){Rc(4,2,s,r)},useMemo:function(s,r){var a=un();r=r===void 0?null:r;var c=s();if(Hr){Nn(!0);try{s()}finally{Nn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(s,r,a){var c=un();if(a!==void 0){var g=a(r);if(Hr){Nn(!0);try{a(r)}finally{Nn(!1)}}}else g=r;return c.memoizedState=c.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},c.queue=s,s=s.dispatch=Ww.bind(null,De,s),[c.memoizedState,s]},useRef:function(s){var r=un();return s={current:s},r.memoizedState=s},useState:function(s){s=ch(s);var r=s.queue,a=n_.bind(null,De,r);return r.dispatch=a,[s.memoizedState,a]},useDebugValue:hh,useDeferredValue:function(s,r){var a=un();return ph(a,s,r)},useTransition:function(){var s=ch(!1);return s=Qy.bind(null,De,s.queue,!0,!1),un().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,a){var c=De,g=un();if(Fe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),ot===null)throw Error(i(349));(Le&127)!==0||Iy(c,r,a)}g.memoizedState=a;var _={value:a,getSnapshot:r};return g.queue=_,Hy(by.bind(null,c,_,s),[s]),c.flags|=2048,Go(9,{destroy:void 0},Ry.bind(null,c,_,a,r),null),a},useId:function(){var s=un(),r=ot.identifierPrefix;if(Fe){var a=Ii,c=wi;a=(c&~(1<<32-_t(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Ac++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Fw++,r="_"+r+"r_"+a.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:gh,useFormState:Ly,useActionState:Ly,useOptimistic:function(s){var r=un();r.memoizedState=r.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=yh.bind(null,De,!0,a),a.dispatch=r,[s,r]},useMemoCache:ah,useCacheRefresh:function(){return un().memoizedState=$w.bind(null,De)},useEffectEvent:function(s){var r=un(),a={impl:s};return r.memoizedState=a,function(){if((We&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},_h={readContext:Xt,use:wc,useCallback:Xy,useContext:Xt,useEffect:dh,useImperativeHandle:Yy,useInsertionEffect:Gy,useLayoutEffect:Ky,useMemo:$y,useReducer:Ic,useRef:By,useState:function(){return Ic($i)},useDebugValue:hh,useDeferredValue:function(s,r){var a=Et();return Wy(a,it.memoizedState,s,r)},useTransition:function(){var s=Ic($i)[0],r=Et().memoizedState;return[typeof s=="boolean"?s:Sl(s),r]},useSyncExternalStore:wy,useId:e_,useHostTransitionStatus:gh,useFormState:Oy,useActionState:Oy,useOptimistic:function(s,r){var a=Et();return xy(a,it,s,r)},useMemoCache:ah,useCacheRefresh:t_};_h.useEffectEvent=Fy;var o_={readContext:Xt,use:wc,useCallback:Xy,useContext:Xt,useEffect:dh,useImperativeHandle:Yy,useInsertionEffect:Gy,useLayoutEffect:Ky,useMemo:$y,useReducer:uh,useRef:By,useState:function(){return uh($i)},useDebugValue:hh,useDeferredValue:function(s,r){var a=Et();return it===null?ph(a,s,r):Wy(a,it.memoizedState,s,r)},useTransition:function(){var s=uh($i)[0],r=Et().memoizedState;return[typeof s=="boolean"?s:Sl(s),r]},useSyncExternalStore:wy,useId:e_,useHostTransitionStatus:gh,useFormState:zy,useActionState:zy,useOptimistic:function(s,r){var a=Et();return it!==null?xy(a,it,s,r):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:ah,useCacheRefresh:t_};o_.useEffectEvent=Fy;function vh(s,r,a,c){r=s.memoizedState,a=a(c,r),a=a==null?r:T({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Th={enqueueSetState:function(s,r,a){s=s._reactInternals;var c=bn(),g=Ds(c);g.payload=r,a!=null&&(g.callback=a),r=ks(s,g,c),r!==null&&(yn(r,s,c),_l(r,s,c))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var c=bn(),g=Ds(c);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=ks(s,g,c),r!==null&&(yn(r,s,c),_l(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=bn(),c=Ds(a);c.tag=2,r!=null&&(c.callback=r),r=ks(s,c,a),r!==null&&(yn(r,s,a),_l(r,s,a))}};function a_(s,r,a,c,g,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!cl(a,c)||!cl(g,_):!0}function l_(s,r,a,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==s&&Th.enqueueReplaceState(r,r.state,null)}function Fr(s,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(s=s.defaultProps){a===r&&(a=T({},a));for(var g in s)a[g]===void 0&&(a[g]=s[g])}return a}function u_(s){ac(s)}function c_(s){console.error(s)}function f_(s){ac(s)}function Mc(s,r){try{var a=s.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function d_(s,r,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Eh(s,r,a){return a=Ds(a),a.tag=3,a.payload={element:null},a.callback=function(){Mc(s,r)},a}function h_(s){return s=Ds(s),s.tag=3,s}function p_(s,r,a,c){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=c.value;s.payload=function(){return g(_)},s.callback=function(){d_(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){d_(r,a,c),typeof g!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function Qw(s,r,a,c,g){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Uo(r,a,g,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?Hc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,c===yc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Jh(s,c,g)),!1;case 22:return a.flags|=65536,c===yc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Jh(s,c,g)),!1}throw Error(i(435,a.tag))}return Jh(s,c,g),Hc(),!1}if(Fe)return r=Cn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,c!==zd&&(s=Error(i(422),{cause:c}),hl(Vn(s,a)))):(c!==zd&&(r=Error(i(423),{cause:c}),hl(Vn(r,a))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,c=Vn(c,a),g=Eh(s.stateNode,c,g),Qd(s,g),yt!==4&&(yt=2)),!1;var _=Error(i(520),{cause:c});if(_=Vn(_,a),Dl===null?Dl=[_]:Dl.push(_),yt!==4&&(yt=2),r===null)return!0;c=Vn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,s=g&-g,a.lanes|=s,s=Eh(a.stateNode,c,s),Qd(a,s),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qs===null||!qs.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=h_(g),p_(g,s,a,c),Qd(a,g),!1}a=a.return}while(a!==null);return!1}var Sh=Error(i(461)),xt=!1;function $t(s,r,a,c){r.child=s===null?_y(r,null,a,c):Br(r,s.child,a,c)}function m_(s,r,a,c,g){a=a.render;var _=r.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return Lr(r),c=ih(s,r,a,A,_,g),w=sh(),s!==null&&!xt?(rh(s,r,g),Wi(s,r,g)):(Fe&&w&&Od(r),r.flags|=1,$t(s,r,c,g),r.child)}function g_(s,r,a,c,g){if(s===null){var _=a.type;return typeof _=="function"&&!Vd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,y_(s,r,_,c,g)):(s=fc(a.type,null,c,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Mh(s,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:cl,a(A,c)&&s.ref===r.ref)return Wi(s,r,g)}return r.flags|=1,s=Gi(_,c),s.ref=r.ref,s.return=r,r.child=s}function y_(s,r,a,c,g){if(s!==null){var _=s.memoizedProps;if(cl(_,c)&&s.ref===r.ref)if(xt=!1,r.pendingProps=c=_,Mh(s,g))(s.flags&131072)!==0&&(xt=!0);else return r.lanes=s.lanes,Wi(s,r,g)}return Ah(s,r,a,c,g)}function __(s,r,a,c){var g=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,s!==null){for(c=r.child=s.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~_}else c=0,r.child=null;return v_(s,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&mc(r,_!==null?_.cachePool:null),_!==null?Ey(r,_):jd(),Sy(r);else return c=r.lanes=536870912,v_(s,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(mc(r,_.cachePool),Ey(r,_),Vs(),r.memoizedState=null):(s!==null&&mc(r,null),jd(),Vs());return $t(s,r,g,a),r.child}function wl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function v_(s,r,a,c,g){var _=Yd();return _=_===null?null:{parent:Nt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},s!==null&&mc(r,null),jd(),Sy(r),s!==null&&Uo(s,r,c,!0),r.childLanes=g,null}function xc(s,r){return r=kc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function T_(s,r,a){return Br(r,s.child,null,a),s=xc(r,r.pendingProps),s.flags|=2,wn(r),r.memoizedState=null,s}function Zw(s,r,a){var c=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Fe){if(c.mode==="hidden")return s=xc(r,c),r.lanes=536870912,wl(null,s);if(th(r),(s=at)?(s=Dv(s,On),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Rs!==null?{id:wi,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=iy(s),a.return=r,r.child=a,Yt=r,at=null)):s=null,s===null)throw Ns(r);return r.lanes=536870912,null}return xc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(th(r),g)if(r.flags&256)r.flags&=-257,r=T_(s,r,a);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(xt||Uo(s,r,a,!1),g=(a&s.childLanes)!==0,xt||g){if(c=ot,c!==null&&(A=Ja(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,kr(s,A),yn(c,s,A),Sh;Hc(),r=T_(s,r,a)}else s=_.treeContext,at=zn(A.nextSibling),Yt=r,Fe=!0,bs=null,On=!1,s!==null&&oy(r,s),r=xc(r,c),r.flags|=4096;return r}return s=Gi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Dc(s,r){var a=r.ref;if(a===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(r.flags|=4194816)}}function Ah(s,r,a,c,g){return Lr(r),a=ih(s,r,a,c,void 0,g),c=sh(),s!==null&&!xt?(rh(s,r,g),Wi(s,r,g)):(Fe&&c&&Od(r),r.flags|=1,$t(s,r,a,g),r.child)}function E_(s,r,a,c,g,_){return Lr(r),r.updateQueue=null,a=Cy(r,c,a,g),Ay(s),c=sh(),s!==null&&!xt?(rh(s,r,_),Wi(s,r,_)):(Fe&&c&&Od(r),r.flags|=1,$t(s,r,a,_),r.child)}function S_(s,r,a,c,g){if(Lr(r),r.stateNode===null){var _=Do,A=a.contextType;typeof A=="object"&&A!==null&&(_=Xt(A)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Th,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},$d(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?Xt(A):Do,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(vh(r,a,A,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Th.enqueueReplaceState(_,_.state,null),Tl(r,c,_,g),vl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var w=r.memoizedProps,U=Fr(a,w);_.props=U;var K=_.context,ee=a.contextType;A=Do,typeof ee=="object"&&ee!==null&&(A=Xt(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||K!==A)&&l_(r,_,c,A),xs=!1;var Y=r.memoizedState;_.state=Y,Tl(r,c,_,g),vl(),K=r.memoizedState,w||Y!==K||xs?(typeof ie=="function"&&(vh(r,a,ie,c),K=r.memoizedState),(U=xs||a_(r,a,U,c,Y,K,A))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),_.props=c,_.state=K,_.context=A,c=U):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Wd(s,r),A=r.memoizedProps,ee=Fr(a,A),_.props=ee,ie=r.pendingProps,Y=_.context,K=a.contextType,U=Do,typeof K=="object"&&K!==null&&(U=Xt(K)),w=a.getDerivedStateFromProps,(K=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ie||Y!==U)&&l_(r,_,c,U),xs=!1,Y=r.memoizedState,_.state=Y,Tl(r,c,_,g),vl();var j=r.memoizedState;A!==ie||Y!==j||xs||s!==null&&s.dependencies!==null&&hc(s.dependencies)?(typeof w=="function"&&(vh(r,a,w,c),j=r.memoizedState),(ee=xs||a_(r,a,ee,c,Y,j,U)||s!==null&&s.dependencies!==null&&hc(s.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,j,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,j,U)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=j),_.props=c,_.state=j,_.context=U,c=ee):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Dc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=Br(r,s.child,null,g),r.child=Br(r,null,a,g)):$t(s,r,a,g),r.memoizedState=_.state,s=r.child):s=Wi(s,r,g),s}function A_(s,r,a,c){return Vr(),r.flags|=256,$t(s,r,a,c),r.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wh(s){return{baseLanes:s,cachePool:dy()}}function Ih(s,r,a){return s=s!==null?s.childLanes&~a:0,r&&(s|=Rn),s}function C_(s,r,a){var c=r.pendingProps,g=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Tt.current&2)!==0),A&&(g=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Fe){if(g?Ps(r):Vs(),(s=at)?(s=Dv(s,On),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Rs!==null?{id:wi,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=iy(s),a.return=r,r.child=a,Yt=r,at=null)):s=null,s===null)throw Ns(r);return lp(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,g?(Vs(),g=r.mode,w=kc({mode:"hidden",children:w},g),c=Pr(c,g,a,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=wh(a),c.childLanes=Ih(s,A,a),r.memoizedState=Ch,wl(null,c)):(Ps(r),Rh(r,w))}var U=s.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(_)r.flags&256?(Ps(r),r.flags&=-257,r=bh(s,r,a)):r.memoizedState!==null?(Vs(),r.child=s.child,r.flags|=128,r=null):(Vs(),w=c.fallback,g=r.mode,c=kc({mode:"visible",children:c.children},g),w=Pr(w,g,a,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,Br(r,s.child,null,a),c=r.child,c.memoizedState=wh(a),c.childLanes=Ih(s,A,a),r.memoizedState=Ch,r=wl(null,c));else if(Ps(r),lp(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var K=A.dgst;A=K,c=Error(i(419)),c.stack="",c.digest=A,hl({value:c,source:null,stack:null}),r=bh(s,r,a)}else if(xt||Uo(s,r,a,!1),A=(a&s.childLanes)!==0,xt||A){if(A=ot,A!==null&&(c=Ja(A,a),c!==0&&c!==U.retryLane))throw U.retryLane=c,kr(s,c),yn(A,s,c),Sh;ap(w)||Hc(),r=bh(s,r,a)}else ap(w)?(r.flags|=192,r.child=s.child,r=null):(s=U.treeContext,at=zn(w.nextSibling),Yt=r,Fe=!0,bs=null,On=!1,s!==null&&oy(r,s),r=Rh(r,c.children),r.flags|=4096);return r}return g?(Vs(),w=c.fallback,g=r.mode,U=s.child,K=U.sibling,c=Gi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,K!==null?w=Gi(K,w):(w=Pr(w,g,a,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,wl(null,c),c=r.child,w=s.child.memoizedState,w===null?w=wh(a):(g=w.cachePool,g!==null?(U=Nt._currentValue,g=g.parent!==U?{parent:U,pool:U}:g):g=dy(),w={baseLanes:w.baseLanes|a,cachePool:g}),c.memoizedState=w,c.childLanes=Ih(s,A,a),r.memoizedState=Ch,wl(s.child,c)):(Ps(r),a=s.child,s=a.sibling,a=Gi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=a,r.memoizedState=null,a)}function Rh(s,r){return r=kc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function kc(s,r){return s=An(22,s,null,r),s.lanes=0,s}function bh(s,r,a){return Br(r,s.child,null,a),s=Rh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function w_(s,r,a){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Fd(s.return,r,a)}function Nh(s,r,a,c,g,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function I_(s,r,a){var c=r.pendingProps,g=c.revealOrder,_=c.tail;c=c.children;var A=Tt.current,w=(A&2)!==0;if(w?(A=A&1|2,r.flags|=128):A&=1,ae(Tt,A),$t(s,r,c,a),c=Fe?dl:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&w_(s,a,r);else if(s.tag===19)w_(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(a=r.child,g=null;a!==null;)s=a.alternate,s!==null&&Ec(s)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),Nh(r,!1,g,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&Ec(s)===null){r.child=g;break}s=g.sibling,g.sibling=a,a=g,g=s}Nh(r,!0,a,null,_,c);break;case"together":Nh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Wi(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),Os|=r.lanes,(a&r.childLanes)===0)if(s!==null){if(Uo(s,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,a=Gi(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=Gi(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function Mh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&hc(s)))}function jw(s,r,a){switch(r.tag){case 3:mt(r,r.stateNode.containerInfo),Ms(r,Nt,s.memoizedState.cache),Vr();break;case 27:case 5:mr(r);break;case 4:mt(r,r.stateNode.containerInfo);break;case 10:Ms(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,th(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ps(r),r.flags|=128,null):(a&r.child.childLanes)!==0?C_(s,r,a):(Ps(r),s=Wi(s,r,a),s!==null?s.sibling:null);Ps(r);break;case 19:var g=(s.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Uo(s,r,a,!1),c=(a&r.childLanes)!==0),g){if(c)return I_(s,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ae(Tt,Tt.current),c)break;return null;case 22:return r.lanes=0,__(s,r,a,r.pendingProps);case 24:Ms(r,Nt,s.memoizedState.cache)}return Wi(s,r,a)}function R_(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps)xt=!0;else{if(!Mh(s,a)&&(r.flags&128)===0)return xt=!1,jw(s,r,a);xt=(s.flags&131072)!==0}else xt=!1,Fe&&(r.flags&1048576)!==0&&ry(r,dl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=qr(r.elementType),r.type=s,typeof s=="function")Vd(s)?(c=Fr(s,c),r.tag=1,r=S_(null,r,s,c,a)):(r.tag=0,r=Ah(null,r,s,c,a));else{if(s!=null){var g=s.$$typeof;if(g===Z){r.tag=11,r=m_(null,r,s,c,a);break e}else if(g===D){r.tag=14,r=g_(null,r,s,c,a);break e}}throw r=Se(s)||s,Error(i(306,r,""))}}return r;case 0:return Ah(s,r,r.type,r.pendingProps,a);case 1:return c=r.type,g=Fr(c,r.pendingProps),S_(s,r,c,g,a);case 3:e:{if(mt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;g=_.element,Wd(s,r),Tl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,Ms(r,Nt,c),c!==_.cache&&Gd(r,[Nt],a,!0),vl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=A_(s,r,c,a);break e}else if(c!==g){g=Vn(Error(i(424)),r),hl(g),r=A_(s,r,c,a);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(at=zn(s.firstChild),Yt=r,Fe=!0,bs=null,On=!0,a=_y(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vr(),c===g){r=Wi(s,r,a);break e}$t(s,r,c,a)}r=r.child}return r;case 26:return Dc(s,r),s===null?(a=Ov(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,s=r.pendingProps,c=$c(be.current).createElement(a),c[It]=r,c[zt]=s,Wt(c,a,s),Rt(c),r.stateNode=c):r.memoizedState=Ov(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return mr(r),s===null&&Fe&&(c=r.stateNode=Vv(r.type,r.pendingProps,be.current),Yt=r,On=!0,g=at,Fs(r.type)?(up=g,at=zn(c.firstChild)):at=g),$t(s,r,r.pendingProps.children,a),Dc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Fe&&((g=c=at)&&(c=NI(c,r.type,r.pendingProps,On),c!==null?(r.stateNode=c,Yt=r,at=zn(c.firstChild),On=!1,g=!0):g=!1),g||Ns(r)),mr(r),g=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,sp(g,_)?c=null:A!==null&&sp(g,A)&&(r.flags|=32),r.memoizedState!==null&&(g=ih(s,r,Gw,null,null,a),zl._currentValue=g),Dc(s,r),$t(s,r,c,a),r.child;case 6:return s===null&&Fe&&((s=a=at)&&(a=MI(a,r.pendingProps,On),a!==null?(r.stateNode=a,Yt=r,at=null,s=!0):s=!1),s||Ns(r)),null;case 13:return C_(s,r,a);case 4:return mt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Br(r,null,c,a):$t(s,r,c,a),r.child;case 11:return m_(s,r,r.type,r.pendingProps,a);case 7:return $t(s,r,r.pendingProps,a),r.child;case 8:return $t(s,r,r.pendingProps.children,a),r.child;case 12:return $t(s,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Ms(r,r.type,c.value),$t(s,r,c.children,a),r.child;case 9:return g=r.type._context,c=r.pendingProps.children,Lr(r),g=Xt(g),c=c(g),r.flags|=1,$t(s,r,c,a),r.child;case 14:return g_(s,r,r.type,r.pendingProps,a);case 15:return y_(s,r,r.type,r.pendingProps,a);case 19:return I_(s,r,a);case 31:return Zw(s,r,a);case 22:return __(s,r,a,r.pendingProps);case 24:return Lr(r),c=Xt(Nt),s===null?(g=Yd(),g===null&&(g=ot,_=Kd(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),r.memoizedState={parent:c,cache:g},$d(r),Ms(r,Nt,g)):((s.lanes&a)!==0&&(Wd(s,r),Tl(r,null,null,a),vl()),g=s.memoizedState,_=r.memoizedState,g.parent!==c?(g={parent:c,cache:c},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Ms(r,Nt,c)):(c=_.cache,Ms(r,Nt,c),c!==g.cache&&Gd(r,[Nt],a,!0))),$t(s,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Qi(s){s.flags|=4}function xh(s,r,a,c,g){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(ev())s.flags|=8192;else throw zr=yc,Xd}else s.flags&=-16777217}function b_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Fv(r))if(ev())s.flags|=8192;else throw zr=yc,Xd}function Pc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?zu():536870912,s.lanes|=r,Xo|=r)}function Il(s,r){if(!Fe)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function lt(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(r)for(var g=s.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=c,s.childLanes=a,r}function eI(s,r,a){var c=r.pendingProps;switch(qd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return a=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Yi(Nt),Ze(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Vo(r)?Qi(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Bd())),lt(r),null;case 26:var g=r.type,_=r.memoizedState;return s===null?(Qi(r),_!==null?(lt(r),b_(r,_)):(lt(r),xh(r,g,null,c,a))):_?_!==s.memoizedState?(Qi(r),lt(r),b_(r,_)):(lt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Qi(r),lt(r),xh(r,g,s,c,a)),null;case 27:if(ho(r),a=be.current,g=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return lt(r),null}s=fe.current,Vo(r)?ay(r):(s=Vv(g,c,a),r.stateNode=s,Qi(r))}return lt(r),null;case 5:if(ho(r),g=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return lt(r),null}if(_=fe.current,Vo(r))ay(r);else{var A=$c(be.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(g,{is:c.is}):A.createElement(g)}}_[It]=r,_[zt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(Wt(_,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Qi(r)}}return lt(r),xh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,a),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Qi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=be.current,Vo(r)){if(s=r.stateNode,a=r.memoizedProps,c=null,g=Yt,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}s[It]=r,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Cv(s.nodeValue,a)),s||Ns(r,!0)}else s=$c(s).createTextNode(c),s[It]=r,r.stateNode=s}return lt(r),null;case 31:if(a=r.memoizedState,s===null||s.memoizedState!==null){if(c=Vo(r),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[It]=r}else Vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),s=!1}else a=Bd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return r.flags&256?(wn(r),r):(wn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return lt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Vo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[It]=r}else Vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),g=!1}else g=Bd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(wn(r),r):(wn(r),null)}return wn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=r.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==g&&(c.flags|=2048)),a!==s&&a&&(r.child.flags|=8192),Pc(r,r.updateQueue),lt(r),null);case 4:return Ze(),s===null&&jh(r.stateNode.containerInfo),lt(r),null;case 10:return Yi(r.type),lt(r),null;case 19:if(ne(Tt),c=r.memoizedState,c===null)return lt(r),null;if(g=(r.flags&128)!==0,_=c.rendering,_===null)if(g)Il(c,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=Ec(s),_!==null){for(r.flags|=128,Il(c,!1),s=_.updateQueue,r.updateQueue=s,Pc(r,s),r.subtreeFlags=0,s=a,a=r.child;a!==null;)ny(a,s),a=a.sibling;return ae(Tt,Tt.current&1|2),Fe&&Ki(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&an()>qc&&(r.flags|=128,g=!0,Il(c,!1),r.lanes=4194304)}else{if(!g)if(s=Ec(_),s!==null){if(r.flags|=128,g=!0,s=s.updateQueue,r.updateQueue=s,Pc(r,s),Il(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Fe)return lt(r),null}else 2*an()-c.renderingStartTime>qc&&a!==536870912&&(r.flags|=128,g=!0,Il(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=an(),s.sibling=null,a=Tt.current,ae(Tt,g?a&1|2:a&1),Fe&&Ki(r,c.treeForkCount),s):(lt(r),null);case 22:case 23:return wn(r),eh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),a=r.updateQueue,a!==null&&Pc(r,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),s!==null&&ne(Or),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Yi(Nt),lt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function tI(s,r){switch(qd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Yi(Nt),Ze(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ho(r),null;case 31:if(r.memoizedState!==null){if(wn(r),r.alternate===null)throw Error(i(340));Vr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(wn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Vr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(Tt),null;case 4:return Ze(),null;case 10:return Yi(r.type),null;case 22:case 23:return wn(r),eh(),s!==null&&ne(Or),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Yi(Nt),null;case 25:return null;default:return null}}function N_(s,r){switch(qd(r),r.tag){case 3:Yi(Nt),Ze();break;case 26:case 27:case 5:ho(r);break;case 4:Ze();break;case 31:r.memoizedState!==null&&wn(r);break;case 13:wn(r);break;case 19:ne(Tt);break;case 10:Yi(r.type);break;case 22:case 23:wn(r),eh(),s!==null&&ne(Or);break;case 24:Yi(Nt)}}function Rl(s,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var g=c.next;a=g;do{if((a.tag&s)===s){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==g)}}catch(w){tt(r,r.return,w)}}function Us(s,r,a){try{var c=r.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var _=g.next;c=_;do{if((c.tag&s)===s){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,g=r;var U=a,K=w;try{K()}catch(ee){tt(g,U,ee)}}}c=c.next}while(c!==_)}}catch(ee){tt(r,r.return,ee)}}function M_(s){var r=s.updateQueue;if(r!==null){var a=s.stateNode;try{Ty(r,a)}catch(c){tt(s,s.return,c)}}}function x_(s,r,a){a.props=Fr(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){tt(s,r,c)}}function bl(s,r){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(g){tt(s,r,g)}}function Ri(s,r){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(g){tt(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){tt(s,r,g)}else a.current=null}function D_(s){var r=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(g){tt(s,s.return,g)}}function Dh(s,r,a){try{var c=s.stateNode;AI(c,s.type,a,r),c[zt]=r}catch(g){tt(s,s.return,g)}}function k_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fs(s.type)||s.tag===4}function kh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||k_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ph(s,r,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(s),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$n));else if(c!==4&&(c===27&&Fs(s.type)&&(a=s.stateNode,r=null),s=s.child,s!==null))for(Ph(s,r,a),s=s.sibling;s!==null;)Ph(s,r,a),s=s.sibling}function Vc(s,r,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(c!==4&&(c===27&&Fs(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(Vc(s,r,a),s=s.sibling;s!==null;)Vc(s,r,a),s=s.sibling}function P_(s){var r=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Wt(r,c,a),r[It]=s,r[zt]=a}catch(_){tt(s,s.return,_)}}var Zi=!1,Dt=!1,Vh=!1,V_=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function nI(s,r){if(s=s.containerInfo,np=nf,s=Yg(s),bd(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var g=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,w=-1,U=-1,K=0,ee=0,ie=s,Y=null;t:for(;;){for(var j;ie!==a||g!==0&&ie.nodeType!==3||(w=A+g),ie!==_||c!==0&&ie.nodeType!==3||(U=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(j=ie.firstChild)!==null;)Y=ie,ie=j;for(;;){if(ie===s)break t;if(Y===a&&++K===g&&(w=A),Y===_&&++ee===c&&(U=A),(j=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=j}a=w===-1||U===-1?null:{start:w,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(ip={focusedElem:s,selectionRange:a},nf=!1,Ht=r;Ht!==null;)if(r=Ht,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ht=s;else for(;Ht!==null;){switch(r=Ht,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)g=s[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,a=r,g=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var he=Fr(a.type,g);s=c.getSnapshotBeforeUpdate(he,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){tt(a,a.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,a=s.nodeType,a===9)op(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":op(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Ht=s;break}Ht=r.return}}function U_(s,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:es(s,a),c&4&&Rl(5,a);break;case 1:if(es(s,a),c&4)if(s=a.stateNode,r===null)try{s.componentDidMount()}catch(A){tt(a,a.return,A)}else{var g=Fr(a.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(a,a.return,A)}}c&64&&M_(a),c&512&&bl(a,a.return);break;case 3:if(es(s,a),c&64&&(s=a.updateQueue,s!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ty(s,r)}catch(A){tt(a,a.return,A)}}break;case 27:r===null&&c&4&&P_(a);case 26:case 5:es(s,a),r===null&&c&4&&D_(a),c&512&&bl(a,a.return);break;case 12:es(s,a);break;case 31:es(s,a),c&4&&q_(s,a);break;case 13:es(s,a),c&4&&z_(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=fI.bind(null,a),xI(s,a))));break;case 22:if(c=a.memoizedState!==null||Zi,!c){r=r!==null&&r.memoizedState!==null||Dt,g=Zi;var _=Dt;Zi=c,(Dt=r)&&!_?ts(s,a,(a.subtreeFlags&8772)!==0):es(s,a),Zi=g,Dt=_}break;case 30:break;default:es(s,a)}}function L_(s){var r=s.alternate;r!==null&&(s.alternate=null,L_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&_o(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ht=null,hn=!1;function ji(s,r,a){for(a=a.child;a!==null;)O_(s,r,a),a=a.sibling}function O_(s,r,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:Dt||Ri(a,r),ji(s,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ri(a,r);var c=ht,g=hn;Fs(a.type)&&(ht=a.stateNode,hn=!1),ji(s,r,a),Ll(a.stateNode),ht=c,hn=g;break;case 5:Dt||Ri(a,r);case 6:if(c=ht,g=hn,ht=null,ji(s,r,a),ht=c,hn=g,ht!==null)if(hn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(_){tt(a,r,_)}else try{ht.removeChild(a.stateNode)}catch(_){tt(a,r,_)}break;case 18:ht!==null&&(hn?(s=ht,Mv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),na(s)):Mv(ht,a.stateNode));break;case 4:c=ht,g=hn,ht=a.stateNode.containerInfo,hn=!0,ji(s,r,a),ht=c,hn=g;break;case 0:case 11:case 14:case 15:Us(2,a,r),Dt||Us(4,a,r),ji(s,r,a);break;case 1:Dt||(Ri(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&x_(a,r,c)),ji(s,r,a);break;case 21:ji(s,r,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,ji(s,r,a),Dt=c;break;default:ji(s,r,a)}}function q_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{na(s)}catch(a){tt(r,r.return,a)}}}function z_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{na(s)}catch(a){tt(r,r.return,a)}}function iI(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new V_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new V_),r;default:throw Error(i(435,s.tag))}}function Uc(s,r){var a=iI(s);r.forEach(function(c){if(!a.has(c)){a.add(c);var g=dI.bind(null,s,c);c.then(g,g)}})}function pn(s,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var g=a[c],_=s,A=r,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(Fs(w.type)){ht=w.stateNode,hn=!1;break e}break;case 5:ht=w.stateNode,hn=!1;break e;case 3:case 4:ht=w.stateNode.containerInfo,hn=!0;break e}w=w.return}if(ht===null)throw Error(i(160));O_(_,A,g),ht=null,hn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)B_(r,s),r=r.sibling}var ti=null;function B_(s,r){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:pn(r,s),mn(s),c&4&&(Us(3,s,s.return),Rl(3,s),Us(5,s,s.return));break;case 1:pn(r,s),mn(s),c&512&&(Dt||a===null||Ri(a,a.return)),c&64&&Zi&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var g=ti;if(pn(r,s),mn(s),c&512&&(Dt||a===null||Ri(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":_=g.getElementsByTagName("title")[0],(!_||_[hi]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(c),g.head.insertBefore(_,g.querySelector("head > title"))),Wt(_,c,a),_[It]=s,Rt(_),c=_;break e;case"link":var A=Bv("link","href",g).get(c+(a.href||""));if(A){for(var w=0;w<A.length;w++)if(_=A[w],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(w,1);break t}}_=g.createElement(c),Wt(_,c,a),g.head.appendChild(_);break;case"meta":if(A=Bv("meta","content",g).get(c+(a.content||""))){for(w=0;w<A.length;w++)if(_=A[w],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(w,1);break t}}_=g.createElement(c),Wt(_,c,a),g.head.appendChild(_);break;default:throw Error(i(468,c))}_[It]=s,Rt(_),c=_}s.stateNode=c}else Hv(g,s.type,s.stateNode);else s.stateNode=zv(g,c,s.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?Hv(g,s.type,s.stateNode):zv(g,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Dh(s,s.memoizedProps,a.memoizedProps)}break;case 27:pn(r,s),mn(s),c&512&&(Dt||a===null||Ri(a,a.return)),a!==null&&c&4&&Dh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(pn(r,s),mn(s),c&512&&(Dt||a===null||Ri(a,a.return)),s.flags&32){g=s.stateNode;try{dn(g,"")}catch(he){tt(s,s.return,he)}}c&4&&s.stateNode!=null&&(g=s.memoizedProps,Dh(s,g,a!==null?a.memoizedProps:g)),c&1024&&(Vh=!0);break;case 6:if(pn(r,s),mn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(he){tt(s,s.return,he)}}break;case 3:if(Zc=null,g=ti,ti=Wc(r.containerInfo),pn(r,s),ti=g,mn(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{na(r.containerInfo)}catch(he){tt(s,s.return,he)}Vh&&(Vh=!1,H_(s));break;case 4:c=ti,ti=Wc(s.stateNode.containerInfo),pn(r,s),mn(s),ti=c;break;case 12:pn(r,s),mn(s);break;case 31:pn(r,s),mn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Uc(s,c)));break;case 13:pn(r,s),mn(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oc=an()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Uc(s,c)));break;case 22:g=s.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,K=Zi,ee=Dt;if(Zi=K||g,Dt=ee||U,pn(r,s),Dt=ee,Zi=K,mn(s),c&8192)e:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||U||Zi||Dt||Gr(s)),a=null,r=s;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(_=U.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=U.stateNode;var ie=U.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(he){tt(U,U.return,he)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(he){tt(U,U.return,he)}}}else if(r.tag===18){if(a===null){U=r;try{var j=U.stateNode;g?xv(j,!0):xv(U.stateNode,!1)}catch(he){tt(U,U.return,he)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Uc(s,a))));break;case 19:pn(r,s),mn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Uc(s,c)));break;case 30:break;case 21:break;default:pn(r,s),mn(s)}}function mn(s){var r=s.flags;if(r&2){try{for(var a,c=s.return;c!==null;){if(k_(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var g=a.stateNode,_=kh(s);Vc(s,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(dn(A,""),a.flags&=-33);var w=kh(s);Vc(s,w,A);break;case 3:case 4:var U=a.stateNode.containerInfo,K=kh(s);Ph(s,K,U);break;default:throw Error(i(161))}}catch(ee){tt(s,s.return,ee)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function H_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;H_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function es(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)U_(s,r.alternate,r),r=r.sibling}function Gr(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Us(4,r,r.return),Gr(r);break;case 1:Ri(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&x_(r,r.return,a),Gr(r);break;case 27:Ll(r.stateNode);case 26:case 5:Ri(r,r.return),Gr(r);break;case 22:r.memoizedState===null&&Gr(r);break;case 30:Gr(r);break;default:Gr(r)}s=s.sibling}}function ts(s,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,g=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:ts(g,_,a),Rl(4,_);break;case 1:if(ts(g,_,a),c=_,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(K){tt(c,c.return,K)}if(c=_,g=c.updateQueue,g!==null){var w=c.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)vy(U[g],w)}catch(K){tt(c,c.return,K)}}a&&A&64&&M_(_),bl(_,_.return);break;case 27:P_(_);case 26:case 5:ts(g,_,a),a&&c===null&&A&4&&D_(_),bl(_,_.return);break;case 12:ts(g,_,a);break;case 31:ts(g,_,a),a&&A&4&&q_(g,_);break;case 13:ts(g,_,a),a&&A&4&&z_(g,_);break;case 22:_.memoizedState===null&&ts(g,_,a),bl(_,_.return);break;case 30:break;default:ts(g,_,a)}r=r.sibling}}function Uh(s,r){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&pl(a))}function Lh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&pl(s))}function ni(s,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)F_(s,r,a,c),r=r.sibling}function F_(s,r,a,c){var g=r.flags;switch(r.tag){case 0:case 11:case 15:ni(s,r,a,c),g&2048&&Rl(9,r);break;case 1:ni(s,r,a,c);break;case 3:ni(s,r,a,c),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&pl(s)));break;case 12:if(g&2048){ni(s,r,a,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,w=_.onPostCommit;typeof w=="function"&&w(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){tt(r,r.return,U)}}else ni(s,r,a,c);break;case 31:ni(s,r,a,c);break;case 13:ni(s,r,a,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ni(s,r,a,c):Nl(s,r):_._visibility&2?ni(s,r,a,c):(_._visibility|=2,Ko(s,r,a,c,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Uh(A,r);break;case 24:ni(s,r,a,c),g&2048&&Lh(r.alternate,r);break;default:ni(s,r,a,c)}}function Ko(s,r,a,c,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,w=a,U=c,K=A.flags;switch(A.tag){case 0:case 11:case 15:Ko(_,A,w,U,g),Rl(8,A);break;case 23:break;case 22:var ee=A.stateNode;A.memoizedState!==null?ee._visibility&2?Ko(_,A,w,U,g):Nl(_,A):(ee._visibility|=2,Ko(_,A,w,U,g)),g&&K&2048&&Uh(A.alternate,A);break;case 24:Ko(_,A,w,U,g),g&&K&2048&&Lh(A.alternate,A);break;default:Ko(_,A,w,U,g)}r=r.sibling}}function Nl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=s,c=r,g=c.flags;switch(c.tag){case 22:Nl(a,c),g&2048&&Uh(c.alternate,c);break;case 24:Nl(a,c),g&2048&&Lh(c.alternate,c);break;default:Nl(a,c)}r=r.sibling}}var Ml=8192;function Jo(s,r,a){if(s.subtreeFlags&Ml)for(s=s.child;s!==null;)G_(s,r,a),s=s.sibling}function G_(s,r,a){switch(s.tag){case 26:Jo(s,r,a),s.flags&Ml&&s.memoizedState!==null&&FI(a,ti,s.memoizedState,s.memoizedProps);break;case 5:Jo(s,r,a);break;case 3:case 4:var c=ti;ti=Wc(s.stateNode.containerInfo),Jo(s,r,a),ti=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Ml,Ml=16777216,Jo(s,r,a),Ml=c):Jo(s,r,a));break;default:Jo(s,r,a)}}function K_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function xl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Ht=c,Y_(c,s)}K_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)J_(s),s=s.sibling}function J_(s){switch(s.tag){case 0:case 11:case 15:xl(s),s.flags&2048&&Us(9,s,s.return);break;case 3:xl(s);break;case 12:xl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Lc(s)):xl(s);break;default:xl(s)}}function Lc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Ht=c,Y_(c,s)}K_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Us(8,r,r.return),Lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Lc(r));break;default:Lc(r)}s=s.sibling}}function Y_(s,r){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Us(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:pl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Ht=c;else e:for(a=s;Ht!==null;){c=Ht;var g=c.sibling,_=c.return;if(L_(c),c===a){Ht=null;break e}if(g!==null){g.return=_,Ht=g;break e}Ht=_}}}var sI={getCacheForType:function(s){var r=Xt(Nt),a=r.data.get(s);return a===void 0&&(a=s(),r.data.set(s,a)),a},cacheSignal:function(){return Xt(Nt).controller.signal}},rI=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Ve=null,Le=0,et=0,In=null,Ls=!1,Yo=!1,Oh=!1,ns=0,yt=0,Os=0,Kr=0,qh=0,Rn=0,Xo=0,Dl=null,gn=null,zh=!1,Oc=0,X_=0,qc=1/0,zc=null,qs=null,Ut=0,zs=null,$o=null,is=0,Bh=0,Hh=null,$_=null,kl=0,Fh=null;function bn(){return(We&2)!==0&&Le!==0?Le&-Le:X.T!==null?$h():Bu()}function W_(){if(Rn===0)if((Le&536870912)===0||Fe){var s=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Rn=s}else Rn=536870912;return s=Cn.current,s!==null&&(s.flags|=32),Rn}function yn(s,r,a){(s===ot&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(Wo(s,0),Bs(s,Le,Rn,!1)),vr(s,a),((We&2)===0||s!==ot)&&(s===ot&&((We&2)===0&&(Kr|=a),yt===4&&Bs(s,Le,Rn,!1)),bi(s))}function Q_(s,r,a){if((We&6)!==0)throw Error(i(327));var c=!a&&(r&127)===0&&(r&s.expiredLanes)===0||Jn(s,r),g=c?lI(s,r):Kh(s,r,!0),_=c;do{if(g===0){Yo&&!c&&Bs(s,r,0,!1);break}else{if(a=s.current.alternate,_&&!oI(a)){g=Kh(s,r,!1),_=!1;continue}if(g===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var w=s;g=Dl;var U=w.current.memoizedState.isDehydrated;if(U&&(Wo(w,A).flags|=256),A=Kh(w,A,!1),A!==2){if(Oh&&!U){w.errorRecoveryDisabledLanes|=_,Kr|=_,g=4;break e}_=gn,gn=g,_!==null&&(gn===null?gn=_:gn.push.apply(gn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){Wo(s,0),Bs(s,r,0,!0);break}e:{switch(c=s,_=g,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Bs(c,r,Rn,!Ls);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=Oc+300-an(),10<g)){if(Bs(c,r,Rn,!Ls),ci(c,0,!0)!==0)break e;is=r,c.timeoutHandle=bv(Z_.bind(null,c,a,gn,zc,zh,r,Rn,Kr,Xo,Ls,_,"Throttled",-0,0),g);break e}Z_(c,a,gn,zc,zh,r,Rn,Kr,Xo,Ls,_,null,-0,0)}}break}while(!0);bi(s)}function Z_(s,r,a,c,g,_,A,w,U,K,ee,ie,Y,j){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},G_(r,_,ie);var he=(_&62914560)===_?Oc-an():(_&4194048)===_?X_-an():0;if(he=GI(ie,he),he!==null){is=_,s.cancelPendingCommit=he(ov.bind(null,s,r,_,a,c,g,A,w,U,ee,ie,null,Y,j)),Bs(s,_,A,!K);return}}ov(s,r,_,a,c,g,A,w,U)}function oI(s){for(var r=s;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var g=a[c],_=g.getSnapshot;g=g.value;try{if(!Sn(_(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Bs(s,r,a,c){r&=~qh,r&=~Kr,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var g=r;0<g;){var _=31-_t(g),A=1<<_;c[_]=-1,g&=~A}a!==0&&Tr(s,a,r)}function Bc(){return(We&6)===0?(Pl(0),!1):!0}function Gh(){if(Ve!==null){if(et===0)var s=Ve.return;else s=Ve,Ji=Ur=null,oh(s),zo=null,gl=0,s=Ve;for(;s!==null;)N_(s.alternate,s),s=s.return;Ve=null}}function Wo(s,r){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,II(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),is=0,Gh(),ot=s,Ve=a=Gi(s.current,null),Le=r,et=0,In=null,Ls=!1,Yo=Jn(s,r),Oh=!1,Xo=Rn=qh=Kr=Os=yt=0,gn=Dl=null,zh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var g=31-_t(c),_=1<<g;r|=s[g],c&=~_}return ns=r,lc(),a}function j_(s,r){De=null,X.H=Cl,r===qo||r===gc?(r=my(),et=3):r===Xd?(r=my(),et=4):et=r===Sh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,In=r,Ve===null&&(yt=1,Mc(s,Vn(r,s.current)))}function ev(){var s=Cn.current;return s===null?!0:(Le&4194048)===Le?qn===null:(Le&62914560)===Le||(Le&536870912)!==0?s===qn:!1}function tv(){var s=X.H;return X.H=Cl,s===null?Cl:s}function nv(){var s=X.A;return X.A=sI,s}function Hc(){yt=4,Ls||(Le&4194048)!==Le&&Cn.current!==null||(Yo=!0),(Os&134217727)===0&&(Kr&134217727)===0||ot===null||Bs(ot,Le,Rn,!1)}function Kh(s,r,a){var c=We;We|=2;var g=tv(),_=nv();(ot!==s||Le!==r)&&(zc=null,Wo(s,r)),r=!1;var A=yt;e:do try{if(et!==0&&Ve!==null){var w=Ve,U=In;switch(et){case 8:Gh(),A=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(r=!0);var K=et;if(et=0,In=null,Qo(s,w,U,K),a&&Yo){A=0;break e}break;default:K=et,et=0,In=null,Qo(s,w,U,K)}}aI(),A=yt;break}catch(ee){j_(s,ee)}while(!0);return r&&s.shellSuspendCounter++,Ji=Ur=null,We=c,X.H=g,X.A=_,Ve===null&&(ot=null,Le=0,lc()),A}function aI(){for(;Ve!==null;)iv(Ve)}function lI(s,r){var a=We;We|=2;var c=tv(),g=nv();ot!==s||Le!==r?(zc=null,qc=an()+500,Wo(s,r)):Yo=Jn(s,r);e:do try{if(et!==0&&Ve!==null){r=Ve;var _=In;t:switch(et){case 1:et=0,In=null,Qo(s,r,_,1);break;case 2:case 9:if(hy(_)){et=0,In=null,sv(r);break}r=function(){et!==2&&et!==9||ot!==s||(et=7),bi(s)},_.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:hy(_)?(et=0,In=null,sv(r)):(et=0,In=null,Qo(s,r,_,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var w=Ve;if(A?Fv(A):w.stateNode.complete){et=0,In=null;var U=w.sibling;if(U!==null)Ve=U;else{var K=w.return;K!==null?(Ve=K,Fc(K)):Ve=null}break t}}et=0,In=null,Qo(s,r,_,5);break;case 6:et=0,In=null,Qo(s,r,_,6);break;case 8:Gh(),yt=6;break e;default:throw Error(i(462))}}uI();break}catch(ee){j_(s,ee)}while(!0);return Ji=Ur=null,X.H=c,X.A=g,We=a,Ve!==null?0:(ot=null,Le=0,lc(),yt)}function uI(){for(;Ve!==null&&!Ed();)iv(Ve)}function iv(s){var r=R_(s.alternate,s,ns);s.memoizedProps=s.pendingProps,r===null?Fc(s):Ve=r}function sv(s){var r=s,a=r.alternate;switch(r.tag){case 15:case 0:r=E_(a,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=E_(a,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:oh(r);default:N_(a,r),r=Ve=ny(r,ns),r=R_(a,r,ns)}s.memoizedProps=s.pendingProps,r===null?Fc(s):Ve=r}function Qo(s,r,a,c){Ji=Ur=null,oh(r),zo=null,gl=0;var g=r.return;try{if(Qw(s,g,r,a,Le)){yt=1,Mc(s,Vn(a,s.current)),Ve=null;return}}catch(_){if(g!==null)throw Ve=g,_;yt=1,Mc(s,Vn(a,s.current)),Ve=null;return}r.flags&32768?(Fe||c===1?s=!0:Yo||(Le&536870912)!==0?s=!1:(Ls=s=!0,(c===2||c===9||c===3||c===6)&&(c=Cn.current,c!==null&&c.tag===13&&(c.flags|=16384))),rv(r,s)):Fc(r)}function Fc(s){var r=s;do{if((r.flags&32768)!==0){rv(r,Ls);return}s=r.return;var a=eI(r.alternate,r,ns);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=s}while(r!==null);yt===0&&(yt=5)}function rv(s,r){do{var a=tI(s.alternate,s);if(a!==null){a.flags&=32767,Ve=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(s=s.sibling,s!==null)){Ve=s;return}Ve=s=a}while(s!==null);yt=6,Ve=null}function ov(s,r,a,c,g,_,A,w,U){s.cancelPendingCommit=null;do Gc();while(Ut!==0);if((We&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=kd,Cd(s,a,_,A,w,U),s===ot&&(Ve=ot=null,Le=0),$o=r,zs=s,is=a,Bh=_,Hh=g,$_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,hI(ys,function(){return fv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,g=oe.p,oe.p=2,A=We,We|=4;try{nI(s,r,a)}finally{We=A,oe.p=g,X.T=c}}Ut=1,av(),lv(),uv()}}function av(){if(Ut===1){Ut=0;var s=zs,r=$o,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=oe.p;oe.p=2;var g=We;We|=4;try{B_(r,s);var _=ip,A=Yg(s.containerInfo),w=_.focusedElem,U=_.selectionRange;if(A!==w&&w&&w.ownerDocument&&Jg(w.ownerDocument.documentElement,w)){if(U!==null&&bd(w)){var K=U.start,ee=U.end;if(ee===void 0&&(ee=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(ee,w.value.length);else{var ie=w.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var j=Y.getSelection(),he=w.textContent.length,Ae=Math.min(U.start,he),rt=U.end===void 0?Ae:Math.min(U.end,he);!j.extend&&Ae>rt&&(A=rt,rt=Ae,Ae=A);var H=Kg(w,Ae),q=Kg(w,rt);if(H&&q&&(j.rangeCount!==1||j.anchorNode!==H.node||j.anchorOffset!==H.offset||j.focusNode!==q.node||j.focusOffset!==q.offset)){var G=ie.createRange();G.setStart(H.node,H.offset),j.removeAllRanges(),Ae>rt?(j.addRange(G),j.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),j.addRange(G))}}}}for(ie=[],j=w;j=j.parentNode;)j.nodeType===1&&ie.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var te=ie[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}nf=!!np,ip=np=null}finally{We=g,oe.p=c,X.T=a}}s.current=r,Ut=2}}function lv(){if(Ut===2){Ut=0;var s=zs,r=$o,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=oe.p;oe.p=2;var g=We;We|=4;try{U_(s,r.alternate,r)}finally{We=g,oe.p=c,X.T=a}}Ut=3}}function uv(){if(Ut===4||Ut===3){Ut=0,Pu();var s=zs,r=$o,a=is,c=$_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,$o=zs=null,cv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(qs=null),zi(a),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Kn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=X.T,g=oe.p,oe.p=2,X.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var w=c[A];_(w.value,{componentStack:w.stack})}}finally{X.T=r,oe.p=g}}(is&3)!==0&&Gc(),bi(s),g=s.pendingLanes,(a&261930)!==0&&(g&42)!==0?s===Fh?kl++:(kl=0,Fh=s):kl=0,Pl(0)}}function cv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,pl(r)))}function Gc(){return av(),lv(),uv(),fv()}function fv(){if(Ut!==5)return!1;var s=zs,r=Bh;Bh=0;var a=zi(is),c=X.T,g=oe.p;try{oe.p=32>a?32:a,X.T=null,a=Hh,Hh=null;var _=zs,A=is;if(Ut=0,$o=zs=null,is=0,(We&6)!==0)throw Error(i(331));var w=We;if(We|=4,J_(_.current),F_(_,_.current,A,a),We=w,Pl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Kn,_)}catch{}return!0}finally{oe.p=g,X.T=c,cv(s,r)}}function dv(s,r,a){r=Vn(a,r),r=Eh(s.stateNode,r,2),s=ks(s,r,2),s!==null&&(vr(s,2),bi(s))}function tt(s,r,a){if(s.tag===3)dv(s,s,a);else for(;r!==null;){if(r.tag===3){dv(r,s,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(qs===null||!qs.has(c))){s=Vn(a,s),a=h_(2),c=ks(r,a,2),c!==null&&(p_(a,c,r,s),vr(c,2),bi(c));break}}r=r.return}}function Jh(s,r,a){var c=s.pingCache;if(c===null){c=s.pingCache=new rI;var g=new Set;c.set(r,g)}else g=c.get(r),g===void 0&&(g=new Set,c.set(r,g));g.has(a)||(Oh=!0,g.add(a),s=cI.bind(null,s,r,a),r.then(s,s))}function cI(s,r,a){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,ot===s&&(Le&a)===a&&(yt===4||yt===3&&(Le&62914560)===Le&&300>an()-Oc?(We&2)===0&&Wo(s,0):qh|=a,Xo===Le&&(Xo=0)),bi(s)}function hv(s,r){r===0&&(r=zu()),s=kr(s,r),s!==null&&(vr(s,r),bi(s))}function fI(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),hv(s,a)}function dI(s,r){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,g=s.memoizedState;g!==null&&(a=g.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),hv(s,a)}function hI(s,r){return Vt(s,r)}var Kc=null,Zo=null,Yh=!1,Jc=!1,Xh=!1,Hs=0;function bi(s){s!==Zo&&s.next===null&&(Zo===null?Kc=Zo=s:Zo=Zo.next=s),Jc=!0,Yh||(Yh=!0,mI())}function Pl(s,r){if(!Xh&&Jc){Xh=!0;do for(var a=!1,c=Kc;c!==null;){if(s!==0){var g=c.pendingLanes;if(g===0)var _=0;else{var A=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-_t(42|s)+1)-1,_&=g&~(A&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,yv(c,_))}else _=Le,_=ci(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Jn(c,_)||(a=!0,yv(c,_));c=c.next}while(a);Xh=!1}}function pI(){pv()}function pv(){Jc=Yh=!1;var s=0;Hs!==0&&wI()&&(s=Hs);for(var r=an(),a=null,c=Kc;c!==null;){var g=c.next,_=mv(c,r);_===0?(c.next=null,a===null?Kc=g:a.next=g,g===null&&(Zo=a)):(a=c,(s!==0||(_&3)!==0)&&(Jc=!0)),c=g}Ut!==0&&Ut!==5||Pl(s),Hs!==0&&(Hs=0)}function mv(s,r){for(var a=s.suspendedLanes,c=s.pingedLanes,g=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-_t(_),w=1<<A,U=g[A];U===-1?((w&a)===0||(w&c)!==0)&&(g[A]=Ad(w,r)):U<=r&&(s.expiredLanes|=w),_&=~w}if(r=ot,a=Le,a=ci(s,s===r?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===r&&(et===2||et===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&gs(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||Jn(s,a)){if(r=a&-a,r===s.callbackPriority)return r;switch(c!==null&&gs(c),zi(a)){case 2:case 8:a=Ga;break;case 32:a=ys;break;case 268435456:a=Vu;break;default:a=ys}return c=gv.bind(null,s),a=Vt(a,c),s.callbackPriority=r,s.callbackNode=a,r}return c!==null&&c!==null&&gs(c),s.callbackPriority=2,s.callbackNode=null,2}function gv(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Gc()&&s.callbackNode!==a)return null;var c=Le;return c=ci(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Q_(s,c,r),mv(s,an()),s.callbackNode!=null&&s.callbackNode===a?gv.bind(null,s):null)}function yv(s,r){if(Gc())return null;Q_(s,r,!0)}function mI(){RI(function(){(We&6)!==0?Vt(Fa,pI):pv()})}function $h(){if(Hs===0){var s=Lo;s===0&&(s=li,li<<=1,(li&261888)===0&&(li=256)),Hs=s}return Hs}function _v(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:So(""+s)}function vv(s,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,s.id&&a.setAttribute("form",s.id),r.parentNode.insertBefore(a,r),s=new FormData(s),a.parentNode.removeChild(a),s}function gI(s,r,a,c,g){if(r==="submit"&&a&&a.stateNode===g){var _=_v((g[zt]||null).action),A=c.submitter;A&&(r=(r=A[zt]||null)?_v(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var w=new Ei("action","action",null,c,g);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Hs!==0){var U=A?vv(g,A):new FormData(g);mh(a,{pending:!0,data:U,method:g.method,action:_},null,U)}}else typeof _=="function"&&(w.preventDefault(),U=A?vv(g,A):new FormData(g),mh(a,{pending:!0,data:U,method:g.method,action:_},_,U))},currentTarget:g}]})}}for(var Wh=0;Wh<Dd.length;Wh++){var Qh=Dd[Wh],yI=Qh.toLowerCase(),_I=Qh[0].toUpperCase()+Qh.slice(1);ei(yI,"on"+_I)}ei(Wg,"onAnimationEnd"),ei(Qg,"onAnimationIteration"),ei(Zg,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Pw,"onTransitionRun"),ei(Vw,"onTransitionStart"),ei(Uw,"onTransitionCancel"),ei(jg,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function Tv(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],g=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var w=c[A],U=w.instance,K=w.currentTarget;if(w=w.listener,U!==_&&g.isPropagationStopped())break e;_=w,g.currentTarget=K;try{_(g)}catch(ee){ac(ee)}g.currentTarget=null,_=U}else for(A=0;A<c.length;A++){if(w=c[A],U=w.instance,K=w.currentTarget,w=w.listener,U!==_&&g.isPropagationStopped())break e;_=w,g.currentTarget=K;try{_(g)}catch(ee){ac(ee)}g.currentTarget=null,_=U}}}}function Ue(s,r){var a=r[yo];a===void 0&&(a=r[yo]=new Set);var c=s+"__bubble";a.has(c)||(Ev(r,s,2,!1),a.add(c))}function Zh(s,r,a){var c=0;r&&(c|=4),Ev(a,s,c,r)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function jh(s){if(!s[Yc]){s[Yc]=!0,Ya.forEach(function(a){a!=="selectionchange"&&(vI.has(a)||Zh(a,!1,s),Zh(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Yc]||(r[Yc]=!0,Zh("selectionchange",!1,r))}}function Ev(s,r,a,c){switch(Wv(r)){case 2:var g=YI;break;case 8:g=XI;break;default:g=pp}a=g.bind(null,r,a,s),g=void 0,!wr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),c?g!==void 0?s.addEventListener(r,a,{capture:!0,passive:g}):s.addEventListener(r,a,!0):g!==void 0?s.addEventListener(r,a,{passive:g}):s.addEventListener(r,a,!1)}function ep(s,r,a,c,g){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===g)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;w!==null;){if(A=pi(w),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=_=A;continue e}w=w.parentNode}}c=c.return}As(function(){var K=_,ee=xn(a),ie=[];e:{var Y=ey.get(s);if(Y!==void 0){var j=Ei,he=s;switch(s){case"keypress":if(Rr(a)===0)break e;case"keydown":case"keyup":j=sc;break;case"focusin":he="focus",j=Nr;break;case"focusout":he="blur",j=Nr;break;case"beforeblur":case"afterblur":j=Nr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=E;break;case Wg:case Qg:case Zg:j=Qu;break;case jg:j=R;break;case"scroll":case"scrollend":j=rl;break;case"wheel":j=Q;break;case"copy":case"cut":case"paste":j=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Fi;break;case"toggle":case"beforetoggle":j=xe}var Ae=(r&4)!==0,rt=!Ae&&(s==="scroll"||s==="scrollend"),H=Ae?Y!==null?Y+"Capture":null:Y;Ae=[];for(var q=K,G;q!==null;){var te=q;if(G=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||G===null||H===null||(te=Wn(q,H),te!=null&&Ae.push(Ul(q,te,G))),rt)break;q=q.return}0<Ae.length&&(Y=new j(Y,he,null,a,ee),ie.push({event:Y,listeners:Ae}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",j=s==="mouseout"||s==="pointerout",Y&&a!==nl&&(he=a.relatedTarget||a.fromElement)&&(pi(he)||he[di]))break e;if((j||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,j?(he=a.relatedTarget||a.toElement,j=K,he=he?pi(he):null,he!==null&&(rt=l(he),Ae=he.tag,he!==rt||Ae!==5&&Ae!==27&&Ae!==6)&&(he=null)):(j=null,he=K),j!==he)){if(Ae=ol,te="onMouseLeave",H="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=Fi,te="onPointerLeave",H="onPointerEnter",q="pointer"),rt=j==null?Y:Tn(j),G=he==null?Y:Tn(he),Y=new Ae(te,q+"leave",j,a,ee),Y.target=rt,Y.relatedTarget=G,te=null,pi(ee)===K&&(Ae=new Ae(H,q+"enter",he,a,ee),Ae.target=G,Ae.relatedTarget=rt,te=Ae),rt=te,j&&he)t:{for(Ae=TI,H=j,q=he,G=0,te=H;te;te=Ae(te))G++;te=0;for(var Te=q;Te;Te=Ae(Te))te++;for(;0<G-te;)H=Ae(H),G--;for(;0<te-G;)q=Ae(q),te--;for(;G--;){if(H===q||q!==null&&H===q.alternate){Ae=H;break t}H=Ae(H),q=Ae(q)}Ae=null}else Ae=null;j!==null&&Sv(ie,Y,j,Ae,!1),he!==null&&rt!==null&&Sv(ie,rt,he,Ae,!0)}}e:{if(Y=K?Tn(K):window,j=Y.nodeName&&Y.nodeName.toLowerCase(),j==="select"||j==="input"&&Y.type==="file")var Ke=qg;else if(Lg(Y))if(zg)Ke=xw;else{Ke=Nw;var ye=bw}else j=Y.nodeName,!j||j.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&Eo(K.elementType)&&(Ke=qg):Ke=Mw;if(Ke&&(Ke=Ke(s,K))){Og(ie,Ke,a,ee);break e}ye&&ye(s,Y,K),s==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&ja(Y,"number",Y.value)}switch(ye=K?Tn(K):window,s){case"focusin":(Lg(ye)||ye.contentEditable==="true")&&(No=ye,Nd=K,fl=null);break;case"focusout":fl=Nd=No=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,Xg(ie,a,ee);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Xg(ie,a,ee)}var ke;if($e)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else bo?Mr(s,a)&&(Oe="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Ci&&a.locale!=="ko"&&(bo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&bo&&(ke=sl()):(Ti=ee,il="value"in Ti?Ti.value:Ti.textContent,bo=!0)),ye=Xc(K,Oe),0<ye.length&&(Oe=new Ai(Oe,s,null,a,ee),ie.push({event:Oe,listeners:ye}),ke?Oe.data=ke:(ke=Ro(a),ke!==null&&(Oe.data=ke)))),(ke=kn?Cw(s,a):ww(s,a))&&(Oe=Xc(K,"onBeforeInput"),0<Oe.length&&(ye=new Ai("onBeforeInput","beforeinput",null,a,ee),ie.push({event:ye,listeners:Oe}),ye.data=ke)),gI(ie,s,K,a,ee)}Tv(ie,r)})}function Ul(s,r,a){return{instance:s,listener:r,currentTarget:a}}function Xc(s,r){for(var a=r+"Capture",c=[];s!==null;){var g=s,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Wn(s,a),g!=null&&c.unshift(Ul(s,g,_)),g=Wn(s,r),g!=null&&c.push(Ul(s,g,_))),s.tag===3)return c;s=s.return}return[]}function TI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Sv(s,r,a,c,g){for(var _=r._reactName,A=[];a!==null&&a!==c;){var w=a,U=w.alternate,K=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||K===null||(U=K,g?(K=Wn(a,_),K!=null&&A.unshift(Ul(a,K,U))):g||(K=Wn(a,_),K!=null&&A.push(Ul(a,K,U)))),a=a.return}A.length!==0&&s.push({event:r,listeners:A})}var EI=/\r\n?/g,SI=/\u0000|\uFFFD/g;function Av(s){return(typeof s=="string"?s:""+s).replace(EI,`
`).replace(SI,"")}function Cv(s,r){return r=Av(r),Av(s)===r}function st(s,r,a,c,g,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||dn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&dn(s,""+c);break;case"className":En(s,"class",c);break;case"tabIndex":En(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":En(s,a,c);break;case"style":tl(s,c,_);break;case"data":if(r!=="object"){En(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=So(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&st(s,r,"name",g.name,g,null),st(s,r,"formEncType",g.formEncType,g,null),st(s,r,"formMethod",g.formMethod,g,null),st(s,r,"formTarget",g.formTarget,g,null)):(st(s,r,"encType",g.encType,g,null),st(s,r,"method",g.method,g,null),st(s,r,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=So(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=$n);break;case"onScroll":c!=null&&Ue("scroll",s);break;case"onScrollEnd":c!=null&&Ue("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=So(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Ue("beforetoggle",s),Ue("toggle",s),vo(s,"popover",c);break;case"xlinkActuate":bt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":bt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":bt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":bt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":bt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":bt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":bt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":bt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":bt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":vo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xu.get(a)||a,vo(s,a,c))}}function tp(s,r,a,c,g,_){switch(a){case"style":tl(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?dn(s,c):(typeof c=="number"||typeof c=="bigint")&&dn(s,""+c);break;case"onScroll":c!=null&&Ue("scroll",s);break;case"onScrollEnd":c!=null&&Ue("scrollend",s);break;case"onClick":c!=null&&(s.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),_=s[zt]||null,_=_!=null?_[a]:null,typeof _=="function"&&s.removeEventListener(r,_,g),typeof c=="function")){typeof _!="function"&&_!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(r,c,g);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):vo(s,a,c)}}}function Wt(s,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",s),Ue("load",s);var c=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,_,A,a,null)}}g&&st(s,r,"srcSet",a.srcSet,a,null),c&&st(s,r,"src",a.src,a,null);return;case"input":Ue("invalid",s);var w=_=A=g=null,U=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var ee=a[c];if(ee!=null)switch(c){case"name":g=ee;break;case"type":A=ee;break;case"checked":U=ee;break;case"defaultChecked":K=ee;break;case"value":_=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:st(s,r,c,ee,a,null)}}Ku(s,_,w,U,K,A,g,!1);return;case"select":Ue("invalid",s),c=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(w=a[g],w!=null))switch(g){case"value":_=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:st(s,r,g,w,a,null)}r=_,a=A,s.multiple=!!c,r!=null?vs(s,!!c,r,!1):a!=null&&vs(s,!!c,a,!0);return;case"textarea":Ue("invalid",s),_=g=c=null;for(A in a)if(a.hasOwnProperty(A)&&(w=a[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":g=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:st(s,r,A,w,a,null)}Ts(s,c,g,_);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(s,r,U,c,a,null)}return;case"dialog":Ue("beforetoggle",s),Ue("toggle",s),Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":Ue("load",s);break;case"video":case"audio":for(c=0;c<Vl.length;c++)Ue(Vl[c],s);break;case"image":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"embed":case"source":case"link":Ue("error",s),Ue("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,K,c,a,null)}return;default:if(Eo(r)){for(ee in a)a.hasOwnProperty(ee)&&(c=a[ee],c!==void 0&&tp(s,r,ee,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&st(s,r,w,c,a,null))}function AI(s,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,w=null,U=null,K=null,ee=null;for(j in a){var ie=a[j];if(a.hasOwnProperty(j)&&ie!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":U=ie;default:c.hasOwnProperty(j)||st(s,r,j,null,c,ie)}}for(var Y in c){var j=c[Y];if(ie=a[Y],c.hasOwnProperty(Y)&&(j!=null||ie!=null))switch(Y){case"type":_=j;break;case"name":g=j;break;case"checked":K=j;break;case"defaultChecked":ee=j;break;case"value":A=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:j!==ie&&st(s,r,Y,j,c,ie)}}To(s,A,w,U,K,ee,_,g);return;case"select":j=A=w=Y=null;for(_ in a)if(U=a[_],a.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":j=U;default:c.hasOwnProperty(_)||st(s,r,_,null,c,U)}for(g in c)if(_=c[g],U=a[g],c.hasOwnProperty(g)&&(_!=null||U!=null))switch(g){case"value":Y=_;break;case"defaultValue":w=_;break;case"multiple":A=_;default:_!==U&&st(s,r,g,_,c,U)}r=w,a=A,c=j,Y!=null?vs(s,!!a,Y,!1):!!c!=!!a&&(r!=null?vs(s,!!a,r,!0):vs(s,!!a,a?[]:"",!1));return;case"textarea":j=Y=null;for(w in a)if(g=a[w],a.hasOwnProperty(w)&&g!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(s,r,w,null,c,g)}for(A in c)if(g=c[A],_=a[A],c.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":Y=g;break;case"defaultValue":j=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==_&&st(s,r,A,g,c,_)}Ju(s,Y,j);return;case"option":for(var he in a)if(Y=a[he],a.hasOwnProperty(he)&&Y!=null&&!c.hasOwnProperty(he))switch(he){case"selected":s.selected=!1;break;default:st(s,r,he,null,c,Y)}for(U in c)if(Y=c[U],j=a[U],c.hasOwnProperty(U)&&Y!==j&&(Y!=null||j!=null))switch(U){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:st(s,r,U,Y,c,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)Y=a[Ae],a.hasOwnProperty(Ae)&&Y!=null&&!c.hasOwnProperty(Ae)&&st(s,r,Ae,null,c,Y);for(K in c)if(Y=c[K],j=a[K],c.hasOwnProperty(K)&&Y!==j&&(Y!=null||j!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:st(s,r,K,Y,c,j)}return;default:if(Eo(r)){for(var rt in a)Y=a[rt],a.hasOwnProperty(rt)&&Y!==void 0&&!c.hasOwnProperty(rt)&&tp(s,r,rt,void 0,c,Y);for(ee in c)Y=c[ee],j=a[ee],!c.hasOwnProperty(ee)||Y===j||Y===void 0&&j===void 0||tp(s,r,ee,Y,c,j);return}}for(var H in a)Y=a[H],a.hasOwnProperty(H)&&Y!=null&&!c.hasOwnProperty(H)&&st(s,r,H,null,c,Y);for(ie in c)Y=c[ie],j=a[ie],!c.hasOwnProperty(ie)||Y===j||Y==null&&j==null||st(s,r,ie,Y,c,j)}function wv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var g=a[c],_=g.transferSize,A=g.initiatorType,w=g.duration;if(_&&w&&wv(A)){for(A=0,w=g.responseEnd,c+=1;c<a.length;c++){var U=a[c],K=U.startTime;if(K>w)break;var ee=U.transferSize,ie=U.initiatorType;ee&&wv(ie)&&(U=U.responseEnd,A+=ee*(U<w?1:(w-K)/(U-K)))}if(--c,r+=8*(_+A)/(g.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var np=null,ip=null;function $c(s){return s.nodeType===9?s:s.ownerDocument}function Iv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function sp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rp=null;function wI(){var s=window.event;return s&&s.type==="popstate"?s===rp?!1:(rp=s,!0):(rp=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,II=typeof clearTimeout=="function"?clearTimeout:void 0,Nv=typeof Promise=="function"?Promise:void 0,RI=typeof queueMicrotask=="function"?queueMicrotask:typeof Nv<"u"?function(s){return Nv.resolve(null).then(s).catch(bI)}:bv;function bI(s){setTimeout(function(){throw s})}function Fs(s){return s==="head"}function Mv(s,r){var a=r,c=0;do{var g=a.nextSibling;if(s.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(g),na(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Ll(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Ll(a);for(var _=a.firstChild;_;){var A=_.nextSibling,w=_.nodeName;_[hi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&Ll(s.ownerDocument.body);a=g}while(a);na(r)}function xv(s,r){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function op(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":op(a),_o(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function NI(s,r,a,c){for(;s.nodeType===1;){var g=a;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[hi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=zn(s.nextSibling),s===null)break}return null}function MI(s,r,a){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=zn(s.nextSibling),s===null))return null;return s}function Dv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=zn(s.nextSibling),s===null))return null;return s}function ap(s){return s.data==="$?"||s.data==="$~"}function lp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function xI(s,r){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function zn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var up=null;function kv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(r===0)return zn(s.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}s=s.nextSibling}return null}function Pv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return s;r--}else a!=="/$"&&a!=="/&"||r++}s=s.previousSibling}return null}function Vv(s,r,a){switch(r=$c(a),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ll(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);_o(s)}var Bn=new Map,Uv=new Set;function Wc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ss=oe.d;oe.d={f:DI,r:kI,D:PI,C:VI,L:UI,m:LI,X:qI,S:OI,M:zI};function DI(){var s=ss.f(),r=Bc();return s||r}function kI(s){var r=Mn(s);r!==null&&r.tag===5&&r.type==="form"?jy(r):ss.r(s)}var jo=typeof document>"u"?null:document;function Lv(s,r,a){var c=jo;if(c&&typeof r=="string"&&r){var g=fn(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Uv.has(g)||(Uv.add(g),s={rel:s,crossOrigin:a,href:r},c.querySelector(g)===null&&(r=c.createElement("link"),Wt(r,"link",s),Rt(r),c.head.appendChild(r)))}}function PI(s){ss.D(s),Lv("dns-prefetch",s,null)}function VI(s,r){ss.C(s,r),Lv("preconnect",s,r)}function UI(s,r,a){ss.L(s,r,a);var c=jo;if(c&&s&&r){var g='link[rel="preload"][as="'+fn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+fn(a.imageSizes)+'"]')):g+='[href="'+fn(s)+'"]';var _=g;switch(r){case"style":_=ea(s);break;case"script":_=ta(s)}Bn.has(_)||(s=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:s,as:r},a),Bn.set(_,s),c.querySelector(g)!==null||r==="style"&&c.querySelector(Ol(_))||r==="script"&&c.querySelector(ql(_))||(r=c.createElement("link"),Wt(r,"link",s),Rt(r),c.head.appendChild(r)))}}function LI(s,r){ss.m(s,r);var a=jo;if(a&&s){var c=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+fn(c)+'"][href="'+fn(s)+'"]',_=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ta(s)}if(!Bn.has(_)&&(s=T({rel:"modulepreload",href:s},r),Bn.set(_,s),a.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ql(_)))return}c=a.createElement("link"),Wt(c,"link",s),Rt(c),a.head.appendChild(c)}}}function OI(s,r,a){ss.S(s,r,a);var c=jo;if(c&&s){var g=mi(c).hoistableStyles,_=ea(s);r=r||"default";var A=g.get(_);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(Ol(_)))w.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},a),(a=Bn.get(_))&&cp(s,a);var U=A=c.createElement("link");Rt(U),Wt(U,"link",s),U._p=new Promise(function(K,ee){U.onload=K,U.onerror=ee}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Qc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:w},g.set(_,A)}}}function qI(s,r){ss.X(s,r);var a=jo;if(a&&s){var c=mi(a).hoistableScripts,g=ta(s),_=c.get(g);_||(_=a.querySelector(ql(g)),_||(s=T({src:s,async:!0},r),(r=Bn.get(g))&&fp(s,r),_=a.createElement("script"),Rt(_),Wt(_,"link",s),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(g,_))}}function zI(s,r){ss.M(s,r);var a=jo;if(a&&s){var c=mi(a).hoistableScripts,g=ta(s),_=c.get(g);_||(_=a.querySelector(ql(g)),_||(s=T({src:s,async:!0,type:"module"},r),(r=Bn.get(g))&&fp(s,r),_=a.createElement("script"),Rt(_),Wt(_,"link",s),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(g,_))}}function Ov(s,r,a,c){var g=(g=be.current)?Wc(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ea(a.href),a=mi(g).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=ea(a.href);var _=mi(g).hoistableStyles,A=_.get(s);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=g.querySelector(Ol(s)))&&!_._p&&(A.instance=_,A.state.loading=5),Bn.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(s,a),_||BI(g,s,a,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ta(a),a=mi(g).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ea(s){return'href="'+fn(s)+'"'}function Ol(s){return'link[rel="stylesheet"]['+s+"]"}function qv(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function BI(s,r,a,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Wt(r,"link",a),Rt(r),s.head.appendChild(r))}function ta(s){return'[src="'+fn(s)+'"]'}function ql(s){return"script[async]"+s}function zv(s,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+fn(a.href)+'"]');if(c)return r.instance=c,Rt(c),c;var g=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Rt(c),Wt(c,"style",g),Qc(c,a.precedence,s),r.instance=c;case"stylesheet":g=ea(a.href);var _=s.querySelector(Ol(g));if(_)return r.state.loading|=4,r.instance=_,Rt(_),_;c=qv(a),(g=Bn.get(g))&&cp(c,g),_=(s.ownerDocument||s).createElement("link"),Rt(_);var A=_;return A._p=new Promise(function(w,U){A.onload=w,A.onerror=U}),Wt(_,"link",c),r.state.loading|=4,Qc(_,a.precedence,s),r.instance=_;case"script":return _=ta(a.src),(g=s.querySelector(ql(_)))?(r.instance=g,Rt(g),g):(c=a,(g=Bn.get(_))&&(c=T({},a),fp(c,g)),s=s.ownerDocument||s,g=s.createElement("script"),Rt(g),Wt(g,"link",c),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Qc(c,a.precedence,s));return r.instance}function Qc(s,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,_=g,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===r)_=w;else if(_!==g)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(s,r.firstChild))}function cp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function fp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Zc=null;function Bv(s,r,a){if(Zc===null){var c=new Map,g=Zc=new Map;g.set(a,c)}else g=Zc,c=g.get(a),c||(c=new Map,g.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),g=0;g<a.length;g++){var _=a[g];if(!(_[hi]||_[It]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var w=c.get(A);w?w.push(_):c.set(A,[_])}}return c}function Hv(s,r,a){s=s.ownerDocument||s,s.head.insertBefore(a,r==="title"?s.querySelector("head > title"):null)}function HI(s,r,a){if(a===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Fv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function FI(s,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=ea(c.href),_=r.querySelector(Ol(g));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=jc.bind(s),r.then(s,s)),a.state.loading|=4,a.instance=_,Rt(_);return}_=r.ownerDocument||r,c=qv(c),(g=Bn.get(g))&&cp(c,g),_=_.createElement("link"),Rt(_);var A=_;A._p=new Promise(function(w,U){A.onload=w,A.onerror=U}),Wt(_,"link",c),a.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=jc.bind(s),r.addEventListener("load",a),r.addEventListener("error",a))}}var dp=0;function GI(s,r){return s.stylesheets&&s.count===0&&tf(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&dp===0&&(dp=62500*CI());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>dp?50:800)+r);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ef=null;function tf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ef=new Map,r.forEach(KI,s),ef=null,jc.call(s))}function KI(s,r){if(!(r.state.loading&4)){var a=ef.get(s);if(a)var c=a.get(null);else{a=new Map,ef.set(s,a);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}g=r.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,g),a.set(A,g),this.count++,c=jc.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),_?_.parentNode.insertBefore(g,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var zl={$$typeof:J,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function JI(s,r,a,c,g,_,A,w,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Gv(s,r,a,c,g,_,A,w,U,K,ee,ie){return s=new JI(s,r,a,A,U,K,ee,ie,w),r=1,_===!0&&(r|=24),_=An(3,null,null,r),s.current=_,_.stateNode=s,r=Kd(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},$d(_),s}function Kv(s){return s?(s=Do,s):Do}function Jv(s,r,a,c,g,_){g=Kv(g),c.context===null?c.context=g:c.pendingContext=g,c=Ds(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=ks(s,c,r),a!==null&&(yn(a,s,r),_l(a,s,r))}function Yv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function hp(s,r){Yv(s,r),(s=s.alternate)&&Yv(s,r)}function Xv(s){if(s.tag===13||s.tag===31){var r=kr(s,67108864);r!==null&&yn(r,s,67108864),hp(s,67108864)}}function $v(s){if(s.tag===13||s.tag===31){var r=bn();r=Er(r);var a=kr(s,r);a!==null&&yn(a,s,r),hp(s,r)}}var nf=!0;function YI(s,r,a,c){var g=X.T;X.T=null;var _=oe.p;try{oe.p=2,pp(s,r,a,c)}finally{oe.p=_,X.T=g}}function XI(s,r,a,c){var g=X.T;X.T=null;var _=oe.p;try{oe.p=8,pp(s,r,a,c)}finally{oe.p=_,X.T=g}}function pp(s,r,a,c){if(nf){var g=mp(c);if(g===null)ep(s,r,c,sf,a),Qv(s,c);else if(WI(g,s,r,a,c))c.stopPropagation();else if(Qv(s,c),r&4&&-1<$I.indexOf(s)){for(;g!==null;){var _=Mn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ui(_.pendingLanes);if(A!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var U=1<<31-_t(A);w.entanglements[1]|=U,A&=~U}bi(_),(We&6)===0&&(qc=an()+500,Pl(0))}}break;case 31:case 13:w=kr(_,2),w!==null&&yn(w,_,2),Bc(),hp(_,2)}if(_=mp(c),_===null&&ep(s,r,c,sf,a),_===g)break;g=_}g!==null&&c.stopPropagation()}else ep(s,r,c,null,a)}}function mp(s){return s=xn(s),gp(s)}var sf=null;function gp(s){if(sf=null,s=pi(s),s!==null){var r=l(s);if(r===null)s=null;else{var a=r.tag;if(a===13){if(s=u(r),s!==null)return s;s=null}else if(a===31){if(s=f(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return sf=s,null}function Wv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yr()){case Fa:return 2;case Ga:return 8;case ys:case Sd:return 32;case Vu:return 268435456;default:return 32}default:return 32}}var yp=!1,Gs=null,Ks=null,Js=null,Bl=new Map,Hl=new Map,Ys=[],$I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(s,r){switch(s){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":Bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(r.pointerId)}}function Fl(s,r,a,c,g,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[g]},r!==null&&(r=Mn(r),r!==null&&Xv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function WI(s,r,a,c,g){switch(r){case"focusin":return Gs=Fl(Gs,s,r,a,c,g),!0;case"dragenter":return Ks=Fl(Ks,s,r,a,c,g),!0;case"mouseover":return Js=Fl(Js,s,r,a,c,g),!0;case"pointerover":var _=g.pointerId;return Bl.set(_,Fl(Bl.get(_)||null,s,r,a,c,g)),!0;case"gotpointercapture":return _=g.pointerId,Hl.set(_,Fl(Hl.get(_)||null,s,r,a,c,g)),!0}return!1}function Zv(s){var r=pi(s.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){s.blockedOn=r,Yn(s.priority,function(){$v(a)});return}}else if(r===31){if(r=f(a),r!==null){s.blockedOn=r,Yn(s.priority,function(){$v(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=mp(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);nl=c,a.target.dispatchEvent(c),nl=null}else return r=Mn(a),r!==null&&Xv(r),s.blockedOn=a,!1;r.shift()}return!0}function jv(s,r,a){rf(s)&&a.delete(r)}function QI(){yp=!1,Gs!==null&&rf(Gs)&&(Gs=null),Ks!==null&&rf(Ks)&&(Ks=null),Js!==null&&rf(Js)&&(Js=null),Bl.forEach(jv),Hl.forEach(jv)}function of(s,r){s.blockedOn===r&&(s.blockedOn=null,yp||(yp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,QI)))}var af=null;function eT(s){af!==s&&(af=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){af===s&&(af=null);for(var r=0;r<s.length;r+=3){var a=s[r],c=s[r+1],g=s[r+2];if(typeof c!="function"){if(gp(c||a)===null)continue;break}var _=Mn(a);_!==null&&(s.splice(r,3),r-=3,mh(_,{pending:!0,data:g,method:a.method,action:c},c,g))}}))}function na(s){function r(U){return of(U,s)}Gs!==null&&of(Gs,s),Ks!==null&&of(Ks,s),Js!==null&&of(Js,s),Bl.forEach(r),Hl.forEach(r);for(var a=0;a<Ys.length;a++){var c=Ys[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Ys.length&&(a=Ys[0],a.blockedOn===null);)Zv(a),a.blockedOn===null&&Ys.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var g=a[c],_=a[c+1],A=g[zt]||null;if(typeof _=="function")A||eT(a);else if(A){var w=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[zt]||null)w=A.formAction;else if(gp(g)!==null)continue}else w=A.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),eT(a)}}}function tT(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function _p(s){this._internalRoot=s}lf.prototype.render=_p.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,c=bn();Jv(a,c,s,r,null,null)},lf.prototype.unmount=_p.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Jv(s.current,2,null,s,null,null),Bc(),r[di]=null}};function lf(s){this._internalRoot=s}lf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Bu();s={blockedOn:null,target:s,priority:r};for(var a=0;a<Ys.length&&r!==0&&r<Ys[a].priority;a++);Ys.splice(a,0,s),a===0&&Zv(s)}};var nT=e.version;if(nT!=="19.2.0")throw Error(i(527,nT,"19.2.0"));oe.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var ZI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{Kn=uf.inject(ZI),Kt=uf}catch{}}return Kl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var a=!1,c="",g=u_,_=c_,A=f_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Gv(s,1,!1,null,null,a,c,null,g,_,A,tT),s[di]=r.current,jh(s),new _p(r)},Kl.hydrateRoot=function(s,r,a){if(!o(s))throw Error(i(299));var c=!1,g="",_=u_,A=c_,w=f_,U=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=Gv(s,1,!0,r,a??null,c,g,U,_,A,w,tT),r.context=Kv(null),a=r.current,c=bn(),c=Er(c),g=Ds(c),g.callback=null,ks(a,g,c),a=c,r.current.lanes=a,vr(r,a),bi(r),s[di]=r.current,jh(s),new lf(r)},Kl.version="19.2.0",Kl}var dT;function lR(){if(dT)return Ep.exports;dT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ep.exports=aR(),Ep.exports}var uR=lR();const cR=pS(uR);var Yp=function(n,e){return Yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},Yp(n,e)};function fR(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ft=function(){return Ft=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Ft.apply(this,arguments)};function hT(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function ia(n,e,t,i){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(v){try{h(i.next(v))}catch(T){u(T)}}function m(v){try{h(i.throw(v))}catch(T){u(T)}}function h(v){v.done?l(v.value):o(v.value).then(f,m)}h((i=i.apply(n,e||[])).next())})}function sa(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(v){return m([h,v])}}function m(h){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(t=0)),t;)try{if(i=1,o&&(l=h[0]&2?o.return:h[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,h[1])).done)return l;switch(o=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,o=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){t.label=h[1];break}if(h[0]===6&&t.label<l[1]){t.label=l[1],l=h;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(h);break}l[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(v){h=[6,v],o=0}finally{i=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function dR(n,e,t){for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))}function Mi(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]])}return t}var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Dm(n,e){return n(e={exports:{}},e.exports),e.exports}var Yr=Dm((function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function i(){var o=this;this.locked=new Map,this.addToLocked=function(l,u){var f=o.locked.get(l);f===void 0?u===void 0?o.locked.set(l,[]):o.locked.set(l,[u]):u!==void 0&&(f.unshift(u),o.locked.set(l,f))},this.isLocked=function(l){return o.locked.has(l)},this.lock=function(l){return new Promise((function(u,f){o.isLocked(l)?o.addToLocked(l,u):(o.addToLocked(l),u())}))},this.unlock=function(l){var u=o.locked.get(l);if(u!==void 0&&u.length!==0){var f=u.pop();o.locked.set(l,u),f!==void 0&&setTimeout(f,0)}else o.locked.delete(l)}}return i.getInstance=function(){return i.instance===void 0&&(i.instance=new i),i.instance},i})();e.default=function(){return t.getInstance()}}));xm(Yr);var hR=xm(Dm((function(n,e){var t=$r&&$r.__awaiter||function(v,T,S,I){return new(S||(S=Promise))((function(k,O){function z(J){try{$(I.next(J))}catch(Z){O(Z)}}function W(J){try{$(I.throw(J))}catch(Z){O(Z)}}function $(J){J.done?k(J.value):new S((function(Z){Z(J.value)})).then(z,W)}$((I=I.apply(v,T||[])).next())}))},i=$r&&$r.__generator||function(v,T){var S,I,k,O,z={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return O={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function W($){return function(J){return(function(Z){if(S)throw new TypeError("Generator is already executing.");for(;z;)try{if(S=1,I&&(k=2&Z[0]?I.return:Z[0]?I.throw||((k=I.return)&&k.call(I),0):I.next)&&!(k=k.call(I,Z[1])).done)return k;switch(I=0,k&&(Z=[2&Z[0],k.value]),Z[0]){case 0:case 1:k=Z;break;case 4:return z.label++,{value:Z[1],done:!1};case 5:z.label++,I=Z[1],Z=[0];continue;case 7:Z=z.ops.pop(),z.trys.pop();continue;default:if(k=z.trys,!((k=k.length>0&&k[k.length-1])||Z[0]!==6&&Z[0]!==2)){z=0;continue}if(Z[0]===3&&(!k||Z[1]>k[0]&&Z[1]<k[3])){z.label=Z[1];break}if(Z[0]===6&&z.label<k[1]){z.label=k[1],k=Z;break}if(k&&z.label<k[2]){z.label=k[2],z.ops.push(Z);break}k[2]&&z.ops.pop(),z.trys.pop();continue}Z=T.call(v,z)}catch(ue){Z=[6,ue],I=0}finally{S=k=0}if(5&Z[0])throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}})([$,J])}}},o=$r;Object.defineProperty(e,"__esModule",{value:!0});var l="browser-tabs-lock-key",u={key:function(v){return t(o,void 0,void 0,(function(){return i(this,(function(T){throw new Error("Unsupported")}))}))},getItem:function(v){return t(o,void 0,void 0,(function(){return i(this,(function(T){throw new Error("Unsupported")}))}))},clear:function(){return t(o,void 0,void 0,(function(){return i(this,(function(v){return[2,window.localStorage.clear()]}))}))},removeItem:function(v){return t(o,void 0,void 0,(function(){return i(this,(function(T){throw new Error("Unsupported")}))}))},setItem:function(v,T){return t(o,void 0,void 0,(function(){return i(this,(function(S){throw new Error("Unsupported")}))}))},keySync:function(v){return window.localStorage.key(v)},getItemSync:function(v){return window.localStorage.getItem(v)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(v){return window.localStorage.removeItem(v)},setItemSync:function(v,T){return window.localStorage.setItem(v,T)}};function f(v){return new Promise((function(T){return setTimeout(T,v)}))}function m(v){for(var T="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",S="",I=0;I<v;I++)S+=T[Math.floor(Math.random()*T.length)];return S}var h=(function(){function v(T){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+m(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=T,v.waiters===void 0&&(v.waiters=[])}return v.prototype.acquireLock=function(T,S){return S===void 0&&(S=5e3),t(this,void 0,void 0,(function(){var I,k,O,z,W,$,J;return i(this,(function(Z){switch(Z.label){case 0:I=Date.now()+m(4),k=Date.now()+S,O=l+"-"+T,z=this.storageHandler===void 0?u:this.storageHandler,Z.label=1;case 1:return Date.now()<k?[4,f(30)]:[3,8];case 2:return Z.sent(),z.getItemSync(O)!==null?[3,5]:(W=this.id+"-"+T+"-"+I,[4,f(Math.floor(25*Math.random()))]);case 3:return Z.sent(),z.setItemSync(O,JSON.stringify({id:this.id,iat:I,timeoutKey:W,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,f(30)];case 4:return Z.sent(),($=z.getItemSync(O))!==null&&(J=JSON.parse($)).id===this.id&&J.iat===I?(this.acquiredIatSet.add(I),this.refreshLockWhileAcquired(O,I),[2,!0]):[3,7];case 5:return v.lockCorrector(this.storageHandler===void 0?u:this.storageHandler),[4,this.waitForSomethingToChange(k)];case 6:Z.sent(),Z.label=7;case 7:return I=Date.now()+m(4),[3,1];case 8:return[2,!1]}}))}))},v.prototype.refreshLockWhileAcquired=function(T,S){return t(this,void 0,void 0,(function(){var I=this;return i(this,(function(k){return setTimeout((function(){return t(I,void 0,void 0,(function(){var O,z,W;return i(this,(function($){switch($.label){case 0:return[4,Yr.default().lock(S)];case 1:return $.sent(),this.acquiredIatSet.has(S)?(O=this.storageHandler===void 0?u:this.storageHandler,(z=O.getItemSync(T))===null?(Yr.default().unlock(S),[2]):((W=JSON.parse(z)).timeRefreshed=Date.now(),O.setItemSync(T,JSON.stringify(W)),Yr.default().unlock(S),this.refreshLockWhileAcquired(T,S),[2])):(Yr.default().unlock(S),[2])}}))}))}),1e3),[2]}))}))},v.prototype.waitForSomethingToChange=function(T){return t(this,void 0,void 0,(function(){return i(this,(function(S){switch(S.label){case 0:return[4,new Promise((function(I){var k=!1,O=Date.now(),z=!1;function W(){if(z||(window.removeEventListener("storage",W),v.removeFromWaiting(W),clearTimeout($),z=!0),!k){k=!0;var J=50-(Date.now()-O);J>0?setTimeout(I,J):I(null)}}window.addEventListener("storage",W),v.addToWaiting(W);var $=setTimeout(W,Math.max(0,T-Date.now()))}))];case 1:return S.sent(),[2]}}))}))},v.addToWaiting=function(T){this.removeFromWaiting(T),v.waiters!==void 0&&v.waiters.push(T)},v.removeFromWaiting=function(T){v.waiters!==void 0&&(v.waiters=v.waiters.filter((function(S){return S!==T})))},v.notifyWaiters=function(){v.waiters!==void 0&&v.waiters.slice().forEach((function(T){return T()}))},v.prototype.releaseLock=function(T){return t(this,void 0,void 0,(function(){return i(this,(function(S){switch(S.label){case 0:return[4,this.releaseLock__private__(T)];case 1:return[2,S.sent()]}}))}))},v.prototype.releaseLock__private__=function(T){return t(this,void 0,void 0,(function(){var S,I,k,O;return i(this,(function(z){switch(z.label){case 0:return S=this.storageHandler===void 0?u:this.storageHandler,I=l+"-"+T,(k=S.getItemSync(I))===null?[2]:(O=JSON.parse(k)).id!==this.id?[3,2]:[4,Yr.default().lock(O.iat)];case 1:z.sent(),this.acquiredIatSet.delete(O.iat),S.removeItemSync(I),Yr.default().unlock(O.iat),v.notifyWaiters(),z.label=2;case 2:return[2]}}))}))},v.lockCorrector=function(T){for(var S=Date.now()-5e3,I=T,k=[],O=0;;){var z=I.keySync(O);if(z===null)break;k.push(z),O++}for(var W=!1,$=0;$<k.length;$++){var J=k[$];if(J.includes(l)){var Z=I.getItemSync(J);if(Z!==null){var ue=JSON.parse(Z);(ue.timeRefreshed===void 0&&ue.timeAcquired<S||ue.timeRefreshed!==void 0&&ue.timeRefreshed<S)&&(I.removeItemSync(J),W=!0)}}}W&&v.notifyWaiters()},v.waiters=void 0,v})();e.default=h})));const pR={timeoutInSeconds:60},gS={name:"auth0-spa-js",version:"2.7.0"},yS=()=>Date.now();class St extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,St.prototype)}static fromPayload({error:e,error_description:t}){return new St(e,t)}}class km extends St{constructor(e,t,i,o=null){super(e,t),this.state=i,this.appState=o,Object.setPrototypeOf(this,km.prototype)}}class Pm extends St{constructor(e,t,i,o,l=null){super(e,t),this.connection=i,this.state=o,this.appState=l,Object.setPrototypeOf(this,Pm.prototype)}}class cu extends St{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,cu.prototype)}}class Vm extends cu{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,Vm.prototype)}}class Um extends St{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,Um.prototype)}}class Lm extends St{constructor(e,t,i){super(e,t),this.mfa_token=i,Object.setPrototypeOf(this,Lm.prototype)}}class jf extends St{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${bf(e,["default"])}', scope: '${bf(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,jf.prototype)}}class Om extends St{constructor(e,t){super("missing_scopes",`Missing requested scopes after refresh (audience: '${bf(e,["default"])}', missing scope: '${bf(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,Om.prototype)}}class ed extends St{constructor(e){super("use_dpop_nonce","Server rejected DPoP proof: wrong nonce"),this.newDpopNonce=e,Object.setPrototypeOf(this,ed.prototype)}}function bf(n,e=[]){return n&&!e.includes(n)?n:""}const Nf=()=>window.crypto,Jl=()=>{const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(Nf().getRandomValues(new Uint8Array(43))).forEach((t=>e+=n[t%n.length])),e},wp=n=>btoa(n),Xp=n=>{var{clientId:e}=n,t=Mi(n,["clientId"]);return new URLSearchParams((i=>Object.keys(i).filter((o=>i[o]!==void 0)).reduce(((o,l)=>Object.assign(Object.assign({},o),{[l]:i[l]})),{}))(Object.assign({client_id:e},t))).toString()},pT=async n=>await Nf().subtle.digest({name:"SHA-256"},new TextEncoder().encode(n)),mT=n=>(e=>decodeURIComponent(atob(e).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))(n.replace(/_/g,"/").replace(/-/g,"+")),gT=n=>{const e=new Uint8Array(n);return(t=>{const i={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,(o=>i[o]))})(window.btoa(String.fromCharCode(...Array.from(e))))},mR=new TextEncoder,gR=new TextDecoder;function eu(n){return typeof n=="string"?mR.encode(n):gR.decode(n)}function yT(n){if(typeof n.modulusLength!="number"||n.modulusLength<2048)throw new _R(`${n.name} modulusLength must be at least 2048 bits`)}async function yR(n,e,t){if(t.usages.includes("sign")===!1)throw new TypeError('private CryptoKey instances used for signing assertions must include "sign" in their "usages"');const i=`${tu(eu(JSON.stringify(n)))}.${tu(eu(JSON.stringify(e)))}`;return`${i}.${tu(await crypto.subtle.sign((function(o){switch(o.algorithm.name){case"ECDSA":return{name:o.algorithm.name,hash:"SHA-256"};case"RSA-PSS":return yT(o.algorithm),{name:o.algorithm.name,saltLength:32};case"RSASSA-PKCS1-v1_5":return yT(o.algorithm),{name:o.algorithm.name};case"Ed25519":return{name:o.algorithm.name}}throw new Wr})(t),t,eu(i)))}`}let $p;Uint8Array.prototype.toBase64?$p=n=>(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),n.toBase64({alphabet:"base64url",omitPadding:!0})):$p=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=[];for(let i=0;i<e.byteLength;i+=32768)t.push(String.fromCharCode.apply(null,e.subarray(i,i+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};function tu(n){return $p(n)}let Wr=class extends Error{constructor(e){var t;super(e??"operation not supported"),this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}};class _R extends Error{constructor(e){var t;super(e),this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}function vR(n){switch(n.algorithm.name){case"RSA-PSS":return(function(e){if(e.algorithm.hash.name==="SHA-256")return"PS256";throw new Wr("unsupported RsaHashedKeyAlgorithm hash name")})(n);case"RSASSA-PKCS1-v1_5":return(function(e){if(e.algorithm.hash.name==="SHA-256")return"RS256";throw new Wr("unsupported RsaHashedKeyAlgorithm hash name")})(n);case"ECDSA":return(function(e){if(e.algorithm.namedCurve==="P-256")return"ES256";throw new Wr("unsupported EcKeyAlgorithm namedCurve")})(n);case"Ed25519":return"Ed25519";default:throw new Wr("unsupported CryptoKey algorithm name")}}function _S(n){return n instanceof CryptoKey}function vS(n){return _S(n)&&n.type==="public"}async function TR(n,e,t,i,o,l){const u=n==null?void 0:n.privateKey,f=n==null?void 0:n.publicKey;if(!_S(m=u)||m.type!=="private")throw new TypeError('"keypair.privateKey" must be a private CryptoKey');var m;if(!vS(f))throw new TypeError('"keypair.publicKey" must be a public CryptoKey');if(f.extractable!==!0)throw new TypeError('"keypair.publicKey.extractable" must be true');if(typeof e!="string")throw new TypeError('"htu" must be a string');if(typeof t!="string")throw new TypeError('"htm" must be a string');if(i!==void 0&&typeof i!="string")throw new TypeError('"nonce" must be a string or undefined');if(o!==void 0&&typeof o!="string")throw new TypeError('"accessToken" must be a string or undefined');return yR({alg:vR(u),typ:"dpop+jwt",jwk:await TS(f)},Object.assign(Object.assign({},l),{iat:Math.floor(Date.now()/1e3),jti:crypto.randomUUID(),htm:t,nonce:i,htu:e,ath:o?tu(await crypto.subtle.digest("SHA-256",eu(o))):void 0}),u)}async function TS(n){const{kty:e,e:t,n:i,x:o,y:l,crv:u}=await crypto.subtle.exportKey("jwk",n);return{kty:e,crv:u,e:t,n:i,x:o,y:l}}const ER=["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:token-exchange"];function SR(){return(async function(n,e){var t;let i;if(n.length===0)throw new TypeError('"alg" must be a non-empty string');switch(n){case"PS256":i={name:"RSA-PSS",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])};break;case"RS256":i={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])};break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"};break;case"Ed25519":i={name:"Ed25519"};break;default:throw new Wr}return crypto.subtle.generateKey(i,(t=e==null?void 0:e.extractable)!==null&&t!==void 0&&t,["sign","verify"])})("ES256",{extractable:!1})}function AR(n){return(async function(e){if(!vS(e))throw new TypeError('"publicKey" must be a public CryptoKey');if(e.extractable!==!0)throw new TypeError('"publicKey.extractable" must be true');const t=await TS(e);let i;switch(t.kty){case"EC":i={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":i={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":i={e:t.e,kty:t.kty,n:t.n};break;default:throw new Wr("unsupported JWK kty")}return tu(await crypto.subtle.digest({name:"SHA-256"},eu(JSON.stringify(i))))})(n.publicKey)}function CR({keyPair:n,url:e,method:t,nonce:i,accessToken:o}){const l=(function(u){const f=new URL(u);return f.search="",f.hash="",f.href})(e);return TR(n,l,t,i,o)}const wR=async(n,e)=>{const t=await fetch(n,e);return{ok:t.ok,json:await t.json(),headers:(i=t.headers,[...i].reduce(((o,[l,u])=>(o[l]=u,o)),{}))};var i},IR=async(n,e,t)=>{const i=new AbortController;let o;return e.signal=i.signal,Promise.race([wR(n,e),new Promise(((l,u)=>{o=setTimeout((()=>{i.abort(),u(new Error("Timeout when executing 'fetch'"))}),t)}))]).finally((()=>{clearTimeout(o)}))},RR=async(n,e,t,i,o,l,u,f)=>{return m={auth:{audience:e,scope:t},timeout:o,fetchUrl:n,fetchOptions:i,useFormData:u,useMrrt:f},h=l,new Promise((function(v,T){const S=new MessageChannel;S.port1.onmessage=function(I){I.data.error?T(new Error(I.data.error)):v(I.data),S.port1.close()},h.postMessage(m,[S.port2])}));var m,h},bR=async(n,e,t,i,o,l,u=1e4,f)=>o?RR(n,e,t,i,u,o,l,f):IR(n,i,u);async function ES(n,e,t,i,o,l,u,f,m,h){if(m){const J=await m.generateProof({url:n,method:o.method||"GET",nonce:await m.getNonce()});o.headers=Object.assign(Object.assign({},o.headers),{dpop:J})}let v,T=null;for(let J=0;J<3;J++)try{v=await bR(n,t,i,o,l,u,e,f),T=null;break}catch(Z){T=Z}if(T)throw T;const S=v.json,{error:I,error_description:k}=S,O=Mi(S,["error","error_description"]),{headers:z,ok:W}=v;let $;if(m&&($=z["dpop-nonce"],$&&await m.setNonce($)),!W){const J=k||`HTTP error. Unable to fetch ${n}`;if(I==="mfa_required")throw new Lm(I,J,O.mfa_token);if(I==="missing_refresh_token")throw new jf(t,i);if(I==="use_dpop_nonce"){if(!m||!$||h)throw new ed($);return ES(n,e,t,i,o,l,u,f,m,!0)}throw new St(I||"request_error",J)}return O}async function NR(n,e){var{baseUrl:t,timeout:i,audience:o,scope:l,auth0Client:u,useFormData:f,useMrrt:m,dpop:h}=n,v=Mi(n,["baseUrl","timeout","audience","scope","auth0Client","useFormData","useMrrt","dpop"]);const T=v.grant_type==="urn:ietf:params:oauth:grant-type:token-exchange",S=v.grant_type==="refresh_token"&&m,I=Object.assign(Object.assign(Object.assign(Object.assign({},v),T&&o&&{audience:o}),T&&l&&{scope:l}),S&&{audience:o,scope:l}),k=f?Xp(I):JSON.stringify(I),O=(z=v.grant_type,ER.includes(z));var z;return await ES(`${t}/oauth/token`,i,o||"default",l,{method:"POST",body:k,headers:{"Content-Type":f?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(u||gS))}},e,f,m,O?h:void 0)}const Yl=(...n)=>{return(e=n.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};let er=class Wp{constructor(e,t="@@auth0spajs@@",i){this.prefix=t,this.suffix=i,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[t,i,o,l]=e.split("::");return new Wp({clientId:i,scope:l,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:i,client_id:o}=e;return new Wp({scope:t,audience:i,clientId:o})}},MR=class{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter((e=>e.startsWith("@@auth0spajs@@")))}};class SS{constructor(){this.enclosedCache=(function(){let e={};return{set(t,i){e[t]=i},get(t){const i=e[t];if(i)return i},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}})()}}class xR{constructor(e,t,i){this.cache=e,this.keyManifest=t,this.nowProvider=i||yS}async setIdToken(e,t,i){var o;const l=this.getIdTokenCacheKey(e);await this.cache.set(l,{id_token:t,decodedToken:i}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(l))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const i=await this.get(e);return!i||!i.id_token||!i.decodedToken?void 0:{id_token:i.id_token,decodedToken:i.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0,i=!1,o){var l;let u=await this.cache.get(e.toKey());if(!u){const h=await this.getCacheKeys();if(!h)return;const v=this.matchExistingCacheKey(e,h);if(v&&(u=await this.cache.get(v)),!v&&i&&o!=="cache-only")return this.getEntryWithRefreshToken(e,h)}if(!u)return;const f=await this.nowProvider(),m=Math.floor(f/1e3);return u.expiresAt-t<m?u.body.refresh_token?this.modifiedCachedEntry(u,e):(await this.cache.remove(e.toKey()),void await((l=this.keyManifest)===null||l===void 0?void 0:l.remove(e.toKey()))):u.body}async modifiedCachedEntry(e,t){return e.body={refresh_token:e.body.refresh_token,audience:e.body.audience,scope:e.body.scope},await this.cache.set(t.toKey(),e),{refresh_token:e.body.refresh_token,audience:e.body.audience,scope:e.body.scope}}async set(e){var t;const i=new er({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(i.toKey(),o),await((t=this.keyManifest)===null||t===void 0?void 0:t.add(i.toKey()))}async clear(e){var t;const i=await this.getCacheKeys();i&&(await i.filter((o=>!e||o.includes(e))).reduce((async(o,l)=>{await o,await this.cache.remove(l)}),Promise.resolve()),await((t=this.keyManifest)===null||t===void 0?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new er({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter((i=>{var o;const l=er.fromKey(i),u=new Set(l.scope&&l.scope.split(" ")),f=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],m=l.scope&&f.reduce(((h,v)=>h&&u.has(v)),!0);return l.prefix==="@@auth0spajs@@"&&l.clientId===e.clientId&&l.audience===e.audience&&m}))[0]}async getEntryWithRefreshToken(e,t){var i;for(const o of t){const l=er.fromKey(o);if(l.prefix==="@@auth0spajs@@"&&l.clientId===e.clientId){const u=await this.cache.get(o);if(!((i=u==null?void 0:u.body)===null||i===void 0)&&i.refresh_token)return this.modifiedCachedEntry(u,e)}}}async updateEntry(e,t){var i;const o=await this.getCacheKeys();if(o)for(const l of o){const u=await this.cache.get(l);if(((i=u==null?void 0:u.body)===null||i===void 0?void 0:i.refresh_token)===e){const f=Object.assign(Object.assign({},u.body),{refresh_token:t});await this.set(f)}}}}class DR{constructor(e,t,i){this.storage=e,this.clientId=t,this.cookieDomain=i,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const Xl=n=>typeof n=="number",kR=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],PR=n=>{if(!n.id_token)throw new Error("ID token is required but missing");const e=(l=>{const u=l.split("."),[f,m,h]=u;if(u.length!==3||!f||!m||!h)throw new Error("ID token could not be decoded");const v=JSON.parse(mT(m)),T={__raw:l},S={};return Object.keys(v).forEach((I=>{T[I]=v[I],kR.includes(I)||(S[I]=v[I])})),{encoded:{header:f,payload:m,signature:h},header:JSON.parse(mT(f)),claims:T,user:S}})(n.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==n.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${n.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(n.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${n.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==n.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${n.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==n.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${n.aud}" but found "${e.claims.aud}"`);if(n.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==n.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${n.nonce}", found "${e.claims.nonce}"`)}if(n.max_age&&!Xl(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!Xl(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Xl(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const t=n.leeway||60,i=new Date(n.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+t),i>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${i}) is after expiration time (${o})`);if(e.claims.nbf!=null&&Xl(e.claims.nbf)){const l=new Date(0);if(l.setUTCSeconds(e.claims.nbf-t),i<l)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${i}) is before ${l}`)}if(e.claims.auth_time!=null&&Xl(e.claims.auth_time)){const l=new Date(0);if(l.setUTCSeconds(parseInt(e.claims.auth_time)+n.max_age+t),i>l)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${i}) is after last auth at ${l}`)}if(n.organization){const l=n.organization.trim();if(l.startsWith("org_")){const u=l;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(u!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${u}", found "${e.claims.org_id}"`)}else{const u=l.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(u!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${u}", found "${e.claims.org_name}"`)}}return e};var Qr=Dm((function(n,e){var t=$r&&$r.__assign||function(){return t=Object.assign||function(m){for(var h,v=1,T=arguments.length;v<T;v++)for(var S in h=arguments[v])Object.prototype.hasOwnProperty.call(h,S)&&(m[S]=h[S]);return m},t.apply(this,arguments)};function i(m,h){if(!h)return"";var v="; "+m;return h===!0?v:v+"="+h}function o(m,h,v){return encodeURIComponent(m).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(h).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+(function(T){if(typeof T.expires=="number"){var S=new Date;S.setMilliseconds(S.getMilliseconds()+864e5*T.expires),T.expires=S}return i("Expires",T.expires?T.expires.toUTCString():"")+i("Domain",T.domain)+i("Path",T.path)+i("Secure",T.secure)+i("SameSite",T.sameSite)})(v)}function l(m){for(var h={},v=m?m.split("; "):[],T=/(%[\dA-F]{2})+/gi,S=0;S<v.length;S++){var I=v[S].split("="),k=I.slice(1).join("=");k.charAt(0)==='"'&&(k=k.slice(1,-1));try{h[I[0].replace(T,decodeURIComponent)]=k.replace(T,decodeURIComponent)}catch{}}return h}function u(){return l(document.cookie)}function f(m,h,v){document.cookie=o(m,h,t({path:"/"},v))}e.__esModule=!0,e.encode=o,e.parse=l,e.getAll=u,e.get=function(m){return u()[m]},e.set=f,e.remove=function(m,h){f(m,"",t(t({},h),{expires:-1}))}}));xm(Qr),Qr.encode,Qr.parse,Qr.getAll;var VR=Qr.get,AS=Qr.set,CS=Qr.remove;const oa={get(n){const e=VR(n);if(e!==void 0)return JSON.parse(e)},save(n,e,t){let i={};window.location.protocol==="https:"&&(i={secure:!0,sameSite:"none"}),t!=null&&t.daysUntilExpire&&(i.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(i.domain=t.cookieDomain),AS(n,JSON.stringify(e),i)},remove(n,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),CS(n,t)}},UR={get(n){return oa.get(n)||oa.get(`_legacy_${n}`)},save(n,e,t){let i={};window.location.protocol==="https:"&&(i={secure:!0}),t!=null&&t.daysUntilExpire&&(i.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(i.domain=t.cookieDomain),AS(`_legacy_${n}`,JSON.stringify(e),i),oa.save(n,e,t)},remove(n,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),CS(n,t),oa.remove(n,e),oa.remove(`_legacy_${n}`,e)}},LR={get(n){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(n);return e!=null?JSON.parse(e):void 0},save(n,e){sessionStorage.setItem(n,JSON.stringify(e))},remove(n){sessionStorage.removeItem(n)}};var Ws;(function(n){n.Code="code",n.ConnectCode="connect_code"})(Ws||(Ws={}));function OR(n,e,t){var i=e===void 0?null:e,o=(function(m,h){var v=atob(m);if(h){for(var T=new Uint8Array(v.length),S=0,I=v.length;S<I;++S)T[S]=v.charCodeAt(S);return String.fromCharCode.apply(null,new Uint16Array(T.buffer))}return v})(n,t!==void 0&&t),l=o.indexOf(`
`,10)+1,u=o.substring(l)+(i?"//# sourceMappingURL="+i:""),f=new Blob([u],{type:"application/javascript"});return URL.createObjectURL(f)}var _T,vT,TT,Ip,qR=(_T="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YSx1c2VNcnJ0OmZ9LHBvcnRzOltwXX0pPT57bGV0IGgsdSxsPXt9O2NvbnN0e2F1ZGllbmNlOmQsc2NvcGU6eX09cnx8e307dHJ5e2NvbnN0IHI9YT8oZT0+e2NvbnN0IHQ9bmV3IFVSTFNlYXJjaFBhcmFtcyhlKSxyPXt9O3JldHVybiB0LmZvckVhY2goKChlLHQpPT57clt0XT1lfSkpLHJ9KShjLmJvZHkpOkpTT04ucGFyc2UoYy5ib2R5KTtpZighci5yZWZyZXNoX3Rva2VuJiYicmVmcmVzaF90b2tlbiI9PT1yLmdyYW50X3R5cGUpe2lmKHU9KChlLHQpPT5vW24oZSx0KV0pKGQseSksIXUmJmYpe2NvbnN0IGU9by5sYXRlc3RfcmVmcmVzaF90b2tlbix0PSgoZSx0KT0+e2NvbnN0IHI9T2JqZWN0LmtleXMobykuZmluZCgocj0+e2lmKCJsYXRlc3RfcmVmcmVzaF90b2tlbiIhPT1yKXtjb25zdCBzPSgoZSx0KT0+dC5zdGFydHNXaXRoKGAke2V9fGApKSh0LHIpLG89ci5zcGxpdCgifCIpWzFdLnNwbGl0KCIgIiksbj1lLnNwbGl0KCIgIikuZXZlcnkoKGU9Pm8uaW5jbHVkZXMoZSkpKTtyZXR1cm4gcyYmbn19KSk7cmV0dXJuISFyfSkoeSxkKTtlJiYhdCYmKHU9ZSl9aWYoIXUpdGhyb3cgbmV3IHQoZCx5KTtjLmJvZHk9YT9zKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7cmVmcmVzaF90b2tlbjp1fSkpOkpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7cmVmcmVzaF90b2tlbjp1fSkpfWxldCBqLGs7ImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGo9bmV3IEFib3J0Q29udHJvbGxlcixjLnNpZ25hbD1qLnNpZ25hbCk7dHJ5e2s9YXdhaXQgUHJvbWlzZS5yYWNlKFsoXz1lLG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsXykpKSksZmV0Y2goaSxPYmplY3QuYXNzaWduKHt9LGMpKV0pfWNhdGNoKGUpe3JldHVybiB2b2lkIHAucG9zdE1lc3NhZ2Uoe2Vycm9yOmUubWVzc2FnZX0pfWlmKCFrKXJldHVybiBqJiZqLmFib3J0KCksdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjoiVGltZW91dCB3aGVuIGV4ZWN1dGluZyAnZmV0Y2gnIn0pO2c9ay5oZWFkZXJzLGw9Wy4uLmddLnJlZHVjZSgoKGUsW3Qscl0pPT4oZVt0XT1yLGUpKSx7fSksaD1hd2FpdCBrLmpzb24oKSxoLnJlZnJlc2hfdG9rZW4/KGYmJihvLmxhdGVzdF9yZWZyZXNoX3Rva2VuPWgucmVmcmVzaF90b2tlbixPPXUsYj1oLnJlZnJlc2hfdG9rZW4sT2JqZWN0LmVudHJpZXMobykuZm9yRWFjaCgoKFtlLHRdKT0+e3Q9PT1PJiYob1tlXT1iKX0pKSksKChlLHQscik9PntvW24odCxyKV09ZX0pKGgucmVmcmVzaF90b2tlbixkLHkpLGRlbGV0ZSBoLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KShkLHkpLHAucG9zdE1lc3NhZ2Uoe29rOmsub2ssanNvbjpoLGhlYWRlcnM6bH0pfWNhdGNoKGUpe3AucG9zdE1lc3NhZ2Uoe29rOiExLGpzb246e2Vycm9yOmUuZXJyb3IsZXJyb3JfZGVzY3JpcHRpb246ZS5tZXNzYWdlfSxoZWFkZXJzOmx9KX12YXIgTyxiLGcsX30pKX0oKTsKCg==",vT=null,TT=!1,function(n){return Ip=Ip||OR(_T,vT,TT),new Worker(Ip,n)});const Rp={};class zR{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const i=new Set(((t=await this.cache.get(this.manifestKey))===null||t===void 0?void 0:t.keys)||[]);i.add(e),await this.cache.set(this.manifestKey,{keys:[...i]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const i=new Set(t.keys);return i.delete(e),i.size>0?await this.cache.set(this.manifestKey,{keys:[...i]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const BR={memory:()=>new SS().enclosedCache,localstorage:()=>new MR},ET=n=>BR[n],ST=n=>{const{openUrl:e,onRedirect:t}=n,i=Mi(n,["openUrl","onRedirect"]);return Object.assign(Object.assign({},i),{openUrl:e===!1||e?e:t})},AT=(n,e)=>{const t=(e==null?void 0:e.split(" "))||[];return((n==null?void 0:n.split(" "))||[]).every((i=>t.includes(i)))},Jr={NONCE:"nonce",KEYPAIR:"keypair"};class HR{constructor(e){this.clientId=e}getVersion(){return 1}createDbHandle(){const e=window.indexedDB.open("auth0-spa-js",this.getVersion());return new Promise(((t,i)=>{e.onupgradeneeded=()=>Object.values(Jr).forEach((o=>e.result.createObjectStore(o))),e.onerror=()=>i(e.error),e.onsuccess=()=>t(e.result)}))}async getDbHandle(){return this.dbHandle||(this.dbHandle=await this.createDbHandle()),this.dbHandle}async executeDbRequest(e,t,i){const o=i((await this.getDbHandle()).transaction(e,t).objectStore(e));return new Promise(((l,u)=>{o.onsuccess=()=>l(o.result),o.onerror=()=>u(o.error)}))}buildKey(e){const t=e?`_${e}`:"auth0";return`${this.clientId}::${t}`}setNonce(e,t){return this.save(Jr.NONCE,this.buildKey(t),e)}setKeyPair(e){return this.save(Jr.KEYPAIR,this.buildKey(),e)}async save(e,t,i){await this.executeDbRequest(e,"readwrite",(o=>o.put(i,t)))}findNonce(e){return this.find(Jr.NONCE,this.buildKey(e))}findKeyPair(){return this.find(Jr.KEYPAIR,this.buildKey())}find(e,t){return this.executeDbRequest(e,"readonly",(i=>i.get(t)))}async deleteBy(e,t){const i=await this.executeDbRequest(e,"readonly",(o=>o.getAllKeys()));i==null||i.filter(t).map((o=>this.executeDbRequest(e,"readwrite",(l=>l.delete(o)))))}deleteByClientId(e,t){return this.deleteBy(e,(i=>typeof i=="string"&&i.startsWith(`${t}::`)))}clearNonces(){return this.deleteByClientId(Jr.NONCE,this.clientId)}clearKeyPairs(){return this.deleteByClientId(Jr.KEYPAIR,this.clientId)}}class FR{constructor(e){this.storage=new HR(e)}getNonce(e){return this.storage.findNonce(e)}setNonce(e,t){return this.storage.setNonce(e,t)}async getOrGenerateKeyPair(){let e=await this.storage.findKeyPair();return e||(e=await SR(),await this.storage.setKeyPair(e)),e}async generateProof(e){const t=await this.getOrGenerateKeyPair();return CR(Object.assign({keyPair:t},e))}async calculateThumbprint(){return AR(await this.getOrGenerateKeyPair())}async clear(){await Promise.all([this.storage.clearNonces(),this.storage.clearKeyPairs()])}}var fa;(function(n){n.Bearer="Bearer",n.DPoP="DPoP"})(fa||(fa={}));class GR{constructor(e,t){this.hooks=t,this.config=Object.assign(Object.assign({},e),{fetch:e.fetch||(typeof window>"u"?fetch:window.fetch.bind(window))})}isAbsoluteUrl(e){return/^(https?:)?\/\//i.test(e)}buildUrl(e,t){if(t){if(this.isAbsoluteUrl(t))return t;if(e)return`${e.replace(/\/?\/$/,"")}/${t.replace(/^\/+/,"")}`}throw new TypeError("`url` must be absolute or `baseUrl` non-empty.")}getAccessToken(e){return this.config.getAccessToken?this.config.getAccessToken(e):this.hooks.getAccessToken(e)}extractUrl(e){return typeof e=="string"?e:e instanceof URL?e.href:e.url}buildBaseRequest(e,t){if(!this.config.baseUrl)return new Request(e,t);const i=this.buildUrl(this.config.baseUrl,this.extractUrl(e)),o=e instanceof Request?new Request(i,e):i;return new Request(o,t)}setAuthorizationHeader(e,t,i=fa.Bearer){e.headers.set("authorization",`${i} ${t}`)}async setDpopProofHeader(e,t){if(!this.config.dpopNonceId)return;const i=await this.hooks.getDpopNonce(),o=await this.hooks.generateDpopProof({accessToken:t,method:e.method,nonce:i,url:e.url});e.headers.set("dpop",o)}async prepareRequest(e,t){const i=await this.getAccessToken(t);let o,l;typeof i=="string"?(o=this.config.dpopNonceId?fa.DPoP:fa.Bearer,l=i):(o=i.token_type,l=i.access_token),this.setAuthorizationHeader(e,l,o),o===fa.DPoP&&await this.setDpopProofHeader(e,l)}getHeader(e,t){return Array.isArray(e)?new Headers(e).get(t)||"":typeof e.get=="function"?e.get(t)||"":e[t]||""}hasUseDpopNonceError(e){if(e.status!==401)return!1;const t=this.getHeader(e.headers,"www-authenticate");return t.includes("invalid_dpop_nonce")||t.includes("use_dpop_nonce")}async handleResponse(e,t){const i=this.getHeader(e.headers,"dpop-nonce");if(i&&await this.hooks.setDpopNonce(i),!this.hasUseDpopNonceError(e))return e;if(!i||!t.onUseDpopNonceError)throw new ed(i);return t.onUseDpopNonceError()}async internalFetchWithAuth(e,t,i,o){const l=this.buildBaseRequest(e,t);await this.prepareRequest(l,o);const u=await this.config.fetch(l);return this.handleResponse(u,i)}fetchWithAuth(e,t,i){const o={onUseDpopNonceError:()=>this.internalFetchWithAuth(e,t,Object.assign(Object.assign({},o),{onUseDpopNonceError:void 0}),i)};return this.internalFetchWithAuth(e,t,o,i)}}class KR{constructor(e,t){this.myAccountFetcher=e,this.apiBase=t}async connectAccount(e){const t=await this.myAccountFetcher.fetchWithAuth(`${this.apiBase}v1/connected-accounts/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return this._handleResponse(t)}async completeAccount(e){const t=await this.myAccountFetcher.fetchWithAuth(`${this.apiBase}v1/connected-accounts/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return this._handleResponse(t)}async _handleResponse(e){let t;try{t=await e.text(),t=JSON.parse(t)}catch(i){throw new Mf({type:"invalid_json",status:e.status,title:"Invalid JSON response",detail:t||String(i)})}if(e.ok)return t;throw new Mf(t)}}class Mf extends Error{constructor({type:e,status:t,title:i,detail:o,validation_errors:l}){super(o),this.name="MyAccountApiError",this.type=e,this.status=t,this.title=i,this.detail=o,this.validation_errors=l,Object.setPrototypeOf(this,Mf.prototype)}}const bp=new hR;class JR{constructor(e){let t,i;if(this.userCache=new SS().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await bp.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!Nf())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Nf().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)i=e.cache;else{if(t=e.cacheLocation||"memory",!ET(t))throw new Error(`Invalid cache location "${t}"`);i=ET(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?oa:UR,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(m=>`auth0.${m}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:LR;var l;this.scope=Yl("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new DR(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||yS,this.cacheManager=new xR(i,i.allKeys?void 0:new zR(i,this.options.clientId),this.nowProvider),this.dpop=this.options.useDpop?new FR(this.options.clientId):void 0,this.domainUrl=(l=this.options.domain,/^https?:\/\//.test(l)?l:`https://${l}`),this.tokenIssuer=((m,h)=>m?m.startsWith("https://")?m:`https://${m}/`:`${h}/`)(this.options.issuer,this.domainUrl);const u=`${this.domainUrl}/me/`,f=this.createFetcher(Object.assign(Object.assign({},this.options.useDpop&&{dpopNonceId:"__auth0_my_account_api__"}),{getAccessToken:()=>this.getTokenSilently({authorizationParams:{scope:"create:me:connected_accounts",audience:u},detailedResponse:!0})}));this.myAccountApi=new KR(f,u),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&t==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new qR)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||gS)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${Xp(e)}`)}async _verifyIdToken(e,t,i){const o=await this.nowProvider();return PR({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:i,leeway:this.options.leeway,max_age:(l=this.options.authorizationParams.max_age,typeof l!="string"?l:parseInt(l,10)||void 0),now:o});var l}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,i){var o;const l=wp(Jl()),u=wp(Jl()),f=Jl(),m=await pT(f),h=gT(m),v=await((o=this.dpop)===null||o===void 0?void 0:o.calculateThumbprint()),T=((I,k,O,z,W,$,J,Z,ue)=>Object.assign(Object.assign(Object.assign({client_id:I.clientId},I.authorizationParams),O),{scope:Yl(k,O.scope),response_type:"code",response_mode:Z||"query",state:z,nonce:W,redirect_uri:J||I.authorizationParams.redirect_uri,code_challenge:$,code_challenge_method:"S256",dpop_jkt:ue}))(this.options,this.scope,e,l,u,h,e.redirect_uri||this.options.authorizationParams.redirect_uri||i,t==null?void 0:t.response_mode,v),S=this._authorizeUrl(T);return{nonce:u,code_verifier:f,scope:T.scope,audience:T.audience||"default",redirect_uri:T.redirect_uri,state:l,url:S}}async loginWithPopup(e,t){var i;if(e=e||{},!(t=t||{}).popup&&(t.popup=(f=>{const m=window.screenX+(window.innerWidth-400)/2,h=window.screenY+(window.innerHeight-600)/2;return window.open(f,"auth0:authorize:popup",`left=${m},top=${h},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=o.url;const l=await(f=>new Promise(((m,h)=>{let v;const T=setInterval((()=>{f.popup&&f.popup.closed&&(clearInterval(T),clearTimeout(S),window.removeEventListener("message",v,!1),h(new Um(f.popup)))}),1e3),S=setTimeout((()=>{clearInterval(T),h(new Vm(f.popup)),window.removeEventListener("message",v,!1)}),1e3*(f.timeoutInSeconds||60));v=function(I){if(I.data&&I.data.type==="authorization_response"){if(clearTimeout(S),clearInterval(T),window.removeEventListener("message",v,!1),f.popup.close(),I.data.response.error)return h(St.fromPayload(I.data.response));m(I.data.response)}},window.addEventListener("message",v)})))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==l.state)throw new St("state_mismatch","Invalid state");const u=((i=e.authorizationParams)===null||i===void 0?void 0:i.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:l.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:u})}async getUser(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var t;const i=ST(e),{openUrl:o,fragment:l,appState:u}=i,f=Mi(i,["openUrl","fragment","appState"]),m=((t=f.authorizationParams)===null||t===void 0?void 0:t.organization)||this.options.authorizationParams.organization,h=await this._prepareAuthorizeUrl(f.authorizationParams||{}),{url:v}=h,T=Mi(h,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},T),{appState:u,response_type:Ws.Code}),m&&{organization:m}));const S=l?`${v}#${l}`:v;o?await o(S):window.location.assign(S)}async handleRedirectCallback(e=window.location.href){const t=e.split("?").slice(1);if(t.length===0)throw new Error("There are no query params available for parsing.");const i=this.transactionManager.get();if(!i)throw new St("missing_transaction","Invalid state");this.transactionManager.remove();const o=(l=>{l.indexOf("#")>-1&&(l=l.substring(0,l.indexOf("#")));const u=new URLSearchParams(l);return{state:u.get("state"),code:u.get("code")||void 0,connect_code:u.get("connect_code")||void 0,error:u.get("error")||void 0,error_description:u.get("error_description")||void 0}})(t.join(""));return i.response_type===Ws.ConnectCode?this._handleConnectAccountRedirectCallback(o,i):this._handleLoginRedirectCallback(o,i)}async _handleLoginRedirectCallback(e,t){const{code:i,state:o,error:l,error_description:u}=e;if(l)throw new km(l,u||l,o,t.appState);if(!t.code_verifier||t.state&&t.state!==o)throw new St("state_mismatch","Invalid state");const f=t.organization,m=t.nonce,h=t.redirect_uri;return await this._requestToken(Object.assign({audience:t.audience,scope:t.scope,code_verifier:t.code_verifier,grant_type:"authorization_code",code:i},h?{redirect_uri:h}:{}),{nonceIn:m,organization:f}),{appState:t.appState,response_type:Ws.Code}}async _handleConnectAccountRedirectCallback(e,t){const{connect_code:i,state:o,error:l,error_description:u}=e;if(l)throw new Pm(l,u||l,t.connection,o,t.appState);if(!i)throw new St("missing_connect_code","Missing connect code");if(!(t.code_verifier&&t.state&&t.auth_session&&t.redirect_uri&&t.state===o))throw new St("state_mismatch","Invalid state");const f=await this.myAccountApi.completeAccount({auth_session:t.auth_session,connect_code:i,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier});return Object.assign(Object.assign({},f),{appState:t.appState,response_type:Ws.ConnectCode})}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var t;const i=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Yl(this.scope,(t=e.authorizationParams)===null||t===void 0?void 0:t.scope)})}),o=await((l,u)=>{let f=Rp[u];return f||(f=l().finally((()=>{delete Rp[u],f=null})),Rp[u]=f),f})((()=>this._getTokenSilently(i)),`${this.options.clientId}::${i.authorizationParams.audience}::${i.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:t}=e,i=Mi(e,["cacheMode"]);if(t!=="off"){const o=await this._getEntryFromCache({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId,cacheMode:t});if(o)return o}if(t!=="cache-only"){if(!await(async(o,l=3)=>{for(let u=0;u<l;u++)if(await o())return!0;return!1})((()=>bp.acquireLock("auth0.lock.getTokenSilently",5e3)),10))throw new cu;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),t!=="off"){const v=await this._getEntryFromCache({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId});if(v)return v}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(i):await this._getTokenFromIFrame(i),{id_token:l,token_type:u,access_token:f,oauthTokenScope:m,expires_in:h}=o;return Object.assign(Object.assign({id_token:l,token_type:u,access_token:f},m?{scope:m}:null),{expires_in:h})}finally{await bp.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},t={}){var i;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Yl(this.scope,(i=e.authorizationParams)===null||i===void 0?void 0:i.scope)})});return t=Object.assign(Object.assign({},pR),t),await this.loginWithPopup(o,t),(await this.cacheManager.get(new er({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}),void 0,this.options.useMrrt)).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const t=e.logoutParams||{},{federated:i}=t,o=Mi(t,["federated"]),l=i?"&federated":"";return this._url(`/v2/logout?${Xp(Object.assign({clientId:e.clientId},o))}`)+l}async logout(e={}){var t;const i=ST(e),{openUrl:o}=i,l=Mi(i,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@"),await((t=this.dpop)===null||t===void 0?void 0:t.clear());const u=this._buildLogoutUrl(l);o?await o(u):o!==!1&&window.location.assign(u)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),i=this.cookieStorage.get(this.orgHintCookieName);i&&!t.organization&&(t.organization=i);const{url:o,state:l,nonce:u,code_verifier:f,redirect_uri:m,scope:h,audience:v}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new St("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const T=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds;let S;try{S=new URL(this.domainUrl).origin}catch{S=this.domainUrl}const I=await((O,z,W=60)=>new Promise((($,J)=>{const Z=window.document.createElement("iframe");Z.setAttribute("width","0"),Z.setAttribute("height","0"),Z.style.display="none";const ue=()=>{window.document.body.contains(Z)&&(window.document.body.removeChild(Z),window.removeEventListener("message",le,!1))};let le;const D=setTimeout((()=>{J(new cu),ue()}),1e3*W);le=function(b){if(b.origin!=z||!b.data||b.data.type!=="authorization_response")return;const N=b.source;N&&N.close(),b.data.response.error?J(St.fromPayload(b.data.response)):$(b.data.response),clearTimeout(D),window.removeEventListener("message",le,!1),setTimeout(ue,2e3)},window.addEventListener("message",le,!1),window.document.body.appendChild(Z),Z.setAttribute("src",O)})))(o,S,T);if(l!==I.state)throw new St("state_mismatch","Invalid state");const k=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:f,code:I.code,grant_type:"authorization_code",redirect_uri:m,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:u,organization:t.organization});return Object.assign(Object.assign({},k),{scope:h,oauthTokenScope:k.scope,audience:v})}catch(T){throw T.error==="login_required"&&this.logout({openUrl:!1}),T}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new er({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}),void 0,this.options.useMrrt);if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new jf(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const i=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null,l=((v,T,S,I)=>{var k;if(v&&S&&I){if(T.audience!==S)return T.scope;const O=I.split(" "),z=((k=T.scope)===null||k===void 0?void 0:k.split(" "))||[],W=z.every(($=>O.includes($)));return O.length>=z.length&&W?I:T.scope}return T.scope})(this.options.useMrrt,e.authorizationParams,t==null?void 0:t.audience,t==null?void 0:t.scope);try{const v=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:i}),o&&{timeout:o}),{scopesToRequest:l});if(v.refresh_token&&this.options.useMrrt&&(t!=null&&t.refresh_token)&&await this.cacheManager.updateEntry(t.refresh_token,v.refresh_token),this.options.useMrrt&&(u=t==null?void 0:t.audience,f=t==null?void 0:t.scope,m=e.authorizationParams.audience,h=e.authorizationParams.scope,(u!==m||!AT(h,f))&&!AT(l,v.scope))){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);const T=((S,I)=>{const k=(S==null?void 0:S.split(" "))||[],O=(I==null?void 0:I.split(" "))||[];return k.filter((z=>O.indexOf(z)==-1)).join(",")})(l,v.scope);throw new Om(e.authorizationParams.audience||"default",T)}return Object.assign(Object.assign({},v),{scope:e.authorizationParams.scope,oauthTokenScope:v.scope,audience:e.authorizationParams.audience||"default"})}catch(v){if((v.message.indexOf("Missing Refresh Token")>-1||v.message&&v.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw v}var u,f,m,h}async _saveEntryInCache(e){const{id_token:t,decodedToken:i}=e,o=Mi(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:t,decodedToken:i}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",t=await this.cacheManager.getIdToken(new er({clientId:this.options.clientId,audience:e,scope:this.scope})),i=this.userCache.get("@@user@@");return t&&t.id_token===(i==null?void 0:i.id_token)?i:(this.userCache.set("@@user@@",t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:i,cacheMode:o}){const l=await this.cacheManager.get(new er({scope:e,audience:t,clientId:i}),60,this.options.useMrrt,o);if(l&&l.access_token){const{token_type:u,access_token:f,oauthTokenScope:m,expires_in:h}=l,v=await this._getIdTokenFromCache();return v&&Object.assign(Object.assign({id_token:v.id_token,token_type:u||"Bearer",access_token:f},m?{scope:m}:null),{expires_in:h})}}async _requestToken(e,t){const{nonceIn:i,organization:o,scopesToRequest:l}=t||{},u=await NR(Object.assign(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs,useMrrt:this.options.useMrrt,dpop:this.dpop},e),{scope:l||e.scope}),this.worker),f=await this._verifyIdToken(u.id_token,i,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},u),{decodedToken:f,scope:e.scope,audience:e.audience||"default"}),u.scope?{oauthTokenScope:u.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||f.claims.org_id),Object.assign(Object.assign({},u),{decodedToken:f})}async exchangeToken(e){return this._requestToken({grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token:e.subject_token,subject_token_type:e.subject_token_type,scope:Yl(e.scope,this.scope),audience:e.audience||this.options.authorizationParams.audience})}_assertDpop(e){if(!e)throw new Error("`useDpop` option must be enabled before using DPoP.")}getDpopNonce(e){return this._assertDpop(this.dpop),this.dpop.getNonce(e)}setDpopNonce(e,t){return this._assertDpop(this.dpop),this.dpop.setNonce(e,t)}generateDpopProof(e){return this._assertDpop(this.dpop),this.dpop.generateProof(e)}createFetcher(e={}){return new GR(e,{isDpopEnabled:()=>!!this.options.useDpop,getAccessToken:t=>{var i;return this.getTokenSilently({authorizationParams:{scope:(i=t==null?void 0:t.scope)===null||i===void 0?void 0:i.join(" "),audience:t==null?void 0:t.audience},detailedResponse:!0})},getDpopNonce:()=>this.getDpopNonce(e.dpopNonceId),setDpopNonce:t=>this.setDpopNonce(t,e.dpopNonceId),generateDpopProof:t=>this.generateDpopProof(t)})}async connectAccountWithRedirect(e){const{openUrl:t,appState:i,connection:o,authorization_params:l,redirectUri:u=this.options.authorizationParams.redirect_uri||window.location.origin}=e;if(!o)throw new Error("connection is required");const f=wp(Jl()),m=Jl(),h=await pT(m),v=gT(h),{connect_uri:T,connect_params:S,auth_session:I}=await this.myAccountApi.connectAccount({connection:o,redirect_uri:u,state:f,code_challenge:v,code_challenge_method:"S256",authorization_params:l});this.transactionManager.create({state:f,code_verifier:m,auth_session:I,redirect_uri:u,appState:i,connection:o,response_type:Ws.ConnectCode});const k=new URL(T);k.searchParams.set("ticket",S.ticket),t?await t(k.toString()):window.location.assign(k)}}var wS={isAuthenticated:!1,isLoading:!0,error:void 0,user:void 0},_n=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},YR=Ft(Ft({},wS),{buildAuthorizeUrl:_n,buildLogoutUrl:_n,getAccessTokenSilently:_n,getAccessTokenWithPopup:_n,getIdTokenClaims:_n,loginWithRedirect:_n,loginWithPopup:_n,connectAccountWithRedirect:_n,logout:_n,handleRedirectCallback:_n,getDpopNonce:_n,setDpopNonce:_n,generateDpopProof:_n,createFetcher:_n}),IS=ge.createContext(YR),CT=(function(n){fR(e,n);function e(t,i){var o=n.call(this,i??t)||this;return o.error=t,o.error_description=i,Object.setPrototypeOf(o,e.prototype),o}return e})(Error),XR=/[?&](?:connect_)?code=[^&]+/,$R=/[?&]state=[^&]+/,WR=/[?&]error=[^&]+/,QR=function(n){return n===void 0&&(n=window.location.search),(XR.test(n)||WR.test(n))&&$R.test(n)},RS=function(n){return function(e){if(e instanceof Error)return e;if(e!==null&&typeof e=="object"&&"error"in e&&typeof e.error=="string"){if("error_description"in e&&typeof e.error_description=="string"){var t=e;return new CT(t.error,t.error_description)}var i=e;return new CT(i.error)}return new Error(n)}},wT=RS("Login failed"),Np=RS("Get access token failed"),bS=function(n){var e,t;n!=null&&n.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),n.authorizationParams=(e=n.authorizationParams)!==null&&e!==void 0?e:{},n.authorizationParams.redirect_uri=n.redirectUri,delete n.redirectUri),!((t=n==null?void 0:n.authorizationParams)===null||t===void 0)&&t.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),n.authorizationParams.redirect_uri=n.authorizationParams.redirectUri,delete n.authorizationParams.redirectUri)},ZR=function(n,e){switch(e.type){case"LOGIN_POPUP_STARTED":return Ft(Ft({},n),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return Ft(Ft({},n),{isAuthenticated:!!e.user,user:e.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return n.user===e.user?n:Ft(Ft({},n),{isAuthenticated:!!e.user,user:e.user});case"LOGOUT":return Ft(Ft({},n),{isAuthenticated:!1,user:void 0});case"ERROR":return Ft(Ft({},n),{isLoading:!1,error:e.error})}},jR=function(n){return bS(n),Ft(Ft({},n),{auth0Client:{name:"auth0-react",version:"2.8.0"}})},eb=function(n){var e;window.history.replaceState({},document.title,(e=n.returnTo)!==null&&e!==void 0?e:window.location.pathname)},tb=function(n){var e=n.children,t=n.skipRedirectCallback,i=n.onRedirectCallback,o=i===void 0?eb:i,l=n.context,u=l===void 0?IS:l,f=hT(n,["children","skipRedirectCallback","onRedirectCallback","context"]),m=ge.useState(function(){return new JR(jR(f))})[0],h=ge.useReducer(ZR,wS),v=h[0],T=h[1],S=ge.useRef(!1),I=ge.useCallback(function(M){return T({type:"ERROR",error:M}),M},[]);ge.useEffect(function(){S.current||(S.current=!0,(function(){return ia(void 0,void 0,void 0,function(){var M,V,x,Se,we,X,oe;return sa(this,function(pe){switch(pe.label){case 0:return pe.trys.push([0,7,,8]),M=void 0,QR()&&!t?[4,m.handleRedirectCallback()]:[3,3];case 1:return V=pe.sent(),x=V.appState,Se=x===void 0?{}:x,we=V.response_type,X=hT(V,["appState","response_type"]),[4,m.getUser()];case 2:return M=pe.sent(),Se.response_type=we,we===Ws.ConnectCode&&(Se.connectedAccount=X),o(Se,M),[3,6];case 3:return[4,m.checkSession()];case 4:return pe.sent(),[4,m.getUser()];case 5:M=pe.sent(),pe.label=6;case 6:return T({type:"INITIALISED",user:M}),[3,8];case 7:return oe=pe.sent(),I(wT(oe)),[3,8];case 8:return[2]}})})})())},[m,o,t,I]);var k=ge.useCallback(function(M){return bS(M),m.loginWithRedirect(M)},[m]),O=ge.useCallback(function(M,V){return ia(void 0,void 0,void 0,function(){var x,Se;return sa(this,function(we){switch(we.label){case 0:T({type:"LOGIN_POPUP_STARTED"}),we.label=1;case 1:return we.trys.push([1,3,,4]),[4,m.loginWithPopup(M,V)];case 2:return we.sent(),[3,4];case 3:return x=we.sent(),I(wT(x)),[2];case 4:return[4,m.getUser()];case 5:return Se=we.sent(),T({type:"LOGIN_POPUP_COMPLETE",user:Se}),[2]}})})},[m,I]),z=ge.useCallback(function(){for(var M=[],V=0;V<arguments.length;V++)M[V]=arguments[V];return ia(void 0,dR([],M),void 0,function(x){return x===void 0&&(x={}),sa(this,function(Se){switch(Se.label){case 0:return[4,m.logout(x)];case 1:return Se.sent(),(x.openUrl||x.openUrl===!1)&&T({type:"LOGOUT"}),[2]}})})},[m]),W=ge.useCallback(function(M){return ia(void 0,void 0,void 0,function(){var V,x,Se,we;return sa(this,function(X){switch(X.label){case 0:return X.trys.push([0,2,3,5]),[4,m.getTokenSilently(M)];case 1:return V=X.sent(),[3,5];case 2:throw x=X.sent(),Np(x);case 3:return Se=T,we={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,m.getUser()];case 4:return Se.apply(void 0,[(we.user=X.sent(),we)]),[7];case 5:return[2,V]}})})},[m]),$=ge.useCallback(function(M,V){return ia(void 0,void 0,void 0,function(){var x,Se,we,X;return sa(this,function(oe){switch(oe.label){case 0:return oe.trys.push([0,2,3,5]),[4,m.getTokenWithPopup(M,V)];case 1:return x=oe.sent(),[3,5];case 2:throw Se=oe.sent(),Np(Se);case 3:return we=T,X={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,m.getUser()];case 4:return we.apply(void 0,[(X.user=oe.sent(),X)]),[7];case 5:return[2,x]}})})},[m]),J=ge.useCallback(function(M){return m.connectAccountWithRedirect(M)},[m]),Z=ge.useCallback(function(){return m.getIdTokenClaims()},[m]),ue=ge.useCallback(function(M){return ia(void 0,void 0,void 0,function(){var V,x,Se;return sa(this,function(we){switch(we.label){case 0:return we.trys.push([0,2,3,5]),[4,m.handleRedirectCallback(M)];case 1:return[2,we.sent()];case 2:throw V=we.sent(),Np(V);case 3:return x=T,Se={type:"HANDLE_REDIRECT_COMPLETE"},[4,m.getUser()];case 4:return x.apply(void 0,[(Se.user=we.sent(),Se)]),[7];case 5:return[2]}})})},[m]),le=ge.useCallback(function(M){return m.getDpopNonce(M)},[m]),D=ge.useCallback(function(M,V){return m.setDpopNonce(M,V)},[m]),b=ge.useCallback(function(M){return m.generateDpopProof(M)},[m]),N=ge.useCallback(function(M){return m.createFetcher(M)},[m]),P=ge.useMemo(function(){return Ft(Ft({},v),{getAccessTokenSilently:W,getAccessTokenWithPopup:$,getIdTokenClaims:Z,loginWithRedirect:k,loginWithPopup:O,connectAccountWithRedirect:J,logout:z,handleRedirectCallback:ue,getDpopNonce:le,setDpopNonce:D,generateDpopProof:b,createFetcher:N})},[v,W,$,Z,k,O,J,z,ue,le,D,b,N]);return mS.createElement(u.Provider,{value:P},e)},nb=function(n){return n===void 0&&(n=IS),ge.useContext(n)};const ib=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),sb=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),NS=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),MS=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),rb=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),ob=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),ab=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),lb=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),qm=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Na=({className:n})=>L.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2.75L13.7851 9.43483L20.5 11.25L13.7851 13.0652L12 19.75L10.2149 13.0652L3.5 11.25L10.2149 9.43483L12 2.75Z",fill:"currentColor"})}),zm=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),ub=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),cb=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5m11 2a9 9 0 11-13.56-5.44"})}),fb=({className:n})=>L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6.002l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.366a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),db=({history:n,onSelectHistory:e,onNewChat:t,isOpen:i,setIsOpen:o,isSubscribed:l,onUpgradeClick:u})=>{const f=()=>{t(),o(!1)},m=v=>{e(v),o(!1)},h=()=>{u(),o(!1)};return L.jsxs("aside",{className:`fixed top-0 left-0 z-40 h-full bg-gray-200/95 dark:bg-gemini-dark-card/95 backdrop-blur-md transition-transform duration-300 ease-in-out ${i?"translate-x-0":"-translate-x-full"} w-72 flex flex-col`,children:[L.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-700/50",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(ob,{className:"w-6 h-6 text-indigo-500"}),L.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"History"})]})}),L.jsxs("div",{className:"flex-grow overflow-y-auto p-2",children:[L.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 px-4 py-2 mb-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 bg-white/50 dark:bg-white/5 rounded-lg hover:bg-white/80 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors",children:[L.jsx(ab,{className:"w-5 h-5"}),"New Prompt"]}),!l&&L.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 px-4 py-2 mb-2 text-left text-sm font-medium text-white dark:text-gray-900 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-opacity",children:[L.jsx(zm,{className:"w-5 h-5"}),"Unlock Pro"]}),L.jsx("nav",{className:"flex flex-col gap-1",children:n.sort((v,T)=>T.timestamp-v.timestamp).map(v=>L.jsx("button",{onClick:()=>m(v),className:"px-4 py-2 text-left text-sm text-gray-600 dark:text-gray-300 rounded-md hover:bg-gray-300/50 dark:hover:bg-white/5 transition-colors truncate",children:v.title},v.id))})]})]})},xS=({textToCopy:n})=>{const[e,t]=ge.useState(!1),i=ge.useCallback(()=>{navigator.clipboard.writeText(n).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})},[n]);return L.jsx("button",{onClick:i,className:"p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 transition-all duration-200","aria-label":"Copy to clipboard",children:e?L.jsx(MS,{className:"w-5 h-5 text-green-500"}):L.jsx(NS,{className:"w-5 h-5"})})},hb=()=>L.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center font-semibold text-white flex-shrink-0",children:"U"}),pb=()=>L.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 p-1.5 flex items-center justify-center flex-shrink-0",children:L.jsx(Na,{className:"text-white"})}),mb=({message:n,onOptionSelect:e,onShare:t})=>{const{sender:i,text:o,options:l,field:u,isAnswered:f}=n,[m,h]=ge.useState(""),[v,T]=ge.useState(!1),S=$=>{$.toLowerCase().includes("custom")?T(!0):u&&e(u,$)},I=$=>{$.preventDefault(),m.trim()&&u&&(e(u,m.trim()),h(""),T(!1))},k=i==="user",O=i==="ai";if(i==="system")return L.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 py-2",children:o});const W=o.includes("Prompt Engineering Structure");return L.jsxs("div",{className:"w-full max-w-3xl mx-auto flex gap-2 sm:gap-4",children:[k?L.jsx(hb,{}):L.jsx(pb,{}),L.jsxs("div",{className:"flex-1 overflow-hidden pt-1",children:[L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:k?"You":"promptii"}),O&&W&&L.jsxs("div",{className:"flex items-center",children:[L.jsx(xS,{textToCopy:o}),L.jsx("button",{onClick:()=>t(o),className:"p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 transition-all duration-200","aria-label":"Share prompt",children:L.jsx(fb,{className:"w-5 h-5"})})]})]}),W?L.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-700 dark:text-gray-300 text-sm leading-relaxed mt-2 bg-gray-50 dark:bg-black/20 p-3 sm:p-4 rounded-lg overflow-x-auto",children:o}):L.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-700 dark:text-gray-300",dangerouslySetInnerHTML:{__html:o.replace(/\n/g,"<br />")}}),l&&u&&!f&&L.jsxs("div",{className:"mt-4 space-y-2",children:[L.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l.map(($,J)=>L.jsx("button",{onClick:()=>S($),className:"w-full text-left px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gemini-dark-card hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm",children:$},J))}),v&&L.jsxs("form",{onSubmit:I,className:"flex gap-2 mt-2",children:[L.jsx("input",{type:"text",value:m,onChange:$=>h($.target.value),placeholder:"Enter your custom value",className:"flex-grow bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),L.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"Submit"})]})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gb,yb;function _b(){return{geminiUrl:gb,vertexUrl:yb}}function vb(n,e,t,i){var o,l;if(!(n!=null&&n.baseUrl)){const u=_b();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ao{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function y(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let h=0;h<m.length;h++){const v=m[h];y(v,e.slice(l+1),t[h])}else for(const h of m)y(h,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];y(m[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function Tb(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),l=i.split("."),u=new Set;let f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const h=l[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Qp(n,o,l,0,u)}}function Qp(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const m of f[u])Qp(m,e,t,i+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of f)m[h]=u[h];for(const[h,v]of Object.entries(m)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);y(u,T,v)}for(const h of f)delete u[h]}}else{const u=n;l in u&&Qp(u[l],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(n){const e={},t=d(n,["operationName"]);t!=null&&y(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function Sb(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=d(n,["done"]);o!=null&&y(e,["done"],o);const l=d(n,["error"]);l!=null&&y(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&y(e,["response"],Cb(u)),e}function Ab(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=d(n,["done"]);o!=null&&y(e,["done"],o);const l=d(n,["error"]);l!=null&&y(e,["error"],l);const u=d(n,["response"]);return u!=null&&y(e,["response"],wb(u)),e}function Cb(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Ib(u))),y(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function wb(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Rb(u))),y(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function Ib(n){const e={},t=d(n,["video"]);return t!=null&&y(e,["video"],Mb(t)),e}function Rb(n){const e={},t=d(n,["_self"]);return t!=null&&y(e,["video"],xb(t)),e}function bb(n){const e={},t=d(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function Nb(n){const e={},t=d(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function Mb(n){const e={},t=d(n,["uri"]);t!=null&&y(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],Bm(i));const o=d(n,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function xb(n){const e={},t=d(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Bm(i));const o=d(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var IT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(IT||(IT={}));var RT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(RT||(RT={}));var bT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(bT||(bT={}));var cn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cn||(cn={}));var NT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(NT||(NT={}));var MT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(MT||(MT={}));var xT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(xT||(xT={}));var DT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(DT||(DT={}));var kT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(kT||(kT={}));var PT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(PT||(PT={}));var VT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(VT||(VT={}));var UT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(UT||(UT={}));var LT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(LT||(LT={}));var OT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(OT||(OT={}));var qT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(qT||(qT={}));var zT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zT||(zT={}));var xf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xf||(xf={}));var BT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(BT||(BT={}));var Zp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zp||(Zp={}));var HT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(HT||(HT={}));var FT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(FT||(FT={}));var GT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(GT||(GT={}));var KT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(KT||(KT={}));var JT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(JT||(JT={}));var YT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(YT||(YT={}));var XT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(XT||(XT={}));var $T;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})($T||($T={}));var WT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(WT||(WT={}));var QT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(QT||(QT={}));var ZT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(ZT||(ZT={}));var jT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(jT||(jT={}));var eE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(eE||(eE={}));var tE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(tE||(tE={}));var nE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(nE||(nE={}));var iE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(iE||(iE={}));var sE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(sE||(sE={}));var rE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(rE||(rE={}));var oE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(oE||(oE={}));var aE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(aE||(aE={}));var lE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(lE||(lE={}));var uE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(uE||(uE={}));var cE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(cE||(cE={}));var fE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fE||(fE={}));var dE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(dE||(dE={}));var hE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(hE||(hE={}));var pE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(pE||(pE={}));var mE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(mE||(mE={}));var gE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(gE||(gE={}));var da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class jp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class $l{get text(){var e,t,i,o,l,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const T=[];for(const S of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[I,k]of Object.entries(S))I!=="text"&&I!=="thought"&&(k!==null||k!==void 0)&&T.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,l,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const T of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(T))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,l,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,l,u,f,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,l,u,f,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class yE{}class _E{}class Db{}class kb{}class Pb{}class Vb{}class vE{}class TE{}class EE{}class Ub{}class Df{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new Df;let o;const l=e;return t?o=Ab(l):o=Sb(l),Object.assign(i,o),i}}class SE{}class AE{}class CE{}class Lb{}class Ob{}class qb{}class wE{}class zb{get text(){var e,t,i;let o="",l=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(f))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,i;let o="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Bb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DS(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function kS(n){return Array.isArray(n)?n.map(e=>kf(e)):[kf(n)]}function kf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function PS(n){const e=kf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VS(n){const e=kf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function IE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function US(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>IE(e)):[IE(n)]}function em(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function RE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function bE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return em(n)?n:{role:"user",parts:US(n)}}function Hm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=rn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function Gn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(RE(n)||bE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],i=em(n[0]);for(const o of n){const l=em(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(RE(o)||bE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:US(t)}),e}function Hb(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(cn).includes(t[0].toUpperCase())?t[0].toUpperCase():cn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(cn).includes(i.toUpperCase())?i.toUpperCase():cn.TYPE_UNSPECIFIED})}}function pa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Hb(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(cn).includes(f.toUpperCase())?f.toUpperCase():cn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=pa(f);else if(i.includes(u)){const m=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}m.push(pa(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,v]of Object.entries(f))m[h]=pa(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Fm(n){return pa(n)}function Gm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Km(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ma(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pa(e.response));return n}function xa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Fb(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ps(n,e){if(typeof e!="string")throw new Error("name must be a string");return Fb(n,e,"cachedContents")}function LS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function pr(n){return Bm(n)}function Gb(n){return n!=null&&typeof n=="object"&&"name"in n}function Kb(n){return n!=null&&typeof n=="object"&&"video"in n}function Jb(n){return n!=null&&typeof n=="object"&&"uri"in n}function OS(n){var e;let t;if(Gb(n)&&(t=n.name),!(Jb(n)&&(t=n.uri,t===void 0))&&!(Kb(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function qS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function zS(n){for(const e of["models","tunedModels","publisherModels"])if(Yb(n,e))return n[e];return[]}function Yb(n,e){return n!==null&&typeof n=="object"&&e in n}function Xb(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function $b(n,e={}){const t=[],i=new Set;for(const o of n){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=Xb(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function BS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Wb(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function HS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Da(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function FS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qb(n){const e={},t=d(n,["responsesFile"]);t!=null&&y(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>b1(u))),y(e,["inlinedResponses"],l)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["inlinedEmbedContentResponses"],l)}return e}function Zb(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&y(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&y(e,["bigqueryUri"],o),e}function jb(n){const e={},t=d(n,["format"]);t!=null&&y(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&y(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function gf(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const o=d(n,["metadata","state"]);o!=null&&y(e,["state"],FS(o));const l=d(n,["metadata","createTime"]);l!=null&&y(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&y(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&y(e,["updateTime"],f);const m=d(n,["metadata","model"]);m!=null&&y(e,["model"],m);const h=d(n,["metadata","output"]);return h!=null&&y(e,["dest"],Qb(HS(h))),e}function tm(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["displayName"]);i!=null&&y(e,["displayName"],i);const o=d(n,["state"]);o!=null&&y(e,["state"],FS(o));const l=d(n,["error"]);l!=null&&y(e,["error"],l);const u=d(n,["createTime"]);u!=null&&y(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&y(e,["startTime"],f);const m=d(n,["endTime"]);m!=null&&y(e,["endTime"],m);const h=d(n,["updateTime"]);h!=null&&y(e,["updateTime"],h);const v=d(n,["model"]);v!=null&&y(e,["model"],v);const T=d(n,["inputConfig"]);T!=null&&y(e,["src"],e1(T));const S=d(n,["outputConfig"]);return S!=null&&y(e,["dest"],Zb(HS(S))),e}function e1(n){const e={},t=d(n,["instancesFormat"]);t!=null&&y(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&y(e,["bigqueryUri"],o),e}function t1(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&y(t,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>R1(n,u))),y(t,["requests","requests"],l)}return t}function n1(n){const e={},t=d(n,["format"]);t!=null&&y(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&y(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function i1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&y(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function s1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],Da(n,i)),t}function r1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],Da(n,i)),t}function o1(n){const e={},t=d(n,["content"]);t!=null&&y(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],a1(i));const o=d(n,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&y(e,["finishReason"],l);const u=d(n,["urlContextMetadata"]);u!=null&&y(e,["urlContextMetadata"],u);const f=d(n,["avgLogprobs"]);f!=null&&y(e,["avgLogprobs"],f);const m=d(n,["groundingMetadata"]);m!=null&&y(e,["groundingMetadata"],m);const h=d(n,["index"]);h!=null&&y(e,["index"],h);const v=d(n,["logprobsResult"]);v!=null&&y(e,["logprobsResult"],v);const T=d(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>I)),y(e,["safetyRatings"],S)}return e}function a1(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["citations"],i)}return e}function GS(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>V1(l))),y(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&y(e,["role"],i),e}function l1(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function u1(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=d(n,["dest"]);return e!==void 0&&o!=null&&y(e,["outputConfig"],jb(Wb(o))),t}function NE(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["src"]);o!=null&&y(t,["batch","inputConfig"],t1(n,BS(n,o)));const l=d(e,["config"]);return l!=null&&l1(l,t),t}function c1(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["model"],Ye(n,i));const o=d(e,["src"]);o!=null&&y(t,["inputConfig"],n1(BS(n,o)));const l=d(e,["config"]);return l!=null&&u1(l,t),t}function f1(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),t}function d1(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["src"]);o!=null&&y(t,["batch","inputConfig"],v1(n,o));const l=d(e,["config"]);return l!=null&&f1(l,t),t}function h1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],Da(n,i)),t}function p1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],Da(n,i)),t}function m1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["done"]);o!=null&&y(e,["done"],o);const l=d(n,["error"]);return l!=null&&y(e,["error"],l),e}function g1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["done"]);o!=null&&y(e,["done"],o);const l=d(n,["error"]);return l!=null&&y(e,["error"],l),e}function y1(n,e){const t={},i=d(e,["contents"]);if(i!=null){let l=Hm(n,i);Array.isArray(l)&&(l=l.map(u=>u)),y(t,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(y(t,["_self"],_1(o,t)),Tb(t,{"requests[].*":"requests[].request.*"})),t}function _1(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function v1(n,e){const t={},i=d(e,["fileName"]);i!=null&&y(t,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&y(t,["requests"],y1(n,o)),t}function T1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function E1(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],GS(rn(o)));const l=d(e,["temperature"]);l!=null&&y(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&y(i,["topP"],u);const f=d(e,["topK"]);f!=null&&y(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&y(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const I=d(e,["presencePenalty"]);I!=null&&y(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&y(i,["frequencyPenalty"],k);const O=d(e,["seed"]);O!=null&&y(i,["seed"],O);const z=d(e,["responseMimeType"]);z!=null&&y(i,["responseMimeType"],z);const W=d(e,["responseSchema"]);W!=null&&y(i,["responseSchema"],Fm(W));const $=d(e,["responseJsonSchema"]);if($!=null&&y(i,["responseJsonSchema"],$),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=d(e,["safetySettings"]);if(t!==void 0&&J!=null){let V=J;Array.isArray(V)&&(V=V.map(x=>U1(x))),y(t,["safetySettings"],V)}const Z=d(e,["tools"]);if(t!==void 0&&Z!=null){let V=xa(Z);Array.isArray(V)&&(V=V.map(x=>L1(Ma(x)))),y(t,["tools"],V)}const ue=d(e,["toolConfig"]);if(t!==void 0&&ue!=null&&y(t,["toolConfig"],ue),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);t!==void 0&&le!=null&&y(t,["cachedContent"],ps(n,le));const D=d(e,["responseModalities"]);D!=null&&y(i,["responseModalities"],D);const b=d(e,["mediaResolution"]);b!=null&&y(i,["mediaResolution"],b);const N=d(e,["speechConfig"]);if(N!=null&&y(i,["speechConfig"],Gm(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=d(e,["thinkingConfig"]);P!=null&&y(i,["thinkingConfig"],P);const M=d(e,["imageConfig"]);return M!=null&&y(i,["imageConfig"],M),i}function S1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>o1(h))),y(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&y(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function A1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],Da(n,i)),t}function C1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],Da(n,i)),t}function w1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function I1(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&y(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function R1(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["request","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let f=Gn(o);Array.isArray(f)&&(f=f.map(m=>GS(m))),y(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&y(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&y(t,["request","generationConfig"],E1(n,u,d(t,["request"],{}))),t}function b1(n){const e={},t=d(n,["response"]);t!=null&&y(e,["response"],S1(t));const i=d(n,["error"]);return i!=null&&y(e,["error"],i),e}function N1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function M1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),t}function x1(n){const e={},t=d(n,["config"]);return t!=null&&N1(t,e),e}function D1(n){const e={},t=d(n,["config"]);return t!=null&&M1(t,e),e}function k1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>gf(u))),y(e,["batchJobs"],l)}return e}function P1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>tm(u))),y(e,["batchJobs"],l)}return e}function V1(n){const e={},t=d(n,["videoMetadata"]);t!=null&&y(e,["videoMetadata"],t);const i=d(n,["thought"]);i!=null&&y(e,["thought"],i);const o=d(n,["inlineData"]);o!=null&&y(e,["inlineData"],i1(o));const l=d(n,["fileData"]);l!=null&&y(e,["fileData"],T1(l));const u=d(n,["thoughtSignature"]);u!=null&&y(e,["thoughtSignature"],u);const f=d(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=d(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const h=d(n,["executableCode"]);h!=null&&y(e,["executableCode"],h);const v=d(n,["functionResponse"]);v!=null&&y(e,["functionResponse"],v);const T=d(n,["text"]);return T!=null&&y(e,["text"],T),e}function U1(n){const e={};if(d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=d(n,["category"]);t!=null&&y(e,["category"],t);const i=d(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function L1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["functionDeclarations"],h)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&y(e,["googleSearch"],I1(i));const o=d(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],w1(l));const u=d(n,["urlContext"]);u!=null&&y(e,["urlContext"],u);const f=d(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=d(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var to;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(to||(to={}));class Au{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O1 extends ao{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Au(to.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=NE(this.apiClient,e),i=t._url,o=me("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,m=f.requests,h=[];for(const v of m){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=S,T.request=I}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=c1(this.apiClient,e);return f=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>tm(v))}else{const h=NE(this.apiClient,e);return f=me("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>gf(v))}}async createEmbeddingsInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=d1(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>gf(m))}}async get(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=C1(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>tm(v))}else{const h=A1(this.apiClient,e);return f=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>gf(v))}}async cancel(e){var t,i,o,l;let u="",f={};if(this.apiClient.isVertexAI()){const m=r1(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=s1(this.apiClient,e);u=me("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=D1(e);return f=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=P1(v),S=new wE;return Object.assign(S,T),S})}else{const h=x1(e);return f=me("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=k1(v),S=new wE;return Object.assign(S,T),S})}}async delete(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=p1(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>g1(v))}else{const h=h1(this.apiClient,e);return f=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>m1(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&y(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ME(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>oN(l))),y(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&y(e,["role"],i),e}function z1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&y(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let v=Gn(u);Array.isArray(v)&&(v=v.map(T=>ME(T))),y(e,["contents"],v)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&y(e,["systemInstruction"],ME(rn(f)));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(T=>aN(T))),y(e,["tools"],v)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&y(e,["toolConfig"],h),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function B1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&y(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=Gn(u);Array.isArray(T)&&(T=T.map(S=>S)),y(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&y(e,["systemInstruction"],rn(f));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>lN(S))),y(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&y(e,["toolConfig"],h);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&y(e,["encryption_spec","kmsKeyName"],v),t}function H1(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["model"],DS(n,i));const o=d(e,["config"]);return o!=null&&z1(o,t),t}function F1(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["model"],DS(n,i));const o=d(e,["config"]);return o!=null&&B1(o,t),t}function G1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],ps(n,i)),t}function K1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],ps(n,i)),t}function J1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function Y1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function X1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $1(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&y(e,["description"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&y(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&y(e,["responseJsonSchema"],f),e}function W1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],ps(n,i)),t}function Q1(n,e){const t={},i=d(e,["name"]);return i!=null&&y(t,["_url","name"],ps(n,i)),t}function Z1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function j1(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&y(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function eN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),t}function tN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),t}function nN(n){const e={},t=d(n,["config"]);return t!=null&&eN(t,e),e}function iN(n){const e={},t=d(n,["config"]);return t!=null&&tN(t,e),e}function sN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["cachedContents"],l)}return e}function rN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["cachedContents"],l)}return e}function oN(n){const e={},t=d(n,["videoMetadata"]);t!=null&&y(e,["videoMetadata"],t);const i=d(n,["thought"]);i!=null&&y(e,["thought"],i);const o=d(n,["inlineData"]);o!=null&&y(e,["inlineData"],q1(o));const l=d(n,["fileData"]);l!=null&&y(e,["fileData"],X1(l));const u=d(n,["thoughtSignature"]);u!=null&&y(e,["thoughtSignature"],u);const f=d(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=d(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const h=d(n,["executableCode"]);h!=null&&y(e,["executableCode"],h);const v=d(n,["functionResponse"]);v!=null&&y(e,["functionResponse"],v);const T=d(n,["text"]);return T!=null&&y(e,["text"],T),e}function aN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["functionDeclarations"],h)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&y(e,["googleSearch"],j1(i));const o=d(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],Z1(l));const u=d(n,["urlContext"]);u!=null&&y(e,["urlContext"],u);const f=d(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=d(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}function lN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>$1(S))),y(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&y(e,["retrieval"],i);const o=d(n,["googleSearch"]);o!=null&&y(e,["googleSearch"],o);const l=d(n,["googleSearchRetrieval"]);l!=null&&y(e,["googleSearchRetrieval"],l);const u=d(n,["enterpriseWebSearch"]);u!=null&&y(e,["enterpriseWebSearch"],u);const f=d(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=d(n,["urlContext"]);m!=null&&y(e,["urlContext"],m);const h=d(n,["computerUse"]);h!=null&&y(e,["computerUse"],h);const v=d(n,["codeExecution"]);return v!=null&&y(e,["codeExecution"],v),e}function uN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),t}function cN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),t}function fN(n,e){const t={},i=d(e,["name"]);i!=null&&y(t,["_url","name"],ps(n,i));const o=d(e,["config"]);return o!=null&&uN(o,t),t}function dN(n,e){const t={},i=d(e,["name"]);i!=null&&y(t,["_url","name"],ps(n,i));const o=d(e,["config"]);return o!=null&&cN(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hN extends ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Au(to.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=F1(this.apiClient,e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=H1(this.apiClient,e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=Q1(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=W1(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=K1(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Y1(v),S=new AE;return Object.assign(S,T),S})}else{const h=G1(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=J1(v),S=new AE;return Object.assign(S,T),S})}}async update(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=dN(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=fN(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=iN(e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rN(v),S=new CE;return Object.assign(S,T),S})}else{const h=nN(e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sN(v),S=new CE;return Object.assign(S,T),S})}}}function xE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(n){return this instanceof ut?(this.v=n,this):new ut(n)}function ma(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(k){return Promise.resolve(k).then(I,T)}}function f(I,k){i[I]&&(o[I]=function(O){return new Promise(function(z,W){l.push([I,O,z,W])>1||m(I,O)})},k&&(o[I]=k(o[I])))}function m(I,k){try{h(i[I](k))}catch(O){S(l[0][3],O)}}function h(I){I.value instanceof ut?Promise.resolve(I.value.v).then(v,T):S(l[0][2],I)}function v(I){m("next",I)}function T(I){m("throw",I)}function S(I,k){I(k),l.shift(),l.length&&m(l[0][0],l[0][1])}}function nu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof xE=="function"?xE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(f,m){u=n[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:KS(t)}function KS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function mN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function DE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let l=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),l&&!KS(n[i])&&(l=!1),i++;l?e.push(...o):e.pop()}return e}class gN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new yN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class yN{constructor(e,t,i,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),mN(l)}async sendMessage(e){var t;await this.sendPromise;const i=rn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const m=await o,h=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(T))!==null&&f!==void 0?f:[]);const I=h?[h]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=rn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?DE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return ma(this,arguments,function*(){var u,f,m,h;const v=[];try{for(var T=!0,S=nu(e),I;I=yield ut(S.next()),u=I.done,!u;T=!0){h=I.value,T=!1;const k=h;if(pN(k)){const O=(o=(i=k.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;O!==void 0&&v.push(O)}yield yield ut(k)}}catch(k){f={error:k}}finally{try{!T&&!u&&(m=S.return)&&(yield ut(m.call(S)))}finally{if(f)throw f.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...DE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class td extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,td.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _N(n){const e={},t=d(n,["file"]);return t!=null&&y(e,["file"],t),e}function vN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function TN(n){const e={},t=d(n,["name"]);return t!=null&&y(e,["_url","file"],OS(t)),e}function EN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function SN(n){const e={},t=d(n,["name"]);return t!=null&&y(e,["_url","file"],OS(t)),e}function AN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),t}function CN(n){const e={},t=d(n,["config"]);return t!=null&&AN(t,e),e}function wN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IN extends ao{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Au(to.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CN(e);return l=me("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=wN(m),v=new Lb;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_N(e);return l=me("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=vN(m),v=new Ob;return Object.assign(v,h),v})}}async get(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SN(e);return l=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=TN(e);return l=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=EN(m),v=new qb;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yf(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&y(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function RN(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>HN(l))),y(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&y(e,["role"],i),e}function bN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function NN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&y(e,["description"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&y(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&y(e,["responseJsonSchema"],f),e}function MN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=d(n,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const o=d(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const u=d(n,["frequencyPenalty"]);u!=null&&y(e,["frequencyPenalty"],u);const f=d(n,["logprobs"]);f!=null&&y(e,["logprobs"],f);const m=d(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const h=d(n,["mediaResolution"]);h!=null&&y(e,["mediaResolution"],h);const v=d(n,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=d(n,["responseJsonSchema"]);T!=null&&y(e,["responseJsonSchema"],T);const S=d(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const I=d(n,["responseMimeType"]);I!=null&&y(e,["responseMimeType"],I);const k=d(n,["responseModalities"]);k!=null&&y(e,["responseModalities"],k);const O=d(n,["responseSchema"]);O!=null&&y(e,["responseSchema"],O);const z=d(n,["routingConfig"]);z!=null&&y(e,["routingConfig"],z);const W=d(n,["seed"]);W!=null&&y(e,["seed"],W);const $=d(n,["speechConfig"]);$!=null&&y(e,["speechConfig"],JS($));const J=d(n,["stopSequences"]);J!=null&&y(e,["stopSequences"],J);const Z=d(n,["temperature"]);Z!=null&&y(e,["temperature"],Z);const ue=d(n,["thinkingConfig"]);ue!=null&&y(e,["thinkingConfig"],ue);const le=d(n,["topK"]);le!=null&&y(e,["topK"],le);const D=d(n,["topP"]);if(D!=null&&y(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function DN(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&y(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function kN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","speechConfig"],Km(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&y(e,["setup","systemInstruction"],RN(rn(k)));const O=d(n,["tools"]);if(e!==void 0&&O!=null){let le=xa(O);Array.isArray(le)&&(le=le.map(D=>GN(Ma(D)))),y(e,["setup","tools"],le)}const z=d(n,["sessionResumption"]);e!==void 0&&z!=null&&y(e,["setup","sessionResumption"],FN(z));const W=d(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&y(e,["setup","inputAudioTranscription"],W);const $=d(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&y(e,["setup","outputAudioTranscription"],$);const J=d(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&y(e,["setup","realtimeInputConfig"],J);const Z=d(n,["contextWindowCompression"]);e!==void 0&&Z!=null&&y(e,["setup","contextWindowCompression"],Z);const ue=d(n,["proactivity"]);return e!==void 0&&ue!=null&&y(e,["setup","proactivity"],ue),t}function PN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],MN(i));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","speechConfig"],JS(Km(T)));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&y(e,["setup","systemInstruction"],rn(k));const O=d(n,["tools"]);if(e!==void 0&&O!=null){let le=xa(O);Array.isArray(le)&&(le=le.map(D=>KN(Ma(D)))),y(e,["setup","tools"],le)}const z=d(n,["sessionResumption"]);e!==void 0&&z!=null&&y(e,["setup","sessionResumption"],z);const W=d(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&y(e,["setup","inputAudioTranscription"],W);const $=d(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&y(e,["setup","outputAudioTranscription"],$);const J=d(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&y(e,["setup","realtimeInputConfig"],J);const Z=d(n,["contextWindowCompression"]);e!==void 0&&Z!=null&&y(e,["setup","contextWindowCompression"],Z);const ue=d(n,["proactivity"]);return e!==void 0&&ue!=null&&y(e,["setup","proactivity"],ue),t}function VN(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["setup","model"],Ye(n,i));const o=d(e,["config"]);return o!=null&&y(t,["config"],kN(o,t)),t}function UN(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["setup","model"],Ye(n,i));const o=d(e,["config"]);return o!=null&&y(t,["config"],PN(o,t)),t}function LN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&y(e,["musicGenerationConfig"],t),e}function ON(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["weightedPrompts"],i)}return e}function qN(n){const e={},t=d(n,["media"]);if(t!=null){let h=kS(t);Array.isArray(h)&&(h=h.map(v=>yf(v))),y(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&y(e,["audio"],yf(VS(i)));const o=d(n,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&y(e,["video"],yf(PS(l)));const u=d(n,["text"]);u!=null&&y(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&y(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function zN(n){const e={},t=d(n,["media"]);if(t!=null){let h=kS(t);Array.isArray(h)&&(h=h.map(v=>v)),y(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&y(e,["audio"],VS(i));const o=d(n,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&y(e,["video"],PS(l));const u=d(n,["text"]);u!=null&&y(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&y(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function BN(n){const e={},t=d(n,["setupComplete"]);t!=null&&y(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&y(e,["serverContent"],i);const o=d(n,["toolCall"]);o!=null&&y(e,["toolCall"],o);const l=d(n,["toolCallCancellation"]);l!=null&&y(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&y(e,["usageMetadata"],JN(u));const f=d(n,["goAway"]);f!=null&&y(e,["goAway"],f);const m=d(n,["sessionResumptionUpdate"]);return m!=null&&y(e,["sessionResumptionUpdate"],m),e}function HN(n){const e={},t=d(n,["videoMetadata"]);t!=null&&y(e,["videoMetadata"],t);const i=d(n,["thought"]);i!=null&&y(e,["thought"],i);const o=d(n,["inlineData"]);o!=null&&y(e,["inlineData"],yf(o));const l=d(n,["fileData"]);l!=null&&y(e,["fileData"],bN(l));const u=d(n,["thoughtSignature"]);u!=null&&y(e,["thoughtSignature"],u);const f=d(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=d(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const h=d(n,["executableCode"]);h!=null&&y(e,["executableCode"],h);const v=d(n,["functionResponse"]);v!=null&&y(e,["functionResponse"],v);const T=d(n,["text"]);return T!=null&&y(e,["text"],T),e}function FN(n){const e={},t=d(n,["handle"]);if(t!=null&&y(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function JS(n){const e={},t=d(n,["voiceConfig"]);if(t!=null&&y(e,["voiceConfig"],t),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=d(n,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function GN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["functionDeclarations"],h)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&y(e,["googleSearch"],DN(i));const o=d(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],xN(l));const u=d(n,["urlContext"]);u!=null&&y(e,["urlContext"],u);const f=d(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=d(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}function KN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>NN(S))),y(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&y(e,["retrieval"],i);const o=d(n,["googleSearch"]);o!=null&&y(e,["googleSearch"],o);const l=d(n,["googleSearchRetrieval"]);l!=null&&y(e,["googleSearchRetrieval"],l);const u=d(n,["enterpriseWebSearch"]);u!=null&&y(e,["enterpriseWebSearch"],u);const f=d(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=d(n,["urlContext"]);m!=null&&y(e,["urlContext"],m);const h=d(n,["computerUse"]);h!=null&&y(e,["computerUse"],h);const v=d(n,["codeExecution"]);return v!=null&&y(e,["codeExecution"],v),e}function JN(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&y(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const o=d(n,["candidatesTokenCount"]);o!=null&&y(e,["responseTokenCount"],o);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&y(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&y(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&y(e,["totalTokenCount"],f);const m=d(n,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(k=>k)),y(e,["promptTokensDetails"],I)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(k=>k)),y(e,["cacheTokensDetails"],I)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(k=>k)),y(e,["responseTokensDetails"],I)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(k=>k)),y(e,["toolUsePromptTokensDetails"],I)}const S=d(n,["trafficType"]);return S!=null&&y(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&y(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function XN(n){const e={},t=d(n,["content"]);t!=null&&y(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],$N(i));const o=d(n,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&y(e,["finishReason"],l);const u=d(n,["urlContextMetadata"]);u!=null&&y(e,["urlContextMetadata"],u);const f=d(n,["avgLogprobs"]);f!=null&&y(e,["avgLogprobs"],f);const m=d(n,["groundingMetadata"]);m!=null&&y(e,["groundingMetadata"],m);const h=d(n,["index"]);h!=null&&y(e,["index"],h);const v=d(n,["logprobsResult"]);v!=null&&y(e,["logprobsResult"],v);const T=d(n,["safetyRatings"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>I)),y(e,["safetyRatings"],S)}return e}function $N(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["citations"],i)}return e}function WN(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let l=Gn(o);Array.isArray(l)&&(l=l.map(u=>u)),y(t,["contents"],l)}return t}function QN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["tokensInfo"],o)}return e}function ZN(n){const e={},t=d(n,["values"]);t!=null&&y(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&y(e,["statistics"],jN(i)),e}function jN(n){const e={},t=d(n,["truncated"]);t!=null&&y(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function nd(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>sx(l))),y(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&y(e,["role"],i),e}function eM(n){const e={},t=d(n,["controlType"]);t!=null&&y(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function tM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nM(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],rn(i));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>QS(f))),y(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&y(e,["generationConfig"],KM(l)),t}function iM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let u=Gn(o);Array.isArray(u)&&(u=u.map(f=>nd(f))),y(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&tM(l),t}function sM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let u=Gn(o);Array.isArray(u)&&(u=u.map(f=>f)),y(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&nM(l,t),t}function rM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const o=d(n,["cachedContentTokenCount"]);return o!=null&&y(e,["cachedContentTokenCount"],o),e}function oM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function aM(n,e){const t={},i=d(e,["model"]);return i!=null&&y(t,["_url","name"],Ye(n,i)),t}function lM(n,e){const t={},i=d(e,["model"]);return i!=null&&y(t,["_url","name"],Ye(n,i)),t}function uM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function cM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function fM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&y(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&y(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const I=d(n,["language"]);e!==void 0&&I!=null&&y(e,["parameters","language"],I);const k=d(n,["outputMimeType"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","mimeType"],k);const O=d(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&y(e,["parameters","outputOptions","compressionQuality"],O);const z=d(n,["addWatermark"]);e!==void 0&&z!=null&&y(e,["parameters","addWatermark"],z);const W=d(n,["labels"]);e!==void 0&&W!=null&&y(e,["labels"],W);const $=d(n,["editMode"]);e!==void 0&&$!=null&&y(e,["parameters","editMode"],$);const J=d(n,["baseSteps"]);return e!==void 0&&J!=null&&y(e,["parameters","editConfig","baseSteps"],J),t}function dM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>cx(m))),y(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&fM(u,t),t}function hM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>id(l))),y(e,["generatedImages"],o)}return e}function pM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function mM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&y(e,["instances[]","title"],o);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&y(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&y(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&y(e,["parameters","autoTruncate"],f),t}function gM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let f=Hm(n,o);Array.isArray(f)&&(f=f.map(m=>m)),y(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&pM(l,t);const u=d(e,["model"]);return u!==void 0&&y(t,["requests[]","model"],Ye(n,u)),t}function yM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let u=Hm(n,o);Array.isArray(u)&&(u=u.map(f=>f)),y(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&mM(l,t),t}function _M(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&y(e,["metadata"],o),e}function vM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>ZN(u))),y(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&y(e,["metadata"],o),e}function TM(n){const e={},t=d(n,["endpoint"]);t!=null&&y(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function EM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function SM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&y(e,["description"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&y(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&y(e,["responseJsonSchema"],f),e}function AM(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],nd(rn(o)));const l=d(e,["temperature"]);l!=null&&y(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&y(i,["topP"],u);const f=d(e,["topK"]);f!=null&&y(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&y(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const I=d(e,["presencePenalty"]);I!=null&&y(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&y(i,["frequencyPenalty"],k);const O=d(e,["seed"]);O!=null&&y(i,["seed"],O);const z=d(e,["responseMimeType"]);z!=null&&y(i,["responseMimeType"],z);const W=d(e,["responseSchema"]);W!=null&&y(i,["responseSchema"],Fm(W));const $=d(e,["responseJsonSchema"]);if($!=null&&y(i,["responseJsonSchema"],$),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=d(e,["safetySettings"]);if(t!==void 0&&J!=null){let V=J;Array.isArray(V)&&(V=V.map(x=>fx(x))),y(t,["safetySettings"],V)}const Z=d(e,["tools"]);if(t!==void 0&&Z!=null){let V=xa(Z);Array.isArray(V)&&(V=V.map(x=>yx(Ma(x)))),y(t,["tools"],V)}const ue=d(e,["toolConfig"]);if(t!==void 0&&ue!=null&&y(t,["toolConfig"],ue),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);t!==void 0&&le!=null&&y(t,["cachedContent"],ps(n,le));const D=d(e,["responseModalities"]);D!=null&&y(i,["responseModalities"],D);const b=d(e,["mediaResolution"]);b!=null&&y(i,["mediaResolution"],b);const N=d(e,["speechConfig"]);if(N!=null&&y(i,["speechConfig"],Gm(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=d(e,["thinkingConfig"]);P!=null&&y(i,["thinkingConfig"],P);const M=d(e,["imageConfig"]);return M!=null&&y(i,["imageConfig"],M),i}function CM(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],rn(o));const l=d(e,["temperature"]);l!=null&&y(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&y(i,["topP"],u);const f=d(e,["topK"]);f!=null&&y(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&y(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&y(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const I=d(e,["presencePenalty"]);I!=null&&y(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&y(i,["frequencyPenalty"],k);const O=d(e,["seed"]);O!=null&&y(i,["seed"],O);const z=d(e,["responseMimeType"]);z!=null&&y(i,["responseMimeType"],z);const W=d(e,["responseSchema"]);W!=null&&y(i,["responseSchema"],Fm(W));const $=d(e,["responseJsonSchema"]);$!=null&&y(i,["responseJsonSchema"],$);const J=d(e,["routingConfig"]);J!=null&&y(i,["routingConfig"],J);const Z=d(e,["modelSelectionConfig"]);Z!=null&&y(i,["modelConfig"],Z);const ue=d(e,["safetySettings"]);if(t!==void 0&&ue!=null){let X=ue;Array.isArray(X)&&(X=X.map(oe=>oe)),y(t,["safetySettings"],X)}const le=d(e,["tools"]);if(t!==void 0&&le!=null){let X=xa(le);Array.isArray(X)&&(X=X.map(oe=>QS(Ma(oe)))),y(t,["tools"],X)}const D=d(e,["toolConfig"]);t!==void 0&&D!=null&&y(t,["toolConfig"],D);const b=d(e,["labels"]);t!==void 0&&b!=null&&y(t,["labels"],b);const N=d(e,["cachedContent"]);t!==void 0&&N!=null&&y(t,["cachedContent"],ps(n,N));const P=d(e,["responseModalities"]);P!=null&&y(i,["responseModalities"],P);const M=d(e,["mediaResolution"]);M!=null&&y(i,["mediaResolution"],M);const V=d(e,["speechConfig"]);V!=null&&y(i,["speechConfig"],WS(Gm(V)));const x=d(e,["audioTimestamp"]);x!=null&&y(i,["audioTimestamp"],x);const Se=d(e,["thinkingConfig"]);Se!=null&&y(i,["thinkingConfig"],Se);const we=d(e,["imageConfig"]);return we!=null&&y(i,["imageConfig"],we),i}function kE(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let u=Gn(o);Array.isArray(u)&&(u=u.map(f=>nd(f))),y(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&y(t,["generationConfig"],AM(n,l,t)),t}function PE(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["contents"]);if(o!=null){let u=Gn(o);Array.isArray(u)&&(u=u.map(f=>f)),y(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&y(t,["generationConfig"],CM(n,l,t)),t}function VE(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>XN(h))),y(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&y(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function UE(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["candidates"],h)}const o=d(n,["createTime"]);o!=null&&y(e,["createTime"],o);const l=d(n,["modelVersion"]);l!=null&&y(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&y(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&y(e,["responseId"],f);const m=d(n,["usageMetadata"]);return m!=null&&y(e,["usageMetadata"],m),e}function wM(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&y(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&y(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const m=d(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&y(e,["parameters","includeSafetyAttributes"],m);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const v=d(n,["language"]);e!==void 0&&v!=null&&y(e,["parameters","language"],v);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=d(n,["imageSize"]);if(e!==void 0&&I!=null&&y(e,["parameters","sampleImageSize"],I),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function IM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&y(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&y(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const I=d(n,["language"]);e!==void 0&&I!=null&&y(e,["parameters","language"],I);const k=d(n,["outputMimeType"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","mimeType"],k);const O=d(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&y(e,["parameters","outputOptions","compressionQuality"],O);const z=d(n,["addWatermark"]);e!==void 0&&z!=null&&y(e,["parameters","addWatermark"],z);const W=d(n,["labels"]);e!==void 0&&W!=null&&y(e,["labels"],W);const $=d(n,["imageSize"]);e!==void 0&&$!=null&&y(e,["parameters","sampleImageSize"],$);const J=d(n,["enhancePrompt"]);return e!==void 0&&J!=null&&y(e,["parameters","enhancePrompt"],J),t}function RM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&wM(l,t),t}function bM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&IM(l,t),t}function NM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>BM(u))),y(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&y(e,["positivePromptSafetyAttributes"],XS(o)),e}function MM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>id(u))),y(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&y(e,["positivePromptSafetyAttributes"],$S(o)),e}function xM(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&y(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&y(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(n,["negativePrompt"]);e!==void 0&&m!=null&&y(e,["parameters","negativePrompt"],m);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&y(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&y(e,["instances[0]","lastFrame"],sd(v));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>Mx(I))),y(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function DM(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=d(n,["fps"]);e!==void 0&&l!=null&&y(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&y(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const m=d(n,["aspectRatio"]);e!==void 0&&m!=null&&y(e,["parameters","aspectRatio"],m);const h=d(n,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&y(e,["parameters","pubsubTopic"],T);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","negativePrompt"],S);const I=d(n,["enhancePrompt"]);e!==void 0&&I!=null&&y(e,["parameters","enhancePrompt"],I);const k=d(n,["generateAudio"]);e!==void 0&&k!=null&&y(e,["parameters","generateAudio"],k);const O=d(n,["lastFrame"]);e!==void 0&&O!=null&&y(e,["instances[0]","lastFrame"],oi(O));const z=d(n,["referenceImages"]);if(e!==void 0&&z!=null){let J=z;Array.isArray(J)&&(J=J.map(Z=>xx(Z))),y(e,["instances[0]","referenceImages"],J)}const W=d(n,["mask"]);e!==void 0&&W!=null&&y(e,["instances[0]","mask"],Nx(W));const $=d(n,["compressionQuality"]);return e!==void 0&&$!=null&&y(e,["parameters","compressionQuality"],$),t}function kM(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=d(n,["done"]);o!=null&&y(e,["done"],o);const l=d(n,["error"]);l!=null&&y(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&y(e,["response"],LM(u)),e}function PM(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["metadata"]);i!=null&&y(e,["metadata"],i);const o=d(n,["done"]);o!=null&&y(e,["done"],o);const l=d(n,["error"]);l!=null&&y(e,["error"],l);const u=d(n,["response"]);return u!=null&&y(e,["response"],OM(u)),e}function VM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&y(t,["instances[0]","image"],sd(l));const u=d(e,["video"]);u!=null&&y(t,["instances[0]","video"],ZS(u));const f=d(e,["source"]);f!=null&&qM(f,t);const m=d(e,["config"]);return m!=null&&xM(m,t),t}function UM(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["prompt"]);o!=null&&y(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&y(t,["instances[0]","image"],oi(l));const u=d(e,["video"]);u!=null&&y(t,["instances[0]","video"],jS(u));const f=d(e,["source"]);f!=null&&zM(f,t);const m=d(e,["config"]);return m!=null&&DM(m,t),t}function LM(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>FM(u))),y(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function OM(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>GM(u))),y(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function qM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],sd(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],ZS(l)),t}function zM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],oi(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],jS(l)),t}function BM(n){const e={},t=d(n,["_self"]);t!=null&&y(e,["image"],WM(t));const i=d(n,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const o=d(n,["_self"]);return o!=null&&y(e,["safetyAttributes"],XS(o)),e}function id(n){const e={},t=d(n,["_self"]);t!=null&&y(e,["image"],YS(t));const i=d(n,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const o=d(n,["_self"]);o!=null&&y(e,["safetyAttributes"],$S(o));const l=d(n,["prompt"]);return l!=null&&y(e,["enhancedPrompt"],l),e}function HM(n){const e={},t=d(n,["_self"]);t!=null&&y(e,["mask"],YS(t));const i=d(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["labels"],o)}return e}function FM(n){const e={},t=d(n,["video"]);return t!=null&&y(e,["video"],Rx(t)),e}function GM(n){const e={},t=d(n,["_self"]);return t!=null&&y(e,["video"],bx(t)),e}function KM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=d(n,["audioTimestamp"]);i!=null&&y(e,["audioTimestamp"],i);const o=d(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const u=d(n,["frequencyPenalty"]);u!=null&&y(e,["frequencyPenalty"],u);const f=d(n,["logprobs"]);f!=null&&y(e,["logprobs"],f);const m=d(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const h=d(n,["mediaResolution"]);h!=null&&y(e,["mediaResolution"],h);const v=d(n,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=d(n,["responseJsonSchema"]);T!=null&&y(e,["responseJsonSchema"],T);const S=d(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const I=d(n,["responseMimeType"]);I!=null&&y(e,["responseMimeType"],I);const k=d(n,["responseModalities"]);k!=null&&y(e,["responseModalities"],k);const O=d(n,["responseSchema"]);O!=null&&y(e,["responseSchema"],O);const z=d(n,["routingConfig"]);z!=null&&y(e,["routingConfig"],z);const W=d(n,["seed"]);W!=null&&y(e,["seed"],W);const $=d(n,["speechConfig"]);$!=null&&y(e,["speechConfig"],WS($));const J=d(n,["stopSequences"]);J!=null&&y(e,["stopSequences"],J);const Z=d(n,["temperature"]);Z!=null&&y(e,["temperature"],Z);const ue=d(n,["thinkingConfig"]);ue!=null&&y(e,["thinkingConfig"],ue);const le=d(n,["topK"]);le!=null&&y(e,["topK"],le);const D=d(n,["topP"]);if(D!=null&&y(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function JM(n,e){const t={},i=d(e,["model"]);return i!=null&&y(t,["_url","name"],Ye(n,i)),t}function YM(n,e){const t={},i=d(e,["model"]);return i!=null&&y(t,["_url","name"],Ye(n,i)),t}function XM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function $M(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&y(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function WM(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&y(e,["imageBytes"],pr(t));const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function YS(n){const e={},t=d(n,["gcsUri"]);t!=null&&y(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],pr(i));const o=d(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function sd(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&y(e,["bytesBase64Encoded"],pr(t));const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function oi(n){const e={},t=d(n,["gcsUri"]);t!=null&&y(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],pr(i));const o=d(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function QM(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&y(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&y(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&y(t,["_url","models_url"],qS(n,f)),i}function ZM(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&y(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&y(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&y(t,["_url","models_url"],qS(n,f)),i}function jM(n,e){const t={},i=d(e,["config"]);return i!=null&&QM(n,i,t),t}function ex(n,e){const t={},i=d(e,["config"]);return i!=null&&ZM(n,i,t),t}function tx(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let l=zS(o);Array.isArray(l)&&(l=l.map(u=>nm(u))),y(e,["models"],l)}return e}function nx(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let l=zS(o);Array.isArray(l)&&(l=l.map(u=>im(u))),y(e,["models"],l)}return e}function ix(n){const e={},t=d(n,["maskMode"]);t!=null&&y(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const o=d(n,["maskDilation"]);return o!=null&&y(e,["dilation"],o),e}function nm(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["displayName"]);i!=null&&y(e,["displayName"],i);const o=d(n,["description"]);o!=null&&y(e,["description"],o);const l=d(n,["version"]);l!=null&&y(e,["version"],l);const u=d(n,["_self"]);u!=null&&y(e,["tunedModelInfo"],_x(u));const f=d(n,["inputTokenLimit"]);f!=null&&y(e,["inputTokenLimit"],f);const m=d(n,["outputTokenLimit"]);m!=null&&y(e,["outputTokenLimit"],m);const h=d(n,["supportedGenerationMethods"]);return h!=null&&y(e,["supportedActions"],h),e}function im(n){const e={},t=d(n,["name"]);t!=null&&y(e,["name"],t);const i=d(n,["displayName"]);i!=null&&y(e,["displayName"],i);const o=d(n,["description"]);o!=null&&y(e,["description"],o);const l=d(n,["versionId"]);l!=null&&y(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>TM(S))),y(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&y(e,["labels"],f);const m=d(n,["_self"]);m!=null&&y(e,["tunedModelInfo"],vx(m));const h=d(n,["defaultCheckpointId"]);h!=null&&y(e,["defaultCheckpointId"],h);const v=d(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),y(e,["checkpoints"],T)}return e}function sx(n){const e={},t=d(n,["videoMetadata"]);t!=null&&y(e,["videoMetadata"],t);const i=d(n,["thought"]);i!=null&&y(e,["thought"],i);const o=d(n,["inlineData"]);o!=null&&y(e,["inlineData"],YN(o));const l=d(n,["fileData"]);l!=null&&y(e,["fileData"],EM(l));const u=d(n,["thoughtSignature"]);u!=null&&y(e,["thoughtSignature"],u);const f=d(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=d(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const h=d(n,["executableCode"]);h!=null&&y(e,["executableCode"],h);const v=d(n,["functionResponse"]);v!=null&&y(e,["functionResponse"],v);const T=d(n,["text"]);return T!=null&&y(e,["text"],T),e}function rx(n){const e={},t=d(n,["productImage"]);return t!=null&&y(e,["image"],oi(t)),e}function ox(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&y(e,["parameters","editConfig","baseSteps"],o);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&y(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&y(e,["parameters","addWatermark"],h);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const I=d(n,["labels"]);return e!==void 0&&I!=null&&y(e,["labels"],I),t}function ax(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["source"]);o!=null&&ux(o,t);const l=d(e,["config"]);return l!=null&&ox(l,t),t}function lx(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>id(o))),y(e,["generatedImages"],i)}return e}function ux(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=d(n,["personImage"]);e!==void 0&&o!=null&&y(e,["instances[0]","personImage","image"],oi(o));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>rx(f))),y(e,["instances[0]","productImages"],u)}return t}function cx(n){const e={},t=d(n,["referenceImage"]);t!=null&&y(e,["referenceImage"],oi(t));const i=d(n,["referenceId"]);i!=null&&y(e,["referenceId"],i);const o=d(n,["referenceType"]);o!=null&&y(e,["referenceType"],o);const l=d(n,["maskImageConfig"]);l!=null&&y(e,["maskImageConfig"],ix(l));const u=d(n,["controlImageConfig"]);u!=null&&y(e,["controlImageConfig"],eM(u));const f=d(n,["styleImageConfig"]);f!=null&&y(e,["styleImageConfig"],f);const m=d(n,["subjectImageConfig"]);return m!=null&&y(e,["subjectImageConfig"],m),e}function XS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&y(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function $S(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&y(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function fx(n){const e={};if(d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=d(n,["category"]);t!=null&&y(e,["category"],t);const i=d(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function dx(n){const e={},t=d(n,["image"]);return t!=null&&y(e,["image"],oi(t)),e}function hx(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&y(e,["parameters","maxPredictions"],o);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&y(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&y(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&y(e,["parameters","binaryColorThreshold"],f);const m=d(n,["labels"]);return e!==void 0&&m!=null&&y(e,["labels"],m),t}function px(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["source"]);o!=null&&gx(o,t);const l=d(e,["config"]);return l!=null&&hx(l,t),t}function mx(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>HM(o))),y(e,["generatedMasks"],i)}return e}function gx(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],oi(o));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&y(e,["instances[0]","scribble"],dx(l)),t}function WS(n){const e={},t=d(n,["voiceConfig"]);if(t!=null&&y(e,["voiceConfig"],t),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=d(n,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function yx(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["functionDeclarations"],h)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&y(e,["googleSearch"],$M(i));const o=d(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],XM(l));const u=d(n,["urlContext"]);u!=null&&y(e,["urlContext"],u);const f=d(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=d(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}function QS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>SM(S))),y(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&y(e,["retrieval"],i);const o=d(n,["googleSearch"]);o!=null&&y(e,["googleSearch"],o);const l=d(n,["googleSearchRetrieval"]);l!=null&&y(e,["googleSearchRetrieval"],l);const u=d(n,["enterpriseWebSearch"]);u!=null&&y(e,["enterpriseWebSearch"],u);const f=d(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=d(n,["urlContext"]);m!=null&&y(e,["urlContext"],m);const h=d(n,["computerUse"]);h!=null&&y(e,["computerUse"],h);const v=d(n,["codeExecution"]);return v!=null&&y(e,["codeExecution"],v),e}function _x(n){const e={},t=d(n,["baseModel"]);t!=null&&y(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&y(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function vx(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&y(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&y(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function Tx(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),t}function Ex(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),t}function Sx(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","name"],Ye(n,i));const o=d(e,["config"]);return o!=null&&Tx(o,t),t}function Ax(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["config"]);return o!=null&&Ex(o,t),t}function Cx(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=d(n,["includeRaiReason"]);e!==void 0&&o!=null&&y(e,["parameters","includeRaiReason"],o);const l=d(n,["outputMimeType"]);e!==void 0&&l!=null&&y(e,["parameters","outputOptions","mimeType"],l);const u=d(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&y(e,["parameters","outputOptions","compressionQuality"],u);const f=d(n,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const m=d(n,["imagePreservationFactor"]);e!==void 0&&m!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const h=d(n,["labels"]);e!==void 0&&h!=null&&y(e,["labels"],h);const v=d(n,["numberOfImages"]);e!==void 0&&v!=null&&y(e,["parameters","sampleCount"],v);const T=d(n,["mode"]);return e!==void 0&&T!=null&&y(e,["parameters","mode"],T),t}function wx(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["_url","model"],Ye(n,i));const o=d(e,["image"]);o!=null&&y(t,["instances[0]","image"],oi(o));const l=d(e,["upscaleFactor"]);l!=null&&y(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&Cx(u,t),t}function Ix(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>id(l))),y(e,["generatedImages"],o)}return e}function Rx(n){const e={},t=d(n,["uri"]);t!=null&&y(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],pr(i));const o=d(n,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function bx(n){const e={},t=d(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],pr(i));const o=d(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Nx(n){const e={},t=d(n,["image"]);t!=null&&y(e,["_self"],oi(t));const i=d(n,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function Mx(n){const e={},t=d(n,["image"]);t!=null&&y(e,["image"],sd(t));const i=d(n,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function xx(n){const e={},t=d(n,["image"]);t!=null&&y(e,["image"],oi(t));const i=d(n,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function ZS(n){const e={},t=d(n,["uri"]);t!=null&&y(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&y(e,["encodedVideo"],pr(i));const o=d(n,["mimeType"]);return o!=null&&y(e,["encoding"],o),e}function jS(n){const e={},t=d(n,["uri"]);t!=null&&y(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],pr(i));const o=d(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dx="Content-Type",kx="X-Server-Timeout",Px="User-Agent",sm="x-goog-api-client",Vx="1.26.0",Ux=`google-genai-sdk/${Vx}`,Lx="v1beta1",Ox="v1beta",LE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class qx{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Lx,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Ox,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const u=setTimeout(()=>o.abort(),t.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&zx(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await OE(o),new jp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await OE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ma(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:m}=yield ut(o.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(m,{stream:!0});try{const T=JSON.parse(h);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),I=S.status,k=S.code,O=`got status: ${I}. ${JSON.stringify(T)}`;if(k>=400&&k<600)throw new td({message:O,status:k})}}catch(T){if(T.name==="ApiError")throw T}u+=h;let v=u.match(LE);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ut(new jp(S)),u=u.slice(v[0].length),v=u.match(LE)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=Ux+" "+this.clientOptions.userAgentExtra;return e[Px]=t,e[sm]=t,e[Dx]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))t.append(i,o);e.timeout&&e.timeout>0&&t.append(kx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m=await this.fetchUploadUrl(o,t);return l.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},u=await this.request({path:me("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function OE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new td({message:o,status:t}):new Error(o)}}function zx(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const f=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],v=f[m];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),f[m]=h)}return f}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bx="mcp_used/unknown";let Hx=!1;function eA(n){for(const e of n)if(Fx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Hx}function tA(n){var e;const t=(e=n[sm])!==null&&e!==void 0?e:"";n[sm]=(t+` ${Bx}`).trimStart()}function Fx(n){return n!==null&&typeof n=="object"&&n instanceof Jm}function Gx(n,e=100){return ma(this,arguments,function*(){let i,o=0;for(;o<e;){const l=yield ut(n.listTools({cursor:i}));for(const u of l.tools)yield yield ut(u),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Jm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Jm(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var f=!0,m=(t=void 0,nu(Gx(v))),h;h=await m.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const T=o;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),$b(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Kx(n,e,t){const i=new Bb;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class Jx{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=$x(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const v=new Promise(J=>{h=J}),T=e.callbacks,S=function(){h({})},I=this.apiClient,k={onopen:S,onmessage:J=>{Kx(I,T.onmessage,J)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(J){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(J){}},O=this.webSocketFactory.create(m,Xx(u),k);O.connect(),await v;const $={setup:{model:Ye(this.apiClient,e.model)}};return O.send(JSON.stringify($)),new Yx(O,this.apiClient)}}class Yx{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=ON(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=LN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function Xx(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function $x(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Qx(n,e,t){const i=new zb;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=BN(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class Zx{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Jx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&eA(e.config.tools)&&tA(T);const S=nD(T);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",M="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",M="access_token"),v=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${P}?${M}=${N}`}let I=()=>{};const k=new Promise(N=>{I=N}),O=e.callbacks,z=function(){var N;(N=O==null?void 0:O.onopen)===null||N===void 0||N.call(O),I({})},W=this.apiClient,$={onopen:z,onmessage:N=>{Qx(W,O.onmessage,N)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(N){}},J=this.webSocketFactory.create(v,tD(S),$);J.connect(),await k;let Z=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Z.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();Z=`projects/${N}/locations/${P}/`+Z}let ue={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xf.AUDIO]}:e.config.responseModalities=[xf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const N of le)if(this.isCallableTool(N)){const P=N;D.push(await P.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const b={model:Z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ue=UN(this.apiClient,b):ue=VN(this.apiClient,b),delete ue.config,J.send(JSON.stringify(ue)),new eD(J,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jx={turnComplete:!0};class eD{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Gn(t.turns),e.isVertexAI()||(i=i.map(o=>nd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Wx)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},jx),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:zN(e)}:t={realtimeInput:qN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function tD(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function nD(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qE=10;function zE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ga(u)){o=!0;break}if(!o)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ga(n){return"callTool"in n&&typeof n.callTool=="function"}function iD(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>ga(o)))!==null&&i!==void 0?i:!1}function sD(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!ga(o)))!==null&&i!==void 0?i:!1}function BE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rD extends ao{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,l,u,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!iD(t)||zE(t.config))return await this.generateContentInternal(m);if(sD(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const T=Gn(m.contents),S=(l=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:qE;let I=0;for(;I<S&&(h=await this.generateContentInternal(m),!(!h.functionCalls||h.functionCalls.length===0));){const k=h.candidates[0].content,O=[];for(const z of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(ga(z)){const $=await z.callTool(h.functionCalls);O.push(...$)}I++,v={role:"user",parts:O},m.contents=Gn(m.contents),m.contents.push(k),m.contents.push(v),BE(m.config)&&(T.push(k),T.push(v))}return BE(m.config)&&(h.automaticFunctionCallingHistory=T),h},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),zE(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let l;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Au(to.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,l,u,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>ga(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&eA(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),tA(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,o;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ga(u)){const f=u,m=await f.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var t,i,o;const l=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:qE;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(h,v,T){var S,I;return ma(this,arguments,function*(){for(var k,O,z,W;f<l;){u&&(f++,u=!1);const ue=yield ut(h.processParamsMaybeAddMcpUsage(T)),le=yield ut(h.generateContentStreamInternal(ue)),D=[],b=[];try{for(var $=!0,J=(O=void 0,nu(le)),Z;Z=yield ut(J.next()),k=Z.done,!k;$=!0){W=Z.value,$=!1;const N=W;if(yield yield ut(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){b.push(N.candidates[0].content);for(const P of(I=N.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(f<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const M=yield ut(v.get(P.functionCall.name).callTool([P.functionCall]));D.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){O={error:N}}finally{try{!$&&!k&&(z=J.return)&&(yield ut(z.call(J)))}finally{if(O)throw O.error}}if(D.length>0){u=!0;const N=new $l;N.candidates=[{content:{role:"user",parts:D}}],yield yield ut(N);const P=[];P.push(...b),P.push({role:"user",parts:D});const M=Gn(T.contents).concat(P);T.contents=M}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=PE(this.apiClient,e);return f=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=UE(v),S=new $l;return Object.assign(S,T),S})}else{const h=kE(this.apiClient,e);return f=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=VE(v),S=new $l;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=PE(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return ma(this,arguments,function*(){var S,I,k,O;try{for(var z=!0,W=nu(T),$;$=yield ut(W.next()),S=$.done,!S;z=!0){O=$.value,z=!1;const J=O,Z=UE(yield ut(J.json()));Z.sdkHttpResponse={headers:J.headers};const ue=new $l;Object.assign(ue,Z),yield yield ut(ue)}}catch(J){I={error:J}}finally{try{!z&&!S&&(k=W.return)&&(yield ut(k.call(W)))}finally{if(I)throw I.error}}})})}else{const h=kE(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return ma(this,arguments,function*(){var S,I,k,O;try{for(var z=!0,W=nu(T),$;$=yield ut(W.next()),S=$.done,!S;z=!0){O=$.value,z=!1;const J=O,Z=VE(yield ut(J.json()));Z.sdkHttpResponse={headers:J.headers};const ue=new $l;Object.assign(ue,Z),yield yield ut(ue)}}catch(J){I={error:J}}finally{try{!z&&!S&&(k=W.return)&&(yield ut(k.call(W)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=yM(this.apiClient,e);return f=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=vM(v),S=new yE;return Object.assign(S,T),S})}else{const h=gM(this.apiClient,e);return f=me("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_M(v),S=new yE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=bM(this.apiClient,e);return f=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=MM(v),S=new _E;return Object.assign(S,T),S})}else{const h=RM(this.apiClient,e);return f=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=NM(v),S=new _E;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=dM(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=hM(m),v=new Db;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=wx(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=Ix(m),v=new kb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=ax(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=lx(m),v=new Pb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=px(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=mx(m),v=new Vb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=YM(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>im(v))}else{const h=JM(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>nm(v))}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=ex(this.apiClient,e);return f=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nx(v),S=new vE;return Object.assign(S,T),S})}else{const h=jM(this.apiClient,e);return f=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=tx(v),S=new vE;return Object.assign(S,T),S})}}async update(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=Ax(this.apiClient,e);return f=me("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>im(v))}else{const h=Sx(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>nm(v))}}async delete(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=lM(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=cM(v),S=new TE;return Object.assign(S,T),S})}else{const h=aM(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=uM(v),S=new TE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=sM(this.apiClient,e);return f=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=oM(v),S=new EE;return Object.assign(S,T),S})}else{const h=iM(this.apiClient,e);return f=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rM(v),S=new EE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=WN(this.apiClient,e);return l=me("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=QN(m),v=new Ub;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=UM(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=PM(v),S=new Df;return Object.assign(S,T),S})}else{const h=VM(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const T=kM(v),S=new Df;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oD extends ao{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=Nb(e);return f=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=bb(e);return f=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=Eb(e);return l=me("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aD(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&y(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function lD(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>gD(l))),y(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&y(e,["role"],i),e}function uD(n,e,t){const i={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&y(t,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&y(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&y(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&y(t,["bidiGenerateContentSetup"],mD(n,f));const m=d(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&y(t,["fieldMask"],m),i}function cD(n,e){const t={},i=d(e,["config"]);return i!=null&&y(t,["config"],uD(n,i,t)),t}function fD(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function dD(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function hD(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&y(e,["timeRangeFilter"],t),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function pD(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","speechConfig"],Km(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&y(e,["setup","systemInstruction"],lD(rn(k)));const O=d(n,["tools"]);if(e!==void 0&&O!=null){let le=xa(O);Array.isArray(le)&&(le=le.map(D=>_D(Ma(D)))),y(e,["setup","tools"],le)}const z=d(n,["sessionResumption"]);e!==void 0&&z!=null&&y(e,["setup","sessionResumption"],yD(z));const W=d(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&y(e,["setup","inputAudioTranscription"],W);const $=d(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&y(e,["setup","outputAudioTranscription"],$);const J=d(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&y(e,["setup","realtimeInputConfig"],J);const Z=d(n,["contextWindowCompression"]);e!==void 0&&Z!=null&&y(e,["setup","contextWindowCompression"],Z);const ue=d(n,["proactivity"]);return e!==void 0&&ue!=null&&y(e,["setup","proactivity"],ue),t}function mD(n,e){const t={},i=d(e,["model"]);i!=null&&y(t,["setup","model"],Ye(n,i));const o=d(e,["config"]);return o!=null&&y(t,["config"],pD(o,t)),t}function gD(n){const e={},t=d(n,["videoMetadata"]);t!=null&&y(e,["videoMetadata"],t);const i=d(n,["thought"]);i!=null&&y(e,["thought"],i);const o=d(n,["inlineData"]);o!=null&&y(e,["inlineData"],aD(o));const l=d(n,["fileData"]);l!=null&&y(e,["fileData"],fD(l));const u=d(n,["thoughtSignature"]);u!=null&&y(e,["thoughtSignature"],u);const f=d(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=d(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const h=d(n,["executableCode"]);h!=null&&y(e,["executableCode"],h);const v=d(n,["functionResponse"]);v!=null&&y(e,["functionResponse"],v);const T=d(n,["text"]);return T!=null&&y(e,["text"],T),e}function yD(n){const e={},t=d(n,["handle"]);if(t!=null&&y(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _D(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["functionDeclarations"],h)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&y(e,["googleSearch"],hD(i));const o=d(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],dD(l));const u=d(n,["urlContext"]);u!=null&&y(e,["urlContext"],u);const f=d(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=d(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vD(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function TD(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=vD(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class ED extends ao{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=cD(this.apiClient,e);l=me("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=TD(f,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SD(n){const e={},t=d(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function AD(n){const e={},t=d(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function CD(n,e){const t={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=d(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&y(e,["displayName"],i),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=d(n,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=d(n,["learningRateMultiplier"]);if(l!=null&&y(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=d(n,["batchSize"]);e!==void 0&&u!=null&&y(e,["tuningTask","hyperparameters","batchSize"],u);const f=d(n,["learningRate"]);if(e!==void 0&&f!=null&&y(e,["tuningTask","hyperparameters","learningRate"],f),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function wD(n,e){const t={},i=d(n,["validationDataset"]);e!==void 0&&i!=null&&y(e,["supervisedTuningSpec"],zD(i,t));const o=d(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=d(n,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);const u=d(n,["epochCount"]);e!==void 0&&u!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=d(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const m=d(n,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m);const h=d(n,["adapterSize"]);if(e!==void 0&&h!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=d(n,["labels"]);return e!==void 0&&v!=null&&y(e,["labels"],v),t}function ID(n){const e={},t=d(n,["baseModel"]);t!=null&&y(e,["baseModel"],t);const i=d(n,["preTunedModel"]);i!=null&&y(e,["preTunedModel"],i);const o=d(n,["trainingDataset"]);o!=null&&y(e,["tuningTask","trainingData"],LD(o));const l=d(n,["config"]);return l!=null&&CD(l,e),e}function RD(n){const e={},t=d(n,["baseModel"]);t!=null&&y(e,["baseModel"],t);const i=d(n,["preTunedModel"]);i!=null&&y(e,["preTunedModel"],i);const o=d(n,["trainingDataset"]);o!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],OD(o,e));const l=d(n,["config"]);return l!=null&&wD(l,e),e}function bD(n){const e={},t=d(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function ND(n){const e={},t=d(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function MD(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),t}function xD(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),t}function DD(n){const e={},t=d(n,["config"]);return t!=null&&MD(t,e),e}function kD(n){const e={},t=d(n,["config"]);return t!=null&&xD(t,e),e}function PD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>nA(u))),y(e,["tuningJobs"],l)}return e}function VD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const o=d(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>rm(u))),y(e,["tuningJobs"],l)}return e}function UD(n){const e={},t=d(n,["name"]);t!=null&&y(e,["model"],t);const i=d(n,["name"]);return i!=null&&y(e,["endpoint"],i),e}function LD(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=d(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),y(e,["examples","examples"],i)}return e}function OD(n,e){const t={},i=d(n,["gcsUri"]);e!==void 0&&i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],o),d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function nA(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["state"]);o!=null&&y(e,["state"],LS(o));const l=d(n,["createTime"]);l!=null&&y(e,["createTime"],l);const u=d(n,["tuningTask","startTime"]);u!=null&&y(e,["startTime"],u);const f=d(n,["tuningTask","completeTime"]);f!=null&&y(e,["endTime"],f);const m=d(n,["updateTime"]);m!=null&&y(e,["updateTime"],m);const h=d(n,["description"]);h!=null&&y(e,["description"],h);const v=d(n,["baseModel"]);v!=null&&y(e,["baseModel"],v);const T=d(n,["_self"]);return T!=null&&y(e,["tunedModel"],UD(T)),e}function rm(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["state"]);o!=null&&y(e,["state"],LS(o));const l=d(n,["createTime"]);l!=null&&y(e,["createTime"],l);const u=d(n,["startTime"]);u!=null&&y(e,["startTime"],u);const f=d(n,["endTime"]);f!=null&&y(e,["endTime"],f);const m=d(n,["updateTime"]);m!=null&&y(e,["updateTime"],m);const h=d(n,["error"]);h!=null&&y(e,["error"],h);const v=d(n,["description"]);v!=null&&y(e,["description"],v);const T=d(n,["baseModel"]);T!=null&&y(e,["baseModel"],T);const S=d(n,["tunedModel"]);S!=null&&y(e,["tunedModel"],S);const I=d(n,["preTunedModel"]);I!=null&&y(e,["preTunedModel"],I);const k=d(n,["supervisedTuningSpec"]);k!=null&&y(e,["supervisedTuningSpec"],k);const O=d(n,["tuningDataStats"]);O!=null&&y(e,["tuningDataStats"],O);const z=d(n,["encryptionSpec"]);z!=null&&y(e,["encryptionSpec"],z);const W=d(n,["partnerModelTuningSpec"]);W!=null&&y(e,["partnerModelTuningSpec"],W);const $=d(n,["customBaseModel"]);$!=null&&y(e,["customBaseModel"],$);const J=d(n,["experiment"]);J!=null&&y(e,["experiment"],J);const Z=d(n,["labels"]);Z!=null&&y(e,["labels"],Z);const ue=d(n,["outputUri"]);ue!=null&&y(e,["outputUri"],ue);const le=d(n,["pipelineJob"]);le!=null&&y(e,["pipelineJob"],le);const D=d(n,["serviceAccount"]);D!=null&&y(e,["serviceAccount"],D);const b=d(n,["tunedModelDisplayName"]);b!=null&&y(e,["tunedModelDisplayName"],b);const N=d(n,["veoTuningSpec"]);return N!=null&&y(e,["veoTuningSpec"],N),e}function qD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&y(e,["name"],i);const o=d(n,["metadata"]);o!=null&&y(e,["metadata"],o);const l=d(n,["done"]);l!=null&&y(e,["done"],l);const u=d(n,["error"]);return u!=null&&y(e,["error"],u),e}function zD(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&y(t,["validationDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BD extends ao{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Au(to.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Zp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=ND(e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>rm(v))}else{const h=bD(e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>nA(v))}}async listInternal(e){var t,i,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=kD(e);return f=me("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=VD(v),S=new SE;return Object.assign(S,T),S})}else{const h=DD(e);return f=me("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=PD(v),S=new SE;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,l;let u="",f={};if(this.apiClient.isVertexAI()){const m=AD(e);u=me("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=SD(e);u=me("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=RD(e);return l=me("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>rm(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ID(e);return l=me("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>qD(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const FD=1024*1024*8,GD=3,KD=1e3,JD=2,Mp="x-goog-upload-status";async function YD(n,e,t){var i,o,l;let u=0,f=0,m=new jp(new Response),h="upload";for(u=n.size;f<u;){const T=Math.min(FD,u-f),S=n.slice(f,f+T);f+T>=u&&(h+=", finalize");let I=0,k=KD;for(;I<GD&&(m=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(f),"Content-Length":String(T)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[Mp]));)I++,await $D(k),k=k*JD;if(f+=T,((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o[Mp])!=="active")break;if(u<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((l=m==null?void 0:m.headers)===null||l===void 0?void 0:l[Mp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function XD(n){return{size:n.size,type:n.type}}function $D(n){return new Promise(e=>setTimeout(e,n))}class WD{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YD(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QD{create(e,t,i){return new ZD(e,t,i)}}class ZD{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HE="x-goog-api-key";class jD{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(HE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(HE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ek="gl-node/";class tk{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=vb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new jD(this.apiKey);this.apiClient=new qx({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:ek+"web",uploader:new WD,downloader:new HD}),this.models=new rD(this.apiClient),this.live=new Zx(this.apiClient,o,new QD),this.batches=new O1(this.apiClient),this.chats=new gN(this.models,this.apiClient),this.caches=new hN(this.apiClient),this.files=new IN(this.apiClient),this.operations=new oD(this.apiClient),this.authTokens=new ED(this.apiClient),this.tunings=new BD(this.apiClient)}}const iA=new tk({apiKey:"AIzaSyB3tU83FCanKIOhcq16oTuPv8FQgVdkpkU"}),nk=`
Role: Define the persona or expertise you want the AI to adopt.
Task: Clearly state the specific action or goal.
Context: Provide all necessary background information, details, and constraints.
Reasoning: Explain the underlying purpose or 'why'.
Output Format: Specify exactly how you want the answer to be delivered.
Stop Conditions: Define the criteria for a complete and successful response.
`,ik={type:cn.OBJECT,properties:{questions:{type:cn.ARRAY,items:{type:cn.OBJECT,properties:{field:{type:cn.STRING,description:'The prompt structure field this question relates to (e.g., "role", "task").'},question:{type:cn.STRING,description:"The clarifying question to ask the user."},options:{type:cn.ARRAY,items:{type:cn.STRING},description:'A list of 3-4 multiple-choice options. Include a "Custom..." option.'}},required:["field","question","options"]}}},required:["questions"]};async function sk(n){try{const t=(await iA.models.generateContent({model:"gemini-2.5-flash",contents:`Based on the following user prompt and the provided prompt engineering structure, generate a set of clarifying multiple-choice questions to gather the necessary details. Ask one question for each part of the structure that is not clearly defined in the user's prompt. Provide 3-4 concise options for each question, including a "Custom..." option.

            PROMPT ENGINEERING STRUCTURE:
            ${nk}

            USER'S PROMPT: "${n}"
            
            Generate the questions in the specified JSON format.
            `,config:{responseMimeType:"application/json",responseSchema:ik}})).text.trim(),i=JSON.parse(t);if(i&&Array.isArray(i.questions))return i;throw new Error("Invalid JSON structure received from API.")}catch(e){throw console.error("Error generating clarifying questions:",e),new Error("Failed to get clarifying questions from the AI.")}}async function FE(n,e){const t=Object.keys(e).length>0,i=t?Object.entries(e).map(([l,u])=>`${l.charAt(0).toUpperCase()+l.slice(1)}: ${u}`).join(`
`):"No clarifying answers were provided.",o=t?"Based on the user's initial idea and their answers to clarifying questions, generate a highly detailed and professional prompt. Your task is not just to combine the information, but to elaborate and expand upon it to create a comprehensive and effective prompt.":"A user has provided a single, unprofessional prompt. Your task is to analyze this initial idea and transform it into a highly detailed and professional prompt. You must infer the user's intent and fill in the missing details for each section of the prompt structure. Make reasonable, intelligent assumptions to create a complete and effective prompt.";try{return(await iA.models.generateContent({model:"gemini-2.5-pro",contents:`${o}

            **User's Initial Idea:**
            "${n}"

            **User's Answers (if any):**
            ${i}

            ---

            **Your Task:**
            Generate the final, polished prompt. For each section, expand on the user's input to add detail, clarity, and specificity. Think about what an AI would need to know to perform the task perfectly. If a piece of information wasn't provided, create a plausible and detailed placeholder based on the initial idea.

            Follow this exact structure for your output, using Markdown:

            ### **Prompt Engineering Structure**

            1.  **Role:** [Elaborate on a plausible role to create a detailed persona. For example, if the user's idea is about marketing, you might define the role as "a seasoned digital marketing strategist with expertise in B2B content marketing for SaaS companies."]
            2.  **Task:** [Clearly and unambiguously define the task. Break it down into concrete, actionable steps if the task is complex. Be specific about the action to be performed based on the user's intent.]
            3.  **Context:** [Combine the user's initial idea and any answers to build a rich, detailed context. Fill in plausible details where necessary to make the scenario complete and understandable for the AI.]
            4.  **Reasoning:** [Infer and explain the underlying purpose or "why" behind the task in detail. What is the ultimate goal the user is likely trying to achieve with this prompt? This helps the AI make better-informed decisions.]
            5.  **Output Format:** [Be extremely specific about a suitable output format. Mention structure (e.g., bullet points, numbered list, JSON object), tone (e.g., professional, casual, witty), length (e.g., 500 words, three paragraphs), and any other formatting requirements.]
            6.  **Stop Conditions:** [Define clear, measurable criteria for a complete and successful response. What exact conditions must be met for the AI to know the task is finished?]
            `,config:{systemInstruction:"You are an expert prompt engineer. Your goal is to transform a user's basic ideaand their specific answers, if availableinto a highly detailed, comprehensive, and effective professional prompt. You must elaborate on the user's input, adding plausible details and structure to make the final prompt as clear and powerful as possible, especially when information is missing."}})).text}catch(l){throw console.error("Error generating professional prompt:",l),new Error("Failed to generate the final prompt.")}}const rk=({messages:n,setMessages:e,isLoading:t,setIsLoading:i,currentConversationId:o,onNewConversation:l,user:u,isSubscribed:f,onUpgradeClick:m,onShare:h})=>{const[v,T]=ge.useState(""),[S,I]=ge.useState({}),[k,O]=ge.useState(!1),[z,W]=ge.useState(!1),$=ge.useRef(null),J=ge.useRef(null);ge.useEffect(()=>{if(J.current){J.current.style.height="auto";const b=J.current.scrollHeight,N=120;J.current.style.height=`${Math.min(b,N)}px`}},[v]),ge.useEffect(()=>{var b;(b=$.current)==null||b.scrollIntoView({behavior:"smooth"})},[n,z]),ge.useEffect(()=>{const b=n.some(N=>N.sender==="ai"&&N.text.includes("Prompt Engineering Structure"));I({}),O(b)},[o,n]);const Z=async()=>{if(v.trim()===""||t||z)return;const b={id:Date.now().toString(),sender:"user",text:v};e(P=>[...P,b]);const N=v;if(T(""),f){i(!0);try{const M=(await sk(N)).questions.map(V=>({id:`${Date.now()}-${V.field}`,sender:"ai",text:V.question,options:V.options,field:V.field,isAnswered:!1}));e(V=>[...V,...M])}catch(P){console.error(P);const M={id:Date.now().toString(),sender:"system",text:"Sorry, I encountered an error fetching clarifying questions. Please try again."};e(V=>[...V,M])}finally{i(!1)}}else{W(!0);try{const P=await FE(N,{}),M={id:(Date.now()+1).toString(),sender:"ai",text:P};e(V=>[...V,M])}catch(P){console.error(P);const M={id:(Date.now()+1).toString(),sender:"system",text:"Sorry, I failed to generate the final prompt. Please try again."};e(V=>[...V,M])}finally{W(!1)}}},ue=ge.useCallback(async(b,N)=>{W(!0);try{const P=await FE(b,N),M={id:(Date.now()+1).toString(),sender:"ai",text:P};e(V=>[...V,M])}catch(P){console.error(P);const M={id:(Date.now()+1).toString(),sender:"system",text:"Sorry, I failed to generate the final prompt. Please try again."};e(V=>[...V,M])}finally{W(!1)}},[e]),le=ge.useCallback((b,N)=>{e(P=>P.map(M=>M.field===b?{...M,isAnswered:!0,text:`${M.text}<br/><br/><div class="p-2 rounded-md bg-black/10 dark:bg-white/5 text-sm"><i>Your answer: ${N}</i></div>`}:M)),I(P=>({...P,[b]:N}))},[e]);ge.useEffect(()=>{var P;const N=n.filter(M=>M.field).length;if(!k&&N>0&&Object.keys(S).length===N){const M=((P=n.find(V=>V.sender==="user"))==null?void 0:P.text)||"";M&&(O(!0),ue(M,S))}},[S,n,ue,k]);const D=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),Z())};return L.jsxs("div",{className:"flex flex-col h-full bg-gray-100 dark:bg-gemini-dark",children:[L.jsxs("div",{className:"flex-1 overflow-y-auto p-2 sm:p-4 space-y-6",children:[n.map(b=>L.jsx(mb,{message:b,onOptionSelect:le,user:u,onUpgradeClick:m,onShare:h},b.id)),z&&L.jsxs("div",{className:"w-full max-w-3xl mx-auto flex gap-2 sm:gap-4",children:[L.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 p-1.5 flex items-center justify-center flex-shrink-0",children:L.jsx(Na,{className:"text-white"})}),L.jsxs("div",{className:"flex-1 overflow-hidden pt-1",children:[L.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"promptii"}),L.jsxs("div",{className:"mt-2 text-gray-700 dark:text-gray-300 flex items-center space-x-1.5",children:[L.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.3s]"}),L.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.15s]"}),L.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"})]})]})]}),t&&L.jsxs("div",{className:"w-full max-w-3xl mx-auto flex gap-4",children:[L.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center font-bold text-white flex-shrink-0 animate-pulse"}),L.jsxs("div",{className:"flex-1 space-y-3 pt-1",children:[L.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700/50 rounded w-1/4 animate-pulse"}),L.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700/50 rounded w-3/4 animate-pulse"})]})]}),L.jsx("div",{ref:$})]}),L.jsx("div",{className:"p-2 sm:p-4 bg-transparent from-gray-100 to-transparent dark:from-gemini-dark bg-gradient-to-t",children:L.jsx("div",{className:"max-w-3xl mx-auto",children:L.jsxs("form",{onSubmit:b=>{b.preventDefault(),Z()},className:"relative flex items-center",children:[L.jsx("textarea",{ref:J,rows:1,value:v,onChange:b=>T(b.target.value),onKeyDown:D,placeholder:n.length>1?"Follow up...":"Enter your idea...",className:"w-full bg-gray-200 dark:bg-gemini-dark-card rounded-2xl shadow-sm resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 py-2.5 pl-3 pr-12 sm:py-3 sm:pl-4 sm:pr-14 text-gray-800 dark:text-gray-200",disabled:t||z||n.some(b=>b.options&&!b.isAnswered)||k}),L.jsx("button",{type:"submit",disabled:t||z||v.trim()==="",className:"absolute right-2 bottom-1.5 sm:right-3 sm:bottom-2 p-2 rounded-full bg-indigo-600 text-white disabled:bg-indigo-300 dark:disabled:bg-indigo-900/50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors","aria-label":"Send message",children:L.jsx(rb,{className:"w-5 h-5"})})]})})})]})},ok=({theme:n,setTheme:e})=>{const t=()=>{e(n==="light"?"dark":"light")};return L.jsx("button",{onClick:t,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900","aria-label":"Toggle theme",children:n==="light"?L.jsx(sb,{className:"w-6 h-6"}):L.jsx(ib,{className:"w-6 h-6"})})},ak=({user:n,isOpen:e,onClose:t,onSignOut:i})=>e?L.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:t,"aria-modal":"true",role:"dialog",children:[L.jsxs("div",{className:"bg-gray-200 dark:bg-gemini-dark-card rounded-2xl shadow-2xl w-full max-w-sm m-4 relative animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[L.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors","aria-label":"Close profile",children:L.jsx(qm,{className:"w-5 h-5"})}),L.jsxs("div",{className:"p-8 text-center",children:[L.jsx("img",{src:n.picture||void 0,alt:n.name||"User",className:"w-24 h-24 rounded-full mx-auto mb-4 border-4 border-white dark:border-gray-500 shadow-md"}),L.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:n.name}),L.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:n.email})]}),L.jsx("div",{className:"p-6 border-t border-gray-300 dark:border-gray-700/50",children:L.jsx("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 bg-white/80 dark:bg-white/10 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 ease-in-out text-sm",children:"Sign Out"})})]}),L.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]}):null,lk=["AI-powered clarifying questions to refine your ideas.","Generation of highly detailed, professional-grade prompts.","Access to the most advanced AI models for superior results.","Save and sync your prompt history across devices (with sign-in)."],uk=({isOpen:n,onClose:e})=>{const[t,i]=ge.useState(!1);if(ge.useEffect(()=>{n&&i(!1)},[n]),!n)return null;const o=()=>{window.open("https://razorpay.me/@abhijeetsingh6821","_blank","noopener,noreferrer"),i(!0)},l=()=>{e(),window.location.href="/pro-success"};return L.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,"aria-modal":"true",role:"dialog",children:[L.jsxs("div",{className:"bg-gray-200 dark:bg-gemini-dark-card rounded-2xl shadow-2xl w-full max-w-md m-4 relative animate-fade-in-up",onClick:u=>u.stopPropagation(),children:[L.jsxs("div",{className:"p-8 text-center",children:[L.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center",children:L.jsx(zm,{className:"w-8 h-8 text-white"})}),L.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Unlock Professional Mode"}),L.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Go beyond basic ideas. Let our AI guide you to create expert-level prompts that get superior results."})]}),L.jsx("div",{className:"px-6 pb-6 text-sm text-gray-700 dark:text-gray-300",children:L.jsx("ul",{className:"space-y-2",children:lk.map((u,f)=>L.jsxs("li",{className:"flex items-start gap-3",children:[L.jsx("span",{className:"text-indigo-400 mt-1",children:""}),L.jsx("span",{children:u})]},f))})}),L.jsx("div",{className:"p-6 border-t border-gray-300 dark:border-gray-700/50",children:t?L.jsxs(L.Fragment,{children:[L.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-3 bg-indigo-600 text-white font-semibold py-3 px-4 rounded-lg shadow-sm hover:bg-indigo-700 transition-all duration-200 ease-in-out text-base",children:[L.jsx(cb,{className:"w-5 h-5"}),"Verify Payment & Unlock Pro"]}),L.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 text-center mt-3",children:"Please complete your payment in the other tab. Once finished, click here to activate your Pro subscription."})]}):L.jsxs(L.Fragment,{children:[L.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-3 bg-white/80 dark:bg-white/10 text-gray-800 dark:text-gray-200 font-semibold py-3 px-4 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 ease-in-out text-base",children:[L.jsx(ub,{className:"w-5 h-5"}),"Pay 10/month with Razorpay"]}),L.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 text-center mt-3",children:"You will be redirected to Razorpay to complete your payment securely."})]})}),L.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:L.jsx(qm,{className:"w-5 h-5"})})]}),L.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]})},ck=({isOpen:n,onClose:e,shareLink:t,isLoading:i})=>{const[o,l]=ge.useState(!1);ge.useEffect(()=>{n&&l(!1)},[n]);const u=()=>{t&&navigator.clipboard.writeText(t).then(()=>{l(!0),setTimeout(()=>l(!1),2e3)})};return n?L.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,"aria-modal":"true",role:"dialog",children:[L.jsxs("div",{className:"bg-gray-200 dark:bg-gemini-dark-card rounded-2xl shadow-2xl w-full max-w-md m-4 relative animate-fade-in-up",onClick:f=>f.stopPropagation(),children:[L.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-700/50",children:[L.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Share Prompt"}),L.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:L.jsx(qm,{className:"w-5 h-5"})})]}),L.jsx("div",{className:"p-6 space-y-4",children:i?L.jsxs("div",{className:"flex flex-col items-center justify-center h-32 gap-4",children:[L.jsx("div",{className:"w-10 h-10 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),L.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Generating share link..."})]}):t?L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Anyone with this link can view this prompt. It will be publicly accessible."}),L.jsxs("div",{className:"flex items-center gap-2 p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-black/20 rounded-lg",children:[L.jsx("input",{type:"text",value:t,readOnly:!0,className:"flex-grow bg-transparent focus:outline-none text-sm text-gray-700 dark:text-gray-300"}),L.jsx("button",{onClick:u,className:"p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Copy link",children:o?L.jsx(MS,{className:"w-5 h-5 text-green-500"}):L.jsx(NS,{className:"w-5 h-5"})})]})]}):L.jsx("div",{className:"text-center text-red-500 py-4",children:L.jsx("p",{children:"Sorry, could not generate a share link. Please try again."})})}),L.jsx("div",{className:"p-4 bg-gray-100 dark:bg-black/20 rounded-b-2xl text-right",children:L.jsx("button",{onClick:e,className:"bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors",children:"Done"})})]}),L.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]}):null};function xp(n,e){const[t,i]=ge.useState(()=>{try{const l=window.localStorage.getItem(n);return l?JSON.parse(l):e}catch(l){return console.log(l),e}}),o=l=>{try{const u=l instanceof Function?l(t):l;i(u),window.localStorage.setItem(n,JSON.stringify(u))}catch(u){console.log(u)}};return ge.useEffect(()=>{try{const l=window.localStorage.getItem(n);l&&i(JSON.parse(l))}catch(l){console.log(l),i(e)}},[n]),[t,o]}const fk=()=>{};var GE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],f=n[t++],m=((o&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,f=u?n[o+1]:0,m=o+2<n.length,h=m?n[o+2]:0,v=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|h>>6,I=h&63;m||(I=64,u||(S=64)),i.push(t[v],t[T],t[S],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||h==null||T==null)throw new hk;const S=l<<2|f>>4;if(i.push(S),h!==64){const I=f<<4&240|h>>2;if(i.push(I),T!==64){const k=h<<6&192|T;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pk=function(n){const e=sA(n);return rA.encodeByteArray(e,!0)},Pf=function(n){return pk(n).replace(/\./g,"")},oA=function(n){try{return rA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=()=>mk().__FIREBASE_DEFAULTS__,yk=()=>{if(typeof process>"u"||typeof GE>"u")return;const n=GE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_k=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&oA(n[1]);return e&&JSON.parse(e)},rd=()=>{try{return fk()||gk()||yk()||_k()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aA=n=>{var e,t;return(t=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},vk=n=>{const e=aA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},lA=()=>{var n;return(n=rd())==null?void 0:n.config},uA=n=>{var e;return(e=rd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pf(JSON.stringify(t)),Pf(JSON.stringify(u)),""].join(".")}const iu={};function Sk(){const n={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?n.emulator.push(e):n.prod.push(e);return n}function Ak(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let KE=!1;function fA(n,e){if(typeof window>"u"||typeof document>"u"||!ka(window.location.host)||iu[n]===e||iu[n]||KE)return;iu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=Sk().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{KE=!0,u()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Ak(i),I=t("text"),k=document.getElementById(I)||document.createElement("span"),O=t("learnmore"),z=document.getElementById(O)||document.createElement("a"),W=t("preprendIcon"),$=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const J=S.element;f(J),v(z,O);const Z=h();m($,W),J.append($,k,z,Z),document.body.appendChild(J)}l?(k.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ck(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function wk(){var e;const n=(e=rd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ik(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nk(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Mk(){return!wk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xk(){try{return typeof indexedDB=="object"}catch{return!1}}function Dk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="FirebaseError";class ms extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kk,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?Pk(l,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new ms(o,f,i)}}function Pk(n,e){return n.replace(Vk,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Vk=/\{\$([^}]+)}/g;function Uk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function no(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],u=e[o];if(JE(l)&&JE(u)){if(!no(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function JE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Lk(n,e){const t=new Ok(n,e);return t.subscribe.bind(t)}class Ok{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");qk(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Dp),o.error===void 0&&(o.error=Dp),o.complete===void 0&&(o.complete=Dp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n){return n&&n._delegate?n._delegate:n}class io{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Tk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Bk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bk(n){return n===Xr?void 0:n}function Hk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const Gk={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Kk=qe.INFO,Jk={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Yk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=Jk[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ym{constructor(e){this.name=e,this._logLevel=Kk,this._logHandler=Yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Xk=(n,e)=>e.some(t=>n instanceof t);let YE,XE;function $k(){return YE||(YE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wk(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dA=new WeakMap,om=new WeakMap,hA=new WeakMap,kp=new WeakMap,Xm=new WeakMap;function Qk(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(nr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dA.set(t,n)}).catch(()=>{}),Xm.set(e,n),e}function Zk(n){if(om.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});om.set(n,e)}let am={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return om.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jk(n){am=n(am)}function eP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Pp(this),e,...t);return hA.set(i,e.sort?e.sort():[e]),nr(i)}:Wk().includes(n)?function(...e){return n.apply(Pp(this),e),nr(dA.get(this))}:function(...e){return nr(n.apply(Pp(this),e))}}function tP(n){return typeof n=="function"?eP(n):(n instanceof IDBTransaction&&Zk(n),Xk(n,$k())?new Proxy(n,am):n)}function nr(n){if(n instanceof IDBRequest)return Qk(n);if(kp.has(n))return kp.get(n);const e=tP(n);return e!==n&&(kp.set(n,e),Xm.set(e,n)),e}const Pp=n=>Xm.get(n);function nP(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),f=nr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(nr(u.result),m.oldVersion,m.newVersion,nr(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const iP=["get","getKey","getAll","getAllKeys","count"],sP=["put","add","delete","clear"],Vp=new Map;function $E(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=sP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||iP.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),o&&m.done]))[0]};return Vp.set(e,l),l}jk(n=>({...n,get:(e,t,i)=>$E(e,t)||n.get(e,t,i),has:(e,t)=>!!$E(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function oP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lm="@firebase/app",WE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Ym("@firebase/app"),aP="@firebase/app-compat",lP="@firebase/analytics-compat",uP="@firebase/analytics",cP="@firebase/app-check-compat",fP="@firebase/app-check",dP="@firebase/auth",hP="@firebase/auth-compat",pP="@firebase/database",mP="@firebase/data-connect",gP="@firebase/database-compat",yP="@firebase/functions",_P="@firebase/functions-compat",vP="@firebase/installations",TP="@firebase/installations-compat",EP="@firebase/messaging",SP="@firebase/messaging-compat",AP="@firebase/performance",CP="@firebase/performance-compat",wP="@firebase/remote-config",IP="@firebase/remote-config-compat",RP="@firebase/storage",bP="@firebase/storage-compat",NP="@firebase/firestore",MP="@firebase/ai",xP="@firebase/firestore-compat",DP="firebase",kP="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="[DEFAULT]",PP={[lm]:"fire-core",[aP]:"fire-core-compat",[uP]:"fire-analytics",[lP]:"fire-analytics-compat",[fP]:"fire-app-check",[cP]:"fire-app-check-compat",[dP]:"fire-auth",[hP]:"fire-auth-compat",[pP]:"fire-rtdb",[mP]:"fire-data-connect",[gP]:"fire-rtdb-compat",[yP]:"fire-fn",[_P]:"fire-fn-compat",[vP]:"fire-iid",[TP]:"fire-iid-compat",[EP]:"fire-fcm",[SP]:"fire-fcm-compat",[AP]:"fire-perf",[CP]:"fire-perf-compat",[wP]:"fire-rc",[IP]:"fire-rc-compat",[RP]:"fire-gcs",[bP]:"fire-gcs-compat",[NP]:"fire-fst",[xP]:"fire-fst-compat",[MP]:"fire-vertex","fire-js":"fire-js",[DP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Map,VP=new Map,cm=new Map;function QE(n,e){try{n.container.addComponent(e)}catch(t){us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ea(n){const e=n.name;if(cm.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,n);for(const t of Vf.values())QE(t,n);for(const t of VP.values())QE(t,n);return!0}function $m(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Cu("app","Firebase",UP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=kP;function pA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:um,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw ir.create("bad-app-name",{appName:String(o)});if(t||(t=lA()),!t)throw ir.create("no-options");const l=Vf.get(o);if(l){if(no(t,l.options)&&no(i,l.config))return l;throw ir.create("duplicate-app",{appName:o})}const u=new Fk(o);for(const m of cm.values())u.addComponent(m);const f=new LP(t,i,u);return Vf.set(o,f),f}function mA(n=um){const e=Vf.get(n);if(!e&&n===um&&lA())return pA();if(!e)throw ir.create("no-app",{appName:n});return e}function sr(n,e,t){let i=PP[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(u.join(" "));return}Ea(new io(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="firebase-heartbeat-database",qP=1,fu="firebase-heartbeat-store";let Up=null;function gA(){return Up||(Up=nP(OP,qP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ir.create("idb-open",{originalErrorMessage:n.message})})),Up}async function zP(n){try{const t=(await gA()).transaction(fu),i=await t.objectStore(fu).get(yA(n));return await t.done,i}catch(e){if(e instanceof ms)us.warn(e.message);else{const t=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(t.message)}}}async function ZE(n,e){try{const i=(await gA()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,yA(n)),await i.done}catch(t){if(t instanceof ms)us.warn(t.message);else{const i=ir.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});us.warn(i.message)}}}function yA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1024,HP=30;class FP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=jE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>HP){const u=JP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){us.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jE(),{heartbeatsToSend:i,unsentEntries:o}=GP(this._heartbeatsCache.heartbeats),l=Pf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return us.warn(t),""}}}function jE(){return new Date().toISOString().substring(0,10)}function GP(n,e=BP){const t=[];let i=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),e0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),e0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class KP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xk()?Dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ZE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ZE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function e0(n){return Pf(JSON.stringify({version:2,heartbeats:n})).length}function JP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n){Ea(new io("platform-logger",e=>new rP(e),"PRIVATE")),Ea(new io("heartbeat",e=>new FP(e),"PRIVATE")),sr(lm,WE,n),sr(lm,WE,"esm2020"),sr("fire-js","")}YP("");var XP="firebase",$P="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(XP,$P,"app");function _A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WP=_A,vA=new Cu("auth","Firebase",_A());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Ym("@firebase/auth");function QP(n,...e){Uf.logLevel<=qe.WARN&&Uf.warn(`Auth (${Pa}): ${n}`,...e)}function _f(n,...e){Uf.logLevel<=qe.ERROR&&Uf.error(`Auth (${Pa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(n,...e){throw Wm(n,...e)}function Di(n,...e){return Wm(n,...e)}function TA(n,e,t){const i={...WP(),[e]:t};return new Cu("auth","Firebase",i).create(e,{appName:n.name})}function jr(n){return TA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return vA.create(n,...e)}function Ie(n,e,...t){if(!n)throw Wm(e,...t)}function os(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _f(e),new Error(e)}function fs(n,e){n||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function ZP(){return t0()==="http:"||t0()==="https:"}function t0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZP()||Rk()||"connection"in navigator)?navigator.onLine:!0}function e2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,fs(t>e,"Short delay should be less than long delay!"),this.isMobile=Ck()||bk()}get(){return jP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n,e){fs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i2=new Iu(3e4,6e4);function Zm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Va(n,e,t,i,o={}){return SA(n,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=wu({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:m,...l};return Ik()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&ka(n.emulatorConfig.host)&&(h.credentials="include"),EA.fetch()(await AA(n,n.config.apiHost,t,f),h)})}async function SA(n,e,t){n._canInitEmulator=!1;const i={...t2,...e};try{const o=new r2(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw cf(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,h]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw cf(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw cf(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TA(n,v,h);cs(n,v)}}catch(o){if(o instanceof ms)throw o;cs(n,"network-request-failed",{message:String(o)})}}async function s2(n,e,t,i,o={}){const l=await Va(n,e,t,i,o);return"mfaPendingCredential"in l&&cs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function AA(n,e,t,i){const o=`${e}${t}?${i}`,l=n,u=l.config.emulator?Qm(n.config,o):`${n.config.apiScheme}://${o}`;return n2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class r2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),i2.get())})}}function cf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Di(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(n,e){return Va(n,"POST","/v1/accounts:delete",e)}async function Lf(n,e){return Va(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a2(n,e=!1){const t=ri(n),i=await t.getIdToken(e),o=jm(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:su(Lp(o.auth_time)),issuedAtTime:su(Lp(o.iat)),expirationTime:su(Lp(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Lp(n){return Number(n)*1e3}function jm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const o=oA(t);return o?JSON.parse(o):(_f("Failed to decode base64 JWT payload"),null)}catch(o){return _f("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function n0(n){const e=jm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ms&&l2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function l2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(n){var T;const e=n.auth,t=await n.getIdToken(),i=await du(n,Lf(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?CA(o.providerUserInfo):[],u=f2(n.providerData,l),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new dm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function c2(n){const e=ri(n);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f2(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function CA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(n,e){const t=await SA(n,{},async()=>{const i=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await AA(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&ka(n.emulatorConfig.host)&&(m.credentials="include"),EA.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function h2(n,e){return Va(n,"POST","/v2/accounts:revokeToken",Zm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=n0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await d2(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,u=new ya;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ya,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new u2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await du(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return a2(this,e)}reload(){return c2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await du(this,o2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:I,providerData:k,stsTokenManager:O}=t;Ie(T&&O,e,"internal-error");const z=ya.fromJSON(this.name,O);Ie(typeof T=="string",e,"internal-error"),$s(i,e.name),$s(o,e.name),Ie(typeof S=="boolean",e,"internal-error"),Ie(typeof I=="boolean",e,"internal-error"),$s(l,e.name),$s(u,e.name),$s(f,e.name),$s(m,e.name),$s(h,e.name),$s(v,e.name);const W=new ii({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:z,createdAt:h,lastLoginAt:v});return k&&Array.isArray(k)&&(W.providerData=k.map($=>({...$}))),m&&(W._redirectEventId=m),W}static async _fromIdTokenResponse(e,t,i=!1){const o=new ya;o.updateFromServerResponse(t);const l=new ii({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?CA(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ya;f.updateFromIdToken(i);const m=new ii({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new dm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;function as(n){fs(n instanceof Function,"Expected a class definition");let e=i0.get(n);return e?(fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,i0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wA.type="NONE";const s0=wA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n,e,t){return`firebase:${n}:${e}:${t}`}class _a{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=vf(this.userKey,o.apiKey,l),this.fullPersistenceKey=vf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lf(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new _a(as(s0),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=o[0]||as(s0);const u=vf(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const v=await h._get(u);if(v){let T;if(typeof v=="string"){const S=await Lf(e,{idToken:v}).catch(()=>{});if(!S)break;T=await ii._fromGetAccountInfoResponse(e,S,v)}else T=ii._fromJSON(e,v);h!==l&&(f=T),l=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new _a(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(u)}catch{}})),new _a(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xA(e))return"Blackberry";if(DA(e))return"Webos";if(RA(e))return"Safari";if((e.includes("chrome/")||bA(e))&&!e.includes("edge/"))return"Chrome";if(MA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function IA(n=on()){return/firefox\//i.test(n)}function RA(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bA(n=on()){return/crios\//i.test(n)}function NA(n=on()){return/iemobile/i.test(n)}function MA(n=on()){return/android/i.test(n)}function xA(n=on()){return/blackberry/i.test(n)}function DA(n=on()){return/webos/i.test(n)}function eg(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function p2(n=on()){var e;return eg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function m2(){return Nk()&&document.documentMode===10}function kA(n=on()){return eg(n)||MA(n)||DA(n)||xA(n)||/windows phone/i.test(n)||NA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n,e=[]){let t;switch(n){case"Browser":t=r0(on());break;case"Worker":t=`${r0(on())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(n,e={}){return Va(n,"GET","/v2/passwordPolicy",Zm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=6;class v2{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new g2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=as(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await _a.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lf(this,{idToken:e}),i=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(xi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(jr(this));const t=e?ri(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y2(this),t=new v2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await h2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&as(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await _a.create(this,[as(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&QP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tg(n){return ri(n)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lk(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E2(n){ng=n}function S2(n){return ng.loadJS(n)}function A2(){return ng.gapiScript}function C2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n,e){const t=$m(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(no(l,e??{}))return o;cs(o,"already-initialized")}return t.initialize({options:e})}function I2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(as);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function R2(n,e,t){const i=tg(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=VA(e),{host:u,port:f}=b2(e),m=f===null?"":`:${f}`,h={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(no(h,i.config.emulator)&&no(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ka(u)?(cA(`${l}//${u}${m}`),fA("Auth",!0)):N2()}function VA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b2(n){const e=VA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:a0(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:a0(u)}}}function a0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function N2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,t){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(n,e){return s2(n,"POST","/v1/accounts:signInWithIdp",Zm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="http://localhost";class so extends UA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const u=new so(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return va(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,va(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,va(e,t)}buildRequest(){const e={requestUri:M2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends LA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Ru{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return rs.credential(t,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Ru{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Ru{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return js.credential(t,i)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await ii._fromIdTokenResponse(e,i,o),u=l0(i);return new Sa({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=l0(i);return new Sa({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function l0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends ms{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new qf(e,t,i,o)}}function OA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(n,l,e,i):l})}async function x2(n,e,t=!1){const i=await du(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(n,e,t=!1){const{auth:i}=n;if(xi(i.app))return Promise.reject(jr(i));const o="reauthenticate";try{const l=await du(n,OA(i,o,e,n),t);Ie(l.idToken,i,"internal-error");const u=jm(l.idToken);Ie(u,i,"internal-error");const{sub:f}=u;return Ie(n.uid===f,i,"user-mismatch"),Sa._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&cs(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(n,e,t=!1){if(xi(n.app))return Promise.reject(jr(n));const i="signIn",o=await OA(n,i,e),l=await Sa._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function P2(n,e,t,i){return ri(n).onIdTokenChanged(e,t,i)}function V2(n,e,t){return ri(n).beforeAuthStateChanged(e,t)}const zf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=1e3,L2=10;class zA extends qA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);m2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,L2):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},U2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zA.type="LOCAL";const O2=zA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA extends qA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BA.type="SESSION";const HA=BA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new od(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(t.origin,l)),m=await q2(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const h=ig("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function B2(n){ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function H2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function G2(){return FA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="firebaseLocalStorageDb",K2=1,Bf="firebaseLocalStorage",KA="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ad(n,e){return n.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function J2(){const n=indexedDB.deleteDatabase(GA);return new bu(n).toPromise()}function hm(){const n=indexedDB.open(GA,K2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Bf,{keyPath:KA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Bf)?e(i):(i.close(),await J2(),e(await hm()))})})}async function u0(n,e,t){const i=ad(n,!0).put({[KA]:e,value:t});return new bu(i).toPromise()}async function Y2(n,e){const t=ad(n,!1).get(e),i=await new bu(t).toPromise();return i===void 0?null:i.value}function c0(n,e){const t=ad(n,!0).delete(e);return new bu(t).toPromise()}const X2=800,$2=3;class JA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>$2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(G2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await H2(),!this.activeServiceWorker)return;this.sender=new z2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hm();return await u0(e,zf,"1"),await c0(e,zf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>u0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Y2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>c0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ad(o,!1).getAll();return new bu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JA.type="LOCAL";const W2=JA;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n,e){return e?as(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends UA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Z2(n){return k2(n.auth,new sg(n),n.bypassAuthState)}function j2(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),D2(t,new sg(n),n.bypassAuthState)}async function eV(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),x2(t,new sg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z2;case"linkViaPopup":case"linkViaRedirect":return eV;case"reauthViaPopup":case"reauthViaRedirect":return j2;default:cs(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Iu(2e3,1e4);class ha extends YA{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tV.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="pendingRedirect",Tf=new Map;class iV extends YA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Tf.get(this.auth._key());if(!e){try{const i=await sV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Tf.set(this.auth._key(),e)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sV(n,e){const t=aV(e),i=oV(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function rV(n,e){Tf.set(n._key(),e)}function oV(n){return as(n._redirectPersistence)}function aV(n){return vf(nV,n.config.apiKey,n.name)}async function lV(n,e,t=!1){if(xi(n.app))return Promise.reject(jr(n));const i=tg(n),o=Q2(i,e),u=await new iV(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=600*1e3;class cV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!XA(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uV&&this.cachedEventUids.clear(),this.cachedEventUids.has(f0(e))}saveEventToCache(e){this.cachedEventUids.add(f0(e)),this.lastProcessedEventTime=Date.now()}}function f0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(n,e={}){return Va(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pV=/^https?/;async function mV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dV(n);for(const t of e)try{if(gV(t))return}catch{}cs(n,"unauthorized-domain")}function gV(n){const e=fm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!pV.test(t))return!1;if(hV.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=new Iu(3e4,6e4);function d0(){const n=ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _V(n){return new Promise((e,t)=>{var o,l,u;function i(){d0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d0(),t(Di(n,"network-request-failed"))},timeout:yV.get()})}if((l=(o=ki().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=ki().gapi)!=null&&u.load)i();else{const f=C2("iframefcb");return ki()[f]=()=>{gapi.load?i():t(Di(n,"network-request-failed"))},S2(`${A2()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Ef=null,e})}let Ef=null;function vV(n){return Ef=Ef||_V(n),Ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Iu(5e3,15e3),EV="__/auth/iframe",SV="emulator/auth/iframe",AV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wV(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qm(e,SV):`https://${n.config.authDomain}/${EV}`,i={apiKey:e.apiKey,appName:n.name,v:Pa},o=CV.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${wu(i).slice(1)}`}async function IV(n){const e=await vV(n),t=ki().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:wV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AV,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=Di(n,"network-request-failed"),f=ki().setTimeout(()=>{l(u)},TV.get());function m(){ki().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bV=500,NV=600,MV="_blank",xV="http://localhost";class h0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DV(n,e,t,i=bV,o=NV){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...RV,width:i.toString(),height:o.toString(),top:l,left:u},h=on().toLowerCase();t&&(f=bA(h)?MV:t),IA(h)&&(e=e||xV,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,k])=>`${S}${I}=${k},`,"");if(p2(h)&&f!=="_self")return kV(e||"",f),new h0(null);const T=window.open(e||"",f,v);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new h0(T)}function kV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="__/auth/handler",VV="emulator/auth/handler",UV=encodeURIComponent("fac");async function p0(n,e,t,i,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Pa,eventId:o};if(e instanceof LA){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Uk(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Ru){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),h=m?`#${UV}=${encodeURIComponent(m)}`:"";return`${LV(n)}?${wu(f).slice(1)}${h}`}function LV({config:n}){return n.emulator?Qm(n,VV):`https://${n.authDomain}/${PV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="webStorageSupport";class OV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HA,this._completeRedirectFn=lV,this._overrideRedirectResult=rV}async _openPopup(e,t,i,o){var u;fs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await p0(e,t,i,fm(),o);return DV(e,l,ig())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await p0(e,t,i,fm(),o);return B2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await IV(e),i=new cV(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Op,{type:Op},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Op];l!==void 0&&t(!!l),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kA()||RA()||eg()}}const qV=OV;var m0="@firebase/auth",g0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HV(n){Ea(new io("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PA(n)},h=new T2(i,o,l,m);return I2(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ea(new io("auth-internal",e=>{const t=tg(e.getProvider("auth").getImmediate());return(i=>new zV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(m0,g0,BV(n)),sr(m0,g0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=300,GV=uA("authIdTokenMaxAge")||FV;let y0=null;const KV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>GV)return;const o=t==null?void 0:t.token;y0!==o&&(y0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function JV(n=mA()){const e=$m(n,"auth");if(e.isInitialized())return e.getImmediate();const t=w2(n,{popupRedirectResolver:qV,persistence:[W2,O2,HA]}),i=uA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=KV(l.toString());V2(t,u,()=>u(t.currentUser)),P2(t,f=>u(f))}}const o=aA("auth");return o&&R2(t,`http://${o}`),t}function YV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}E2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Di("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",YV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HV("Browser");var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,$A;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,b){function N(){}N.prototype=b.prototype,D.F=b.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(P,M,V){for(var x=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)x[Se-2]=arguments[Se];return b.prototype[M].apply(P,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,b,N){N||(N=0);const P=Array(16);if(typeof b=="string")for(var M=0;M<16;++M)P[M]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(M=0;M<16;++M)P[M]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=D.g[0],N=D.g[1],M=D.g[2];let V=D.g[3],x;x=b+(V^N&(M^V))+P[0]+3614090360&4294967295,b=N+(x<<7&4294967295|x>>>25),x=V+(M^b&(N^M))+P[1]+3905402710&4294967295,V=b+(x<<12&4294967295|x>>>20),x=M+(N^V&(b^N))+P[2]+606105819&4294967295,M=V+(x<<17&4294967295|x>>>15),x=N+(b^M&(V^b))+P[3]+3250441966&4294967295,N=M+(x<<22&4294967295|x>>>10),x=b+(V^N&(M^V))+P[4]+4118548399&4294967295,b=N+(x<<7&4294967295|x>>>25),x=V+(M^b&(N^M))+P[5]+1200080426&4294967295,V=b+(x<<12&4294967295|x>>>20),x=M+(N^V&(b^N))+P[6]+2821735955&4294967295,M=V+(x<<17&4294967295|x>>>15),x=N+(b^M&(V^b))+P[7]+4249261313&4294967295,N=M+(x<<22&4294967295|x>>>10),x=b+(V^N&(M^V))+P[8]+1770035416&4294967295,b=N+(x<<7&4294967295|x>>>25),x=V+(M^b&(N^M))+P[9]+2336552879&4294967295,V=b+(x<<12&4294967295|x>>>20),x=M+(N^V&(b^N))+P[10]+4294925233&4294967295,M=V+(x<<17&4294967295|x>>>15),x=N+(b^M&(V^b))+P[11]+2304563134&4294967295,N=M+(x<<22&4294967295|x>>>10),x=b+(V^N&(M^V))+P[12]+1804603682&4294967295,b=N+(x<<7&4294967295|x>>>25),x=V+(M^b&(N^M))+P[13]+4254626195&4294967295,V=b+(x<<12&4294967295|x>>>20),x=M+(N^V&(b^N))+P[14]+2792965006&4294967295,M=V+(x<<17&4294967295|x>>>15),x=N+(b^M&(V^b))+P[15]+1236535329&4294967295,N=M+(x<<22&4294967295|x>>>10),x=b+(M^V&(N^M))+P[1]+4129170786&4294967295,b=N+(x<<5&4294967295|x>>>27),x=V+(N^M&(b^N))+P[6]+3225465664&4294967295,V=b+(x<<9&4294967295|x>>>23),x=M+(b^N&(V^b))+P[11]+643717713&4294967295,M=V+(x<<14&4294967295|x>>>18),x=N+(V^b&(M^V))+P[0]+3921069994&4294967295,N=M+(x<<20&4294967295|x>>>12),x=b+(M^V&(N^M))+P[5]+3593408605&4294967295,b=N+(x<<5&4294967295|x>>>27),x=V+(N^M&(b^N))+P[10]+38016083&4294967295,V=b+(x<<9&4294967295|x>>>23),x=M+(b^N&(V^b))+P[15]+3634488961&4294967295,M=V+(x<<14&4294967295|x>>>18),x=N+(V^b&(M^V))+P[4]+3889429448&4294967295,N=M+(x<<20&4294967295|x>>>12),x=b+(M^V&(N^M))+P[9]+568446438&4294967295,b=N+(x<<5&4294967295|x>>>27),x=V+(N^M&(b^N))+P[14]+3275163606&4294967295,V=b+(x<<9&4294967295|x>>>23),x=M+(b^N&(V^b))+P[3]+4107603335&4294967295,M=V+(x<<14&4294967295|x>>>18),x=N+(V^b&(M^V))+P[8]+1163531501&4294967295,N=M+(x<<20&4294967295|x>>>12),x=b+(M^V&(N^M))+P[13]+2850285829&4294967295,b=N+(x<<5&4294967295|x>>>27),x=V+(N^M&(b^N))+P[2]+4243563512&4294967295,V=b+(x<<9&4294967295|x>>>23),x=M+(b^N&(V^b))+P[7]+1735328473&4294967295,M=V+(x<<14&4294967295|x>>>18),x=N+(V^b&(M^V))+P[12]+2368359562&4294967295,N=M+(x<<20&4294967295|x>>>12),x=b+(N^M^V)+P[5]+4294588738&4294967295,b=N+(x<<4&4294967295|x>>>28),x=V+(b^N^M)+P[8]+2272392833&4294967295,V=b+(x<<11&4294967295|x>>>21),x=M+(V^b^N)+P[11]+1839030562&4294967295,M=V+(x<<16&4294967295|x>>>16),x=N+(M^V^b)+P[14]+4259657740&4294967295,N=M+(x<<23&4294967295|x>>>9),x=b+(N^M^V)+P[1]+2763975236&4294967295,b=N+(x<<4&4294967295|x>>>28),x=V+(b^N^M)+P[4]+1272893353&4294967295,V=b+(x<<11&4294967295|x>>>21),x=M+(V^b^N)+P[7]+4139469664&4294967295,M=V+(x<<16&4294967295|x>>>16),x=N+(M^V^b)+P[10]+3200236656&4294967295,N=M+(x<<23&4294967295|x>>>9),x=b+(N^M^V)+P[13]+681279174&4294967295,b=N+(x<<4&4294967295|x>>>28),x=V+(b^N^M)+P[0]+3936430074&4294967295,V=b+(x<<11&4294967295|x>>>21),x=M+(V^b^N)+P[3]+3572445317&4294967295,M=V+(x<<16&4294967295|x>>>16),x=N+(M^V^b)+P[6]+76029189&4294967295,N=M+(x<<23&4294967295|x>>>9),x=b+(N^M^V)+P[9]+3654602809&4294967295,b=N+(x<<4&4294967295|x>>>28),x=V+(b^N^M)+P[12]+3873151461&4294967295,V=b+(x<<11&4294967295|x>>>21),x=M+(V^b^N)+P[15]+530742520&4294967295,M=V+(x<<16&4294967295|x>>>16),x=N+(M^V^b)+P[2]+3299628645&4294967295,N=M+(x<<23&4294967295|x>>>9),x=b+(M^(N|~V))+P[0]+4096336452&4294967295,b=N+(x<<6&4294967295|x>>>26),x=V+(N^(b|~M))+P[7]+1126891415&4294967295,V=b+(x<<10&4294967295|x>>>22),x=M+(b^(V|~N))+P[14]+2878612391&4294967295,M=V+(x<<15&4294967295|x>>>17),x=N+(V^(M|~b))+P[5]+4237533241&4294967295,N=M+(x<<21&4294967295|x>>>11),x=b+(M^(N|~V))+P[12]+1700485571&4294967295,b=N+(x<<6&4294967295|x>>>26),x=V+(N^(b|~M))+P[3]+2399980690&4294967295,V=b+(x<<10&4294967295|x>>>22),x=M+(b^(V|~N))+P[10]+4293915773&4294967295,M=V+(x<<15&4294967295|x>>>17),x=N+(V^(M|~b))+P[1]+2240044497&4294967295,N=M+(x<<21&4294967295|x>>>11),x=b+(M^(N|~V))+P[8]+1873313359&4294967295,b=N+(x<<6&4294967295|x>>>26),x=V+(N^(b|~M))+P[15]+4264355552&4294967295,V=b+(x<<10&4294967295|x>>>22),x=M+(b^(V|~N))+P[6]+2734768916&4294967295,M=V+(x<<15&4294967295|x>>>17),x=N+(V^(M|~b))+P[13]+1309151649&4294967295,N=M+(x<<21&4294967295|x>>>11),x=b+(M^(N|~V))+P[4]+4149444226&4294967295,b=N+(x<<6&4294967295|x>>>26),x=V+(N^(b|~M))+P[11]+3174756917&4294967295,V=b+(x<<10&4294967295|x>>>22),x=M+(b^(V|~N))+P[2]+718787259&4294967295,M=V+(x<<15&4294967295|x>>>17),x=N+(V^(M|~b))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+V&4294967295}i.prototype.v=function(D,b){b===void 0&&(b=D.length);const N=b-this.blockSize,P=this.C;let M=this.h,V=0;for(;V<b;){if(M==0)for(;V<=N;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<b;)if(P[M++]=D.charCodeAt(V++),M==this.blockSize){o(this,P),M=0;break}}else for(;V<b;)if(P[M++]=D[V++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=b},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;b=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=b&255,b/=256;for(this.v(D),D=Array(16),b=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)D[b++]=this.g[N]>>>P&255;return D};function l(D,b){var N=f;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=b(D)}function u(D,b){this.h=b;const N=[];let P=!0;for(let M=D.length-1;M>=0;M--){const V=D[M]|0;P&&V==b||(N[M]=V,P=!1)}this.g=N}var f={};function m(D){return-128<=D&&D<128?l(D,function(b){return new u([b|0],b<0?-1:0)}):new u([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return z(h(-D));const b=[];let N=1;for(let P=0;D>=N;P++)b[P]=D/N|0,N*=4294967296;return new u(b,0)}function v(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return z(v(D.substring(1),b));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(b,8));let P=T;for(let V=0;V<D.length;V+=8){var M=Math.min(8,D.length-V);const x=parseInt(D.substring(V,V+M),b);M<8?(M=h(Math.pow(b,M)),P=P.j(M).add(h(x))):(P=P.j(N),P=P.add(h(x)))}return P}var T=m(0),S=m(1),I=m(16777216);n=u.prototype,n.m=function(){if(O(this))return-z(this).m();let D=0,b=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);D+=(P>=0?P:4294967296+P)*b,b*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(O(this))return"-"+z(this).toString(D);const b=h(Math.pow(D,6));var N=this;let P="";for(;;){const M=Z(N,b).g;N=W(N,M.j(b));let V=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=M,k(N))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function O(D){return D.h==-1}n.l=function(D){return D=W(this,D),O(D)?-1:k(D)?0:1};function z(D){const b=D.g.length,N=[];for(let P=0;P<b;P++)N[P]=~D.g[P];return new u(N,~D.h).add(S)}n.abs=function(){return O(this)?z(this):this},n.add=function(D){const b=Math.max(this.g.length,D.g.length),N=[];let P=0;for(let M=0;M<=b;M++){let V=P+(this.i(M)&65535)+(D.i(M)&65535),x=(V>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);P=x>>>16,V&=65535,x&=65535,N[M]=x<<16|V}return new u(N,N[N.length-1]&-2147483648?-1:0)};function W(D,b){return D.add(z(b))}n.j=function(D){if(k(this)||k(D))return T;if(O(this))return O(D)?z(this).j(z(D)):z(z(this).j(D));if(O(D))return z(this.j(z(D)));if(this.l(I)<0&&D.l(I)<0)return h(this.m()*D.m());const b=this.g.length+D.g.length,N=[];for(var P=0;P<2*b;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<D.g.length;M++){const V=this.i(P)>>>16,x=this.i(P)&65535,Se=D.i(M)>>>16,we=D.i(M)&65535;N[2*P+2*M]+=x*we,$(N,2*P+2*M),N[2*P+2*M+1]+=V*we,$(N,2*P+2*M+1),N[2*P+2*M+1]+=x*Se,$(N,2*P+2*M+1),N[2*P+2*M+2]+=V*Se,$(N,2*P+2*M+2)}for(D=0;D<b;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=b;D<2*b;D++)N[D]=0;return new u(N,0)};function $(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function J(D,b){this.g=D,this.h=b}function Z(D,b){if(k(b))throw Error("division by zero");if(k(D))return new J(T,T);if(O(D))return b=Z(z(D),b),new J(z(b.g),z(b.h));if(O(b))return b=Z(D,z(b)),new J(z(b.g),b.h);if(D.g.length>30){if(O(D)||O(b))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=b;P.l(D)<=0;)N=ue(N),P=ue(P);var M=le(N,1),V=le(P,1);for(P=le(P,2),N=le(N,2);!k(P);){var x=V.add(P);x.l(D)<=0&&(M=M.add(N),V=x),P=le(P,1),N=le(N,1)}return b=W(D,M.j(b)),new J(M,b)}for(M=T;D.l(b)>=0;){for(N=Math.max(1,Math.floor(D.m()/b.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=h(N),x=V.j(b);O(x)||x.l(D)>0;)N-=P,V=h(N),x=V.j(b);k(V)&&(V=S),M=M.add(V),D=W(D,x)}return new J(M,D)}n.B=function(D){return Z(this,D).h},n.and=function(D){const b=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)&D.i(P);return new u(N,this.h&D.h)},n.or=function(D){const b=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)|D.i(P);return new u(N,this.h|D.h)},n.xor=function(D){const b=Math.max(this.g.length,D.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)^D.i(P);return new u(N,this.h^D.h)};function ue(D){const b=D.g.length+1,N=[];for(let P=0;P<b;P++)N[P]=D.i(P)<<1|D.i(P-1)>>>31;return new u(N,D.h)}function le(D,b){const N=b>>5;b%=32;const P=D.g.length-N,M=[];for(let V=0;V<P;V++)M[V]=b>0?D.i(V+N)>>>b|D.i(V+N+1)<<32-b:D.i(V+N);return new u(M,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$A=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,rr=u}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WA,Wl,QA,Sf,pm,ZA,jA,eC;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(p,E){if(E)e:{var C=i;p=p.split(".");for(var R=0;R<p.length-1;R++){var F=p[R];if(!(F in C))break e;C=C[F]}p=p[p.length-1],R=C[p],E=E(R),E!=R&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(E){var C=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&C.push([R,E[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function m(p,E,C){return p.call.apply(p.bind,arguments)}function h(p,E,C){return h=m,h.apply(null,arguments)}function v(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function T(p,E){function C(){}C.prototype=E.prototype,p.Z=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(R,F,Q){for(var ce=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ce[xe-2]=arguments[xe];return E.prototype[F].apply(R,ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function I(p){const E=p.length;if(E>0){const C=Array(E);for(let R=0;R<E;R++)C[R]=p[R];return C}return[]}function k(p,E){for(let R=1;R<arguments.length;R++){const F=arguments[R];var C=typeof F;if(C=C!="object"?C:F?Array.isArray(F)?"array":C:"null",C=="array"||C=="object"&&typeof F.length=="number"){C=p.length||0;const Q=F.length||0;p.length=C+Q;for(let ce=0;ce<Q;ce++)p[C+ce]=F[ce]}else p.push(F)}}class O{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function z(p){u.setTimeout(()=>{throw p},0)}function W(){var p=D;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class ${constructor(){this.h=this.g=null}add(E,C){const R=J.get();R.set(E,C),this.h?this.h.next=R:this.g=R,this.h=R}}var J=new O(()=>new Z,p=>p.reset());class Z{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,le=!1,D=new $,b=()=>{const p=Promise.resolve(void 0);ue=()=>{p.then(N)}};function N(){for(var p;p=W();){try{p.h.call(p.g)}catch(C){z(C)}var E=J;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}le=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return p})();function x(p){return/^[\s\xa0]*$/.test(p)}function Se(p,E){M.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}T(Se,M),Se.prototype.init=function(p,E){const C=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(p,E,C,R,F){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!R,this.ha=F,this.key=++X,this.da=this.fa=!1}function pe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function He(p,E,C){for(const R in p)E.call(C,p[R],R,p)}function Xe(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function B(p){const E={};for(const C in p)E[C]=p[C];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(p,E){let C,R;for(let F=1;F<arguments.length;F++){R=arguments[F];for(C in R)p[C]=R[C];for(let Q=0;Q<ne.length;Q++)C=ne[Q],Object.prototype.hasOwnProperty.call(R,C)&&(p[C]=R[C])}}function fe(p){this.src=p,this.g={},this.h=0}fe.prototype.add=function(p,E,C,R,F){const Q=p.toString();p=this.g[Q],p||(p=this.g[Q]=[],this.h++);const ce=be(p,E,R,F);return ce>-1?(E=p[ce],C||(E.fa=!1)):(E=new oe(E,this.src,Q,!!R,F),E.fa=C,p.push(E)),E};function ve(p,E){const C=E.type;if(C in p.g){var R=p.g[C],F=Array.prototype.indexOf.call(R,E,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(R,F,1),Q&&(pe(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function be(p,E,C,R){for(let F=0;F<p.length;++F){const Q=p[F];if(!Q.da&&Q.listener==E&&Q.capture==!!C&&Q.ha==R)return F}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),mt={};function Ze(p,E,C,R,F){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)Ze(p,E[Q],C,R,F);return null}return C=Ha(C),p&&p[we]?p.J(E,C,f(R)?!!R.capture:!1,F):mr(p,E,C,!1,R,F)}function mr(p,E,C,R,F,Q){if(!E)throw Error("Invalid event type");const ce=f(F)?!!F.capture:!!F;let xe=gr(p);if(xe||(p[Pe]=xe=new fe(p)),C=xe.add(E,C,R,ce,Q),C.proxy)return C;if(R=ho(),C.proxy=R,R.src=p,R.listener=C,p.addEventListener)V||(F=ce),F===void 0&&(F=!1),p.addEventListener(E.toString(),R,F);else if(p.attachEvent)p.attachEvent(ai(E.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ho(){function p(C){return E.call(p.src,p.listener,C)}const E=za;return p}function po(p,E,C,R,F){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)po(p,E[Q],C,R,F);else R=f(R)?!!R.capture:!!R,C=Ha(C),p&&p[we]?(p=p.i,Q=String(E).toString(),Q in p.g&&(E=p.g[Q],C=be(E,C,R,F),C>-1&&(pe(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[Q],p.h--)))):p&&(p=gr(p))&&(E=p.g[E.toString()],p=-1,E&&(p=be(E,C,R,F)),(C=p>-1?E[p]:null)&&mo(C))}function mo(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[we])ve(E.i,p);else{var C=p.type,R=p.proxy;E.removeEventListener?E.removeEventListener(C,R,p.capture):E.detachEvent?E.detachEvent(ai(C),R):E.addListener&&E.removeListener&&E.removeListener(R),(C=gr(E))?(ve(C,p),C.h==0&&(C.src=null,E[Pe]=null)):pe(p)}}}function ai(p){return p in mt?mt[p]:mt[p]="on"+p}function za(p,E){if(p.da)p=!0;else{E=new Se(E,this);const C=p.listener,R=p.ha||p.src;p.fa&&mo(p),p=C.call(R,E)}return p}function gr(p){return p=p[Pe],p instanceof fe?p:null}var Ba="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ha(p){return typeof p=="function"?p:(p[Ba]||(p[Ba]=function(E){return p.handleEvent(E)}),p[Ba])}function Ct(){P.call(this),this.i=new fe(this),this.M=this,this.G=null}T(Ct,P),Ct.prototype[we]=!0,Ct.prototype.removeEventListener=function(p,E,C,R){po(this,p,E,C,R)};function Vt(p,E){var C,R=p.G;if(R)for(C=[];R;R=R.G)C.push(R);if(p=p.M,R=E.type||E,typeof E=="string")E=new M(E,p);else if(E instanceof M)E.target=E.target||p;else{var F=E;E=new M(R,p),ae(E,F)}F=!0;let Q,ce;if(C)for(ce=C.length-1;ce>=0;ce--)Q=E.g=C[ce],F=gs(Q,R,!0,E)&&F;if(Q=E.g=p,F=gs(Q,R,!0,E)&&F,F=gs(Q,R,!1,E)&&F,C)for(ce=0;ce<C.length;ce++)Q=E.g=C[ce],F=gs(Q,R,!1,E)&&F}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const C=p.g[E];for(let R=0;R<C.length;R++)pe(C[R]);delete p.g[E],p.h--}}this.G=null},Ct.prototype.J=function(p,E,C,R){return this.i.add(String(p),E,!1,C,R)},Ct.prototype.K=function(p,E,C,R){return this.i.add(String(p),E,!0,C,R)};function gs(p,E,C,R){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let F=!0;for(let Q=0;Q<E.length;++Q){const ce=E[Q];if(ce&&!ce.da&&ce.capture==C){const xe=ce.listener,vt=ce.ha||ce.src;ce.fa&&ve(p.i,ce),F=xe.call(vt,R)!==!1&&F}}return F&&!R.defaultPrevented}function Ed(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(p,E||0)}function Pu(p){p.g=Ed(()=>{p.g=null,p.i&&(p.i=!1,Pu(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class an extends P{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Pu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(p){P.call(this),this.h=p,this.g={}}T(yr,P);var Fa=[];function Ga(p){He(p.g,function(E,C){this.g.hasOwnProperty(C)&&mo(E)},p),p.g={}}yr.prototype.N=function(){yr.Z.N.call(this),Ga(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=u.JSON.stringify,Sd=u.JSON.parse,Vu=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Uu(){}function Lu(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){M.call(this,"d")}T(Kt,M);function Nn(){M.call(this,"c")}T(Nn,M);var _t={},Ou=null;function go(){return Ou=Ou||new Ct}_t.Ia="serverreachability";function qu(p){M.call(this,_t.Ia,p)}T(qu,M);function li(p){const E=go();Vt(E,new qu(E))}_t.STAT_EVENT="statevent";function _r(p,E){M.call(this,_t.STAT_EVENT,p),this.stat=E}T(_r,M);function wt(p){const E=go();Vt(E,new _r(E,p))}_t.Ja="timingevent";function ui(p,E){M.call(this,_t.Ja,p),this.size=E}T(ui,M);function ci(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},E)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Ad(p,E,C,R,F,Q){p.info(function(){if(p.g)if(Q){var ce="",xe=Q.split("&");for(let $e=0;$e<xe.length;$e++){var vt=xe[$e].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const kn=dt.split("_");ce=kn.length>=2&&kn[1]=="type"?ce+(dt+"="+vt+"&"):ce+(dt+"=redacted&")}}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+R+") [attempt "+F+"]: "+E+`
`+C+`
`+ce})}function zu(p,E,C,R,F,Q,ce){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+F+"]: "+E+`
`+C+`
`+Q+" "+ce})}function fi(p,E,C,R){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+Cd(p,C)+(R?" "+R:"")})}function vr(p,E){p.info(function(){return"TIMEOUT: "+E})}Jn.prototype.info=function(){};function Cd(p,E){if(!p.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(p=0;p<Q.length;p++)if(Array.isArray(Q[p])){var C=Q[p];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var F=R[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ce=1;ce<R.length;ce++)R[ce]=""}}}}return ys(Q)}catch{return E}}var Tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ka={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ja;function Er(){}T(Er,Uu),Er.prototype.g=function(){return new XMLHttpRequest},Ja=new Er;function zi(p){return encodeURIComponent(String(p))}function Bu(p){var E=1;p=p.split(":");const C=[];for(;E>0&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function Yn(p,E,C,R){this.j=p,this.i=E,this.l=C,this.S=R||1,this.V=new yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var It={},zt={};function di(p,E,C){p.M=1,p.A=Sr(bt(E)),p.u=C,p.R=!0,yo(p,null)}function yo(p,E){p.F=Date.now(),hi(p),p.B=bt(p.A);var C=p.B,R=p.S;Array.isArray(R)||(R=[String(R)]),Eo(C.i,"t",R),p.C=0,C=p.j.L,p.h=new Xn,p.g=nc(p.j,C?E:null,!p.u),p.P>0&&(p.O=new an(h(p.Y,p,p.g),p.P)),E=p.V,C=p.g,R=p.ba;var F="readystatechange";Array.isArray(F)||(F&&(Fa[0]=F.toString()),F=Fa);for(let Q=0;Q<F.length;Q++){const ce=Ze(C,F[Q],R||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=p.J?B(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),li(),Ad(p.i,p.v,p.B,p.l,p.S,p.u)}Yn.prototype.ba=function(p){p=p.target;const E=this.O;E&&Qn(p)==3?E.j():this.Y(p)},Yn.prototype.Y=function(p){try{if(p==this.g)e:{const xe=Qn(this.g),vt=this.g.ya(),$e=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||xe!=4||vt==7||(vt==8||$e<=0?li(3):li(2)),pi(this);var E=this.g.ca();this.X=E;var C=wd(this);if(this.o=E==200,zu(this.i,this.v,this.B,this.l,this.S,xe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,F=this.g;if((R=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(R)){var Q=R;break t}}Q=null}if(p=Q)fi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mi(this,p);else{this.o=!1,this.m=3,wt(12),Tn(this),Mn(this);break e}}if(this.R){p=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=Fu(this,C),dt==zt){xe==4&&(this.m=4,wt(14),p=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==It){this.m=4,wt(15),fi(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else fi(this.i,this.l,dt,null),mi(this,dt);if(Hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||C.length!=0||this.h.h||(this.m=1,wt(16),p=!1),this.o=this.o&&p,!p)fi(this.i,this.l,C,"[Invalid Chunked Response]"),Tn(this),Mn(this);else if(C.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),al(ce),ce.P=!0,wt(11))}}else fi(this.i,this.l,C,null),mi(this,C);xe==4&&Tn(this),this.o&&!this.K&&(xe==4?Zu(this.j,this):(this.o=!1,hi(this)))}else Hi(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Tn(this),Mn(this)}}}catch{}finally{}};function wd(p){if(!Hu(p))return p.g.la();const E=Jt(p.g);if(E==="")return"";let C="";const R=E.length,F=Qn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Tn(p),Mn(p),"";p.h.i=new u.TextDecoder}for(let Q=0;Q<R;Q++)p.h.h=!0,C+=p.h.i.decode(E[Q],{stream:!(F&&Q==R-1)});return E.length=0,p.h.g+=C,p.C=0,p.h.g}function Hu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Fu(p,E){var C=p.C,R=E.indexOf(`
`,C);return R==-1?zt:(C=Number(E.substring(C,R)),isNaN(C)?It:(R+=1,R+C>E.length?zt:(E=E.slice(R,R+C),p.C=R+C,E)))}Yn.prototype.cancel=function(){this.K=!0,Tn(this)};function hi(p){p.T=Date.now()+p.H,_o(p,p.H)}function _o(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ci(h(p.aa,p),E)}function pi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Yn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(vr(this.i,this.B),this.M!=2&&(li(),wt(17)),Tn(this),this.m=2,Mn(this)):_o(this,this.T-p)};function Mn(p){p.j.I==0||p.K||Zu(p.j,p)}function Tn(p){pi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,Ga(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function mi(p,E){try{var C=p.j;if(C.I!=0&&(C.g==p||yi(C.h,p))){if(!p.L&&yi(C.h,p)&&C.I==3){try{var R=C.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var F=R;if(F[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)Io(C),ws(C);else break e;Nr(C),wt(18)}}else C.xa=F[1],0<C.xa-C.K&&F[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=ci(h(C.Va,C),6e3));gi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ai(C,11)}else if((p.L||C.g==p)&&Io(C),!x(E))for(F=C.Ba.g.parse(E),E=0;E<F.length;E++){let $e=F[E];const dt=$e[0];if(!(dt<=C.K))if(C.K=dt,$e=$e[1],C.I==2)if($e[0]=="c"){C.M=$e[1],C.ba=$e[2];const kn=$e[3];kn!=null&&(C.ka=kn,C.j.info("VER="+C.ka));const Ci=$e[4];Ci!=null&&(C.za=Ci,C.j.info("SVER="+C.za));const Zn=$e[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(R=1.5*Zn,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const jn=p.g;if(jn){const Mr=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var Q=R.h;Q.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&($a(Q,Q.h),Q.h=null))}if(R.G){const Ro=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ro&&(R.wa=Ro,je(R.J,R.G,Ro))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var ce=p;if(R.na=tc(R,R.L?R.ba:null,R.W),ce.L){Wa(R.h,ce);var xe=ce,vt=R.O;vt&&(xe.H=vt),xe.D&&(pi(xe),hi(xe)),R.g=ce}else Wu(R);C.i.length>0&&Si(C)}else $e[0]!="stop"&&$e[0]!="close"||Ai(C,7);else C.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Ai(C,7):rl(C):$e[0]!="noop"&&C.l&&C.l.qa($e),C.A=0)}}li(4)}catch{}}var Rt=class{constructor(p,E){this.g=p,this.map=E}};function Ya(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xa(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function gi(p){return p.h?1:p.g?p.g.size:0}function yi(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function $a(p,E){p.g?p.g.add(E):p.h=E}function Wa(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Ya.prototype.cancel=function(){if(this.i=Qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Qa(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.G);return E}return I(p.i)}var Gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vo(p,E){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const R=p[C].indexOf("=");let F,Q=null;R>=0?(F=p[C].substring(0,R),Q=p[C].substring(R+1)):F=p[C],E(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function En(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof En?(this.l=p.l,Bt(this,p.j),this.o=p.o,this.g=p.g,_s(this,p.u),this.h=p.h,Za(this,Xu(p.i)),this.m=p.m):p&&(E=String(p).match(Gu))?(this.l=!1,Bt(this,E[1]||"",!0),this.o=_i(E[2]||""),this.g=_i(E[3]||"",!0),_s(this,E[4]),this.h=_i(E[5]||"",!0),Za(this,E[6]||"",!0),this.m=_i(E[7]||"")):(this.l=!1,this.i=new Ts(null,this.l))}En.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(Ar(E,To,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(Ar(E,To,!0),"@"),p.push(zi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Ar(C,C.charAt(0)=="/"?ja:Ku,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Ar(C,Ju)),p.join("")},En.prototype.resolve=function(p){const E=bt(this);let C=!!p.j;C?Bt(E,p.j):C=!!p.o,C?E.o=p.o:C=!!p.g,C?E.g=p.g:C=p.u!=null;var R=p.h;if(C)_s(E,p.u);else if(C=!!p.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var F=E.h.lastIndexOf("/");F!=-1&&(R=E.h.slice(0,F+1)+R)}if(F=R,F==".."||F==".")R="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){R=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let ce=0;ce<F.length;){const xe=F[ce++];xe=="."?R&&ce==F.length&&Q.push(""):xe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&ce==F.length&&Q.push("")):(Q.push(xe),R=!0)}R=Q.join("/")}else R=F}return C?E.h=R:C=p.i.toString()!=="",C?Za(E,Xu(p.i)):C=!!p.m,C&&(E.m=p.m),E};function bt(p){return new En(p)}function Bt(p,E,C){p.j=C?_i(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function _s(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function Za(p,E,C){E instanceof Ts?(p.i=E,So(p.i,p.l)):(C||(E=Ar(E,vs)),p.i=new Ts(E,p.l))}function je(p,E,C){p.i.set(E,C)}function Sr(p){return je(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function _i(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ar(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,fn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function fn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var To=/[#\/\?@]/g,Ku=/[#\?:]/g,ja=/[#\?]/g,vs=/[#\?@]/g,Ju=/#/g;function Ts(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function dn(p){p.g||(p.g=new Map,p.h=0,p.i&&vo(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Ts.prototype,n.add=function(p,E){dn(this),this.i=null,p=Es(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function Yu(p,E){dn(p),E=Es(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function el(p,E){return dn(p),E=Es(p,E),p.g.has(E)}n.forEach=function(p,E){dn(this),this.g.forEach(function(C,R){C.forEach(function(F){p.call(E,F,R,this)},this)},this)};function tl(p,E){dn(p);let C=[];if(typeof E=="string")el(p,E)&&(C=C.concat(p.g.get(Es(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)C=C.concat(p[E]);return C}n.set=function(p,E){return dn(this),this.i=null,p=Es(this,p),el(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=tl(this,p),p.length>0?String(p[0]):E):E};function Eo(p,E,C){Yu(p,E),C.length>0&&(p.i=null,p.g.set(Es(p,E),I(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var C=E[R];const F=zi(C);C=tl(this,C);for(let Q=0;Q<C.length;Q++){let ce=F;C[Q]!==""&&(ce+="="+zi(C[Q])),p.push(ce)}}return this.i=p.join("&")};function Xu(p){const E=new Ts;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function Es(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function So(p,E){E&&!p.j&&(dn(p),p.i=null,p.g.forEach(function(C,R){const F=R.toLowerCase();R!=F&&(Yu(this,R),Eo(this,F,C))},p)),p.j=E}function $n(p,E){const C=new Jn;if(u.Image){const R=new Image;R.onload=v(xn,C,"TestLoadImage: loaded",!0,E,R),R.onerror=v(xn,C,"TestLoadImage: error",!1,E,R),R.onabort=v(xn,C,"TestLoadImage: abort",!1,E,R),R.ontimeout=v(xn,C,"TestLoadImage: timeout",!1,E,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else E(!1)}function nl(p,E){const C=new Jn,R=new AbortController,F=setTimeout(()=>{R.abort(),xn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:R.signal}).then(Q=>{clearTimeout(F),Q.ok?xn(C,"TestPingServer: ok",!0,E):xn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(F),xn(C,"TestPingServer: error",!1,E)})}function xn(p,E,C,R,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),R(C)}catch{}}function Ss(){this.g=new Vu}function vi(p){this.i=p.Sb||null,this.h=p.ab||!1}T(vi,Uu),vi.prototype.g=function(){return new Cr(this.i,this.h)};function Cr(p,E){Ct.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Cr,Ct),n=Cr.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,Wn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ao(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ao(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?As(this):Wn(this),this.readyState==3&&Ao(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,As(this))},n.Na=function(p){this.g&&(this.response=p,As(this))},n.ga=function(){this.g&&As(this)};function As(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Wn(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function Wn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Dn(p){let E="";return He(p,function(C,R){E+=R,E+=":",E+=C,E+=`\r
`}),E}function wr(p,E,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Dn(C),typeof p=="string"?C!=null&&zi(C):je(p,E,C))}function nt(p){Ct.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Ct);var Ti=/^https?$/i,il=["POST","PUT"];n=nt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ja.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(Q){Ir(this,Q);return}if(p=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var F in R)C.set(F,R[F]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())C.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(il,E,void 0)>=0)||R||F||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of C)this.g.setRequestHeader(Q,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Q){Ir(this,Q)}};function Ir(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,sl(p),Bi(p)}function sl(p){p.A||(p.A=!0,Vt(p,"complete"),Vt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Vt(this,"complete"),Vt(this,"abort"),Bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},n.Xa=function(){Rr(this)};function Rr(p){if(p.h&&typeof l<"u"){if(p.v&&Qn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Vt(p,"readystatechange"),Qn(p)==4){p.h=!1;try{const Q=p.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var R;if(R=Q===0){let ce=String(p.D).match(Gu)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),R=!Ti.test(ce?ce.toLowerCase():"")}C=R}if(C)Vt(p,"complete"),Vt(p,"success");else{p.o=6;try{var F=Qn(p)>2?p.g.statusText:""}catch{F=""}p.l=F+" ["+p.ca()+"]",sl(p)}}finally{Bi(p)}}}}function Bi(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,E||Vt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Qn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),Sd(E)}};function Jt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(p){const E={};p=(p.g&&Qn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(x(p[R]))continue;var C=Bu(p[R]);const F=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=E[F]||[];E[F]=Q,Q.push(C)}Xe(E,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function Cs(p){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,p),this.Za=Ei("retryDelaySeedMs",1e4,p),this.Ta=Ei("forwardChannelMaxRetries",2,p),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ya(p&&p.concurrentRequestLimit),this.Ba=new Ss,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Cs.prototype,n.ka=8,n.I=1,n.connect=function(p,E,C,R){wt(0),this.W=p,this.H=E||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=tc(this,null,this.W),Si(this)};function rl(p){if(Co(p),p.I==3){var E=p.V++,C=bt(p.J);if(je(C,"SID",p.M),je(C,"RID",E),je(C,"TYPE","terminate"),br(p,C),E=new Yn(p,p.j,E),E.M=2,E.A=Sr(bt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=nc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),hi(E)}ec(p)}function ws(p){p.g&&(al(p),p.g.cancel(),p.g=null)}function Co(p){ws(p),p.v&&(u.clearTimeout(p.v),p.v=null),Io(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Si(p){if(!Xa(p.h)&&!p.m){p.m=!0;var E=p.Ea;ue||b(),le||(ue(),le=!0),D.add(E,p),p.D=0}}function wo(p,E){return gi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ci(h(p.Ea,p,E),ju(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const F=new Yn(this,this.j,p);let Q=this.o;if(this.U&&(Q?(Q=B(Q),ae(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=$u(this,F,E),C=bt(this.J),je(C,"RID",p),je(C,"CVER",22),this.G&&je(C,"X-HTTP-Session-Id",this.G),br(this,C),Q&&(this.R?E="headers="+zi(Dn(Q))+"&"+E:this.u&&wr(C,this.u,Q)),$a(this.h,F),this.Ra&&je(C,"TYPE","init"),this.S?(je(C,"$req",E),je(C,"SID","null"),F.U=!0,di(F,C,null)):di(F,C,E),this.I=2}}else this.I==3&&(p?ol(this,p):this.i.length==0||Xa(this.h)||ol(this))};function ol(p,E){var C;E?C=E.l:C=p.V++;const R=bt(p.J);je(R,"SID",p.M),je(R,"RID",C),je(R,"AID",p.K),br(p,R),p.u&&p.o&&wr(R,p.u,p.o),C=new Yn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),E&&(p.i=E.G.concat(p.i)),E=$u(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),$a(p.h,C),di(C,R,E)}function br(p,E){p.H&&He(p.H,function(C,R){je(E,R,C)}),p.l&&He({},function(C,R){je(E,R,C)})}function $u(p,E,C){C=Math.min(p.i.length,C);const R=p.l?h(p.l.Ka,p.l,p):null;e:{var F=p.i;let xe=-1;for(;;){const vt=["count="+C];xe==-1?C>0?(xe=F[0].g,vt.push("ofs="+xe)):xe=0:vt.push("ofs="+xe);let $e=!0;for(let dt=0;dt<C;dt++){var Q=F[dt].g;const kn=F[dt].map;if(Q-=xe,Q<0)xe=Math.max(0,F[dt].g-100),$e=!1;else try{Q="req"+Q+"_"||"";try{var ce=kn instanceof Map?kn:Object.entries(kn);for(const[Ci,Zn]of ce){let jn=Zn;f(Zn)&&(jn=ys(Zn)),vt.push(Q+Ci+"="+encodeURIComponent(jn))}}catch(Ci){throw vt.push(Q+"type="+encodeURIComponent("_badmap")),Ci}}catch{R&&R(kn)}}if($e){ce=vt.join("&");break e}}ce=void 0}return p=p.i.splice(0,C),E.G=p,ce}function Wu(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;ue||b(),le||(ue(),le=!0),D.add(E,p),p.A=0}}function Nr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ci(h(p.Da,p),ju(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ci(h(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),ws(this),Qu(this))};function al(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Qu(p){p.g=new Yn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=bt(p.na);je(E,"RID","rpc"),je(E,"SID",p.M),je(E,"AID",p.K),je(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&je(E,"TO",p.ia),je(E,"TYPE","xmlhttp"),br(p,E),p.u&&p.o&&wr(E,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=Sr(bt(E)),C.u=null,C.R=!0,yo(C,p)}n.Va=function(){this.C!=null&&(this.C=null,ws(this),Nr(this),wt(19))};function Io(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Zu(p,E){var C=null;if(p.g==E){Io(p),al(p),p.g=null;var R=2}else if(yi(p.h,E))C=E.G,Wa(p.h,E),R=1;else return;if(p.I!=0){if(E.o)if(R==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var F=p.D;R=go(),Vt(R,new ui(R,C)),Si(p)}else Wu(p);else if(F=E.m,F==3||F==0&&E.X>0||!(R==1&&wo(p,E)||R==2&&Nr(p)))switch(C&&C.length>0&&(E=p.h,E.i=E.i.concat(C)),F){case 1:Ai(p,5);break;case 4:Ai(p,10);break;case 3:Ai(p,6);break;default:Ai(p,2)}}}function ju(p,E){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*E}function Ai(p,E){if(p.j.info("Error code "+E),E==2){var C=h(p.bb,p),R=p.Ua;const F=!R;R=new En(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(R,"https"),Sr(R),F?$n(R.toString(),C):nl(R.toString(),C)}else wt(2);p.I=0,p.l&&p.l.pa(E),ec(p),Co(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function ec(p){if(p.I=0,p.ja=[],p.l){const E=Qa(p.h);(E.length!=0||p.i.length!=0)&&(k(p.ja,E),k(p.ja,p.i),p.h.i.length=0,I(p.i),p.i.length=0),p.l.oa()}}function tc(p,E,C){var R=C instanceof En?bt(C):new En(C);if(R.g!="")E&&(R.g=E+"."+R.g),_s(R,R.u);else{var F=u.location;R=F.protocol,E=E?E+"."+F.hostname:F.hostname,F=+F.port;const Q=new En(null);R&&Bt(Q,R),E&&(Q.g=E),F&&_s(Q,F),C&&(Q.h=C),R=Q}return C=p.G,E=p.wa,C&&E&&je(R,C,E),je(R,"VER",p.ka),br(p,R),R}function nc(p,E,C){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new nt(new vi({ab:C})):new nt(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}n=ic.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Is(){}Is.prototype.g=function(p,E){return new ln(p,E)};function ln(p,E){Ct.call(this),this.g=new Cs(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!x(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!x(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Fi(this)}T(ln,Ct),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){rl(this.g)},ln.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=ys(p),p=C);E.i.push(new Rt(E.Ya++,p)),E.I==3&&Si(E)},ln.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,ln.Z.N.call(this)};function sc(p){Kt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}T(sc,Kt);function rc(){Nn.call(this),this.status=1}T(rc,Nn);function Fi(p){this.g=p}T(Fi,ic),Fi.prototype.ra=function(){Vt(this.g,"a")},Fi.prototype.qa=function(p){Vt(this.g,new sc(p))},Fi.prototype.pa=function(p){Vt(this.g,new rc)},Fi.prototype.oa=function(){Vt(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,eC=function(){return new Is},jA=function(){return go()},ZA=_t,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tr.NO_ERROR=0,Tr.TIMEOUT=8,Tr.HTTP_ERROR=6,Sf=Tr,Ka.COMPLETE="complete",QA=Ka,Lu.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Wl=Lu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,WA=nt}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});const v0="@firebase/firestore",T0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Ym("@firebase/firestore");function aa(){return ro.logLevel}function de(n,...e){if(ro.logLevel<=qe.DEBUG){const t=e.map(rg);ro.debug(`Firestore (${Ua}): ${n}`,...t)}}function ds(n,...e){if(ro.logLevel<=qe.ERROR){const t=e.map(rg);ro.error(`Firestore (${Ua}): ${n}`,...t)}}function Aa(n,...e){if(ro.logLevel<=qe.WARN){const t=e.map(rg);ro.warn(`Firestore (${Ua}): ${n}`,...t)}}function rg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,tC(n,i,t)}function tC(n,e,t){let i=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ds(i),new Error(i)}function Qe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||tC(e,o,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class $V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WV{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new or,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new or)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new nC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class QV{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZV{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new QV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class E0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new E0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new E0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=eU(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function ze(n,e){return n<e?-1:n>e?1:0}function mm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),l=e.charAt(i);if(o!==l)return qp(o)===qp(l)?ze(o,l):qp(o)?1:-1}return ze(n.length,e.length)}const tU=55296,nU=57343;function qp(n){const e=n.charCodeAt(0);return e>=tU&&e<=nU}function Ca(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="__name__";class Ni{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Ni.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const i=Ni.isNumericId(e),o=Ni.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):mm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class ct extends Ni{construct(e,t,i){return new ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const iU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Ni{construct(e,t,i){return new Zt(e,t,i)}static isValidIdentifier(e){return iU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===S0}static keyField(){return new Zt([S0])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(l(),o++)}if(l(),u)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sU(n,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A0(n){if(!Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function C0(n){if(Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ag(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function hu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ag(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Nu(n,e){if(!sC(n))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=-62135596800,I0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*I0);return new ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<w0)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-w0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Pt("string",ft._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ft(0,0))}static max(){return new Re(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function rU(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ft(t+1,0):new ft(t,i));return new lr(o,Ee.empty(),e)}function oU(n){return new lr(n.readTime,n.key,pu)}class lr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new lr(Re.min(),Ee.empty(),pu)}static max(){return new lr(Re.max(),Ee.empty(),pu)}}function aU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==lU)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,l=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++l,u&&l===o&&t()}),(m=>i(m)))})),u=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const h=m;t(e[h]).next((v=>{u[h]=v,++f,f===l&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function cU(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function ud(n){return n==null}function Hf(n){return n===0&&1/n==-1/0}function fU(n){return typeof n=="number"&&Number.isInteger(n)&&!Hf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="";function dU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R0(e)),e=hU(n.get(t),e);return R0(e)}function hU(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case rC:t+="";break;default:t+=l}}return t}function R0(n){return n+rC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=o??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Qt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new si([])}unionWith(e){let t=new qt(Zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new si(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new aC("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const pU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=pU.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cr(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="server_timestamp",uC="__type__",cC="__previous_value__",fC="__local_write_time__";function ug(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uC])==null?void 0:i.stringValue)===lC}function cd(n){const e=n.mapValue.fields[cC];return ug(e)?cd(e):e}function mu(n){const e=ur(n.mapValue.fields[fC].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,t,i,o,l,u,f,m,h,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=v}}const Ff="(default)";class gu{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="__type__",gU="__max__",hf={mapValue:{}},hC="__vector__",Gf="value";function fr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ug(n)?4:_U(n)?9007199254740991:yU(n)?10:11:Ce(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=fr(n);if(t!==fr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mu(n).isEqual(mu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=ur(o.timestampValue),f=ur(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return cr(o.bytesValue).isEqual(cr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return At(o.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return At(o.integerValue)===At(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=At(o.doubleValue),f=At(l.doubleValue);return u===f?Hf(u)===Hf(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Ca(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},f=l.mapValue.fields||{};if(b0(u)!==b0(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!Oi(u[m],f[m])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function yu(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function wa(n,e){if(n===e)return 0;const t=fr(n),i=fr(e);if(t!==i)return ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=At(l.integerValue||l.doubleValue),m=At(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return M0(n.timestampValue,e.timestampValue);case 4:return M0(mu(n),mu(e));case 5:return mm(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=cr(l),m=cr(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),m=u.split("/");for(let h=0;h<f.length&&h<m.length;h++){const v=ze(f[h],m[h]);if(v!==0)return v}return ze(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=ze(At(l.latitude),At(u.latitude));return f!==0?f:ze(At(l.longitude),At(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return x0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,I,k,O;const f=l.fields||{},m=u.fields||{},h=(S=f[Gf])==null?void 0:S.arrayValue,v=(I=m[Gf])==null?void 0:I.arrayValue,T=ze(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((O=v==null?void 0:v.values)==null?void 0:O.length)||0);return T!==0?T:x0(h,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===hf.mapValue&&u===hf.mapValue)return 0;if(l===hf.mapValue)return 1;if(u===hf.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),h=u.fields||{},v=Object.keys(h);m.sort(),v.sort();for(let T=0;T<m.length&&T<v.length;++T){const S=mm(m[T],v[T]);if(S!==0)return S;const I=wa(f[m[T]],h[v[T]]);if(I!==0)return I}return ze(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function M0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=ur(n),i=ur(e),o=ze(t.seconds,i.seconds);return o!==0?o:ze(t.nanos,i.nanos)}function x0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=wa(t[o],i[o]);if(l)return l}return ze(t.length,i.length)}function Ia(n){return gm(n)}function gm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ur(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=gm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of i)l?l=!1:o+=",",o+=`${u}:${gm(t.fields[u])}`;return o+"}"})(n.mapValue):Ce(61005,{value:n})}function Af(n){switch(fr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cd(n);return e?16+Af(e):16;case 5:return 2*n.stringValue.length;case 6:return cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Af(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return lo(i.fields,((l,u)=>{o+=l.length+Af(u)})),o})(n.mapValue);default:throw Ce(13486,{value:n})}}function ym(n){return!!n&&"integerValue"in n}function cg(n){return!!n&&"arrayValue"in n}function D0(n){return!!n&&"nullValue"in n}function k0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cf(n){return!!n&&"mapValue"in n}function yU(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[dC])==null?void 0:i.stringValue)===hC}function ru(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ru(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(n.arrayValue.values[t]);return e}return{...n}}function _U(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=Zt.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=f.popLast()}u?i[f.lastSegment()]=ru(u):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Cf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){lo(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Hn(ru(this.value))}}function pC(n){const e=[];return lo(n.fields,((t,i)=>{const o=new Zt([t]);if(Cf(i)){const l=pC(i.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new si(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,i,o,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new sn(e,0,Re.min(),Re.min(),Re.min(),Hn.empty(),0)}static newFoundDocument(e,t,i,o){return new sn(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Re.min(),Re.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Re.min(),Re.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t){this.position=e,this.inclusive=t}}function P0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=wa(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function V0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t="asc"){this.field=e,this.dir=t}}function vU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{}class Lt extends mC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new EU(e,t,i):t==="array-contains"?new CU(e,i):t==="in"?new wU(e,i):t==="not-in"?new IU(e,i):t==="array-contains-any"?new RU(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new SU(e,i):new AU(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&fr(this.value)===fr(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends mC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qi(e,t)}matches(e){return gC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gC(n){return n.op==="and"}function yC(n){return TU(n)&&gC(n)}function TU(n){for(const e of n.filters)if(e instanceof qi)return!1;return!0}function _m(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ia(n.value);if(yC(n))return n.filters.map((e=>_m(e))).join(",");{const e=n.filters.map((t=>_m(t))).join(",");return`${n.op}(${e})`}}function _C(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Oi(i.value,o.value)})(n,e):n instanceof qi?(function(i,o){return o instanceof qi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,u,f)=>l&&_C(u,o.filters[f])),!0):!1})(n,e):void Ce(19439)}function vC(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ia(t.value)}`})(n):n instanceof qi?(function(t){return t.op.toString()+" {"+t.getFilters().map(vC).join(" ,")+"}"})(n):"Filter"}class EU extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class SU extends Lt{constructor(e,t){super(e,"in",t),this.keys=TC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AU extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=TC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function TC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class CU extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cg(t)&&yu(t.arrayValue,this.value)}}class wU extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yu(this.value.arrayValue,t)}}class IU extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yu(this.value.arrayValue,t)}}class RU extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>yu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t=null,i=[],o=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function U0(n,e=null,t=[],i=[],o=null,l=null,u=null){return new bU(n,e,t,i,o,l,u)}function fg(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>_m(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),ud(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ia(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ia(i))).join(",")),e.Te=t}return e.Te}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_C(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!V0(n.startAt,e.startAt)&&V0(n.endAt,e.endAt)}function vm(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t=null,i=[],o=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NU(n,e,t,i,o,l,u,f){return new fd(n,e,t,i,o,l,u,f)}function hg(n){return new fd(n)}function L0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MU(n){return n.collectionGroup!==null}function ou(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new qt(Zt.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Jf(l,i))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Jf(Zt.keyField(),i))}return e.Ie}function Pi(n){const e=Me(n);return e.Ee||(e.Ee=xU(e,ou(n))),e.Ee}function xU(n,e){if(n.limitType==="F")return U0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Jf(o.field,l)}));const t=n.endAt?new Kf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Kf(n.startAt.position,n.startAt.inclusive):null;return U0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Tm(n,e,t){return new fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dd(n,e){return dg(Pi(n),Pi(e))&&n.limitType===e.limitType}function EC(n){return`${fg(Pi(n))}|lt:${n.limitType}`}function la(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>vC(o))).join(", ")}]`),ud(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ia(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ia(o))).join(",")),`Target(${i})`})(Pi(n))}; limitType=${n.limitType})`}function hd(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of ou(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,m){const h=P0(u,f,m);return u.inclusive?h<=0:h<0})(i.startAt,ou(i),o)||i.endAt&&!(function(u,f,m){const h=P0(u,f,m);return u.inclusive?h>=0:h>0})(i.endAt,ou(i),o))})(n,e)}function DU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SC(n){return(e,t)=>{let i=!1;for(const o of ou(n)){const l=kU(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function kU(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,u,f){const m=u.data.field(l),h=f.data.field(l);return m!==null&&h!==null?wa(m,h):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return oC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=new pt(Ee.comparator);function hs(){return PU}const AC=new pt(Ee.comparator);function Ql(...n){let e=AC;for(const t of n)e=e.insert(t.key,t);return e}function CC(n){let e=AC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Zr(){return au()}function wC(){return au()}function au(){return new uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const VU=new pt(Ee.comparator),UU=new qt(Ee.comparator);function Be(...n){let e=UU;for(const t of n)e=e.add(t);return e}const LU=new qt(ze);function OU(){return LU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(e)?"-0":e}}function IC(n){return{integerValue:""+n}}function qU(n,e){return fU(e)?IC(e):pg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function zU(n,e,t){return n instanceof _u?(function(o,l){const u={fields:{[uC]:{stringValue:lC},[fC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ug(l)&&(l=cd(l)),l&&(u.fields[cC]=l),{mapValue:u}})(t,e):n instanceof vu?bC(n,e):n instanceof Tu?NC(n,e):(function(o,l){const u=RC(o,l),f=O0(u)+O0(o.Ae);return ym(u)&&ym(o.Ae)?IC(f):pg(o.serializer,f)})(n,e)}function BU(n,e,t){return n instanceof vu?bC(n,e):n instanceof Tu?NC(n,e):t}function RC(n,e){return n instanceof Yf?(function(i){return ym(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class _u extends pd{}class vu extends pd{constructor(e){super(),this.elements=e}}function bC(n,e){const t=MC(e);for(const i of n.elements)t.some((o=>Oi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Tu extends pd{constructor(e){super(),this.elements=e}}function NC(n,e){let t=MC(e);for(const i of n.elements)t=t.filter((o=>!Oi(o,i)));return{arrayValue:{values:t}}}class Yf extends pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function O0(n){return At(n.integerValue||n.doubleValue)}function MC(n){return cg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,t){this.field=e,this.transform=t}}function FU(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof vu&&o instanceof vu||i instanceof Tu&&o instanceof Tu?Ca(i.elements,o.elements,Oi):i instanceof Yf&&o instanceof Yf?Oi(i.Ae,o.Ae):i instanceof _u&&o instanceof _u})(n.transform,e.transform)}class GU{constructor(e,t){this.version=e,this.transformResults=t}}class ls{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ls}static exists(e){return new ls(void 0,e)}static updateTime(e){return new ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class md{}function xC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kC(n.key,ls.none()):new Mu(n.key,n.data,ls.none());{const t=n.data,i=Hn.empty();let o=new qt(Zt.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),o=o.add(l)}return new co(n.key,i,new si(o.toArray()),ls.none())}}function KU(n,e,t){n instanceof Mu?(function(o,l,u){const f=o.value.clone(),m=z0(o.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(o,l,u){if(!wf(o.precondition,l))return void l.convertToUnknownDocument(u.version);const f=z0(o.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(DC(o)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function lu(n,e,t,i){return n instanceof Mu?(function(l,u,f,m){if(!wf(l.precondition,u))return f;const h=l.value.clone(),v=B0(l.fieldTransforms,m,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof co?(function(l,u,f,m){if(!wf(l.precondition,u))return f;const h=B0(l.fieldTransforms,m,u),v=u.data;return v.setAll(DC(l)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,u,f){return wf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function JU(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=RC(i.transform,o||null);l!=null&&(t===null&&(t=Hn.empty()),t.set(i.field,l))}return t||null}function q0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ca(i,o,((l,u)=>FU(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mu extends md{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class co extends md{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function DC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function z0(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,f=e.data.field(l.field);i.set(l.field,BU(u,f,t[o]))}return i}function B0(n,e,t){const i=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);i.set(o.field,zU(l,u,e))}return i}class kC extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YU extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&KU(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=lu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=lu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=wC();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(o.key)?null:f;const m=xC(u,f);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,((t,i)=>q0(t,i)))&&Ca(this.baseMutations,e.baseMutations,((t,i)=>q0(t,i)))}}class mg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return VU})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,i[u].version);return new mg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ge;function QU(n){switch(n){case re.OK:return Ce(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function PC(n){if(n===void 0)return ds("GRPC error has no .code"),re.UNKNOWN;switch(n){case kt.OK:return re.OK;case kt.CANCELLED:return re.CANCELLED;case kt.UNKNOWN:return re.UNKNOWN;case kt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case kt.INTERNAL:return re.INTERNAL;case kt.UNAVAILABLE:return re.UNAVAILABLE;case kt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case kt.NOT_FOUND:return re.NOT_FOUND;case kt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case kt.ABORTED:return re.ABORTED;case kt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case kt.DATA_LOSS:return re.DATA_LOSS;default:return Ce(39323,{code:n})}}(Ge=kt||(kt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=new rr([4294967295,4294967295],0);function H0(n){const e=ZU().encode(n),t=new $A;return t.update(e),new Uint8Array(t.digest())}function F0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rr([t,i],0),new rr([o,l],0)]}class gg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Zl(`Invalid padding: ${t}`);if(i<0)throw new Zl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=rr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(rr.fromNumber(i)));return o.compare(jU)===1&&(o=new rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=H0(e),[i,o]=F0(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new gg(l,o,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=H0(e),[i,o]=F0(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new gd(Re.min(),o,new pt(ze),hs(),Be())}}class xu{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xu(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class VC{constructor(e,t){this.targetId=e,this.Ce=t}}class UC{constructor(e,t,i=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class G0{constructor(){this.ve=0,this.Fe=K0(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce(38017,{changeType:l})}})),new xu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=K0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eL{constructor(e){this.Ge=e,this.ze=new Map,this.je=hs(),this.Je=pf(),this.He=pf(),this.Ye=new pt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(vm(l))if(i===0){const u=new Ee(l.path);this.et(t,u,sn.newNoDocument(u,Re.min()))}else Qe(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let u,f;try{u=cr(i).toUint8Array()}catch(m){if(m instanceof aC)return Aa("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new gg(u,o,l)}catch(m){return Aa(m instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&vm(f.target)){const m=new Ee(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,sn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Be();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new gd(e,t,this.Ye,this.je,i);return this.je=hs(),this.Je=pf(),this.He=pf(),this.Ye=new pt(ze),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new G0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pf(){return new pt(Ee.comparator)}function K0(){return new pt(Ee.comparator)}const tL={asc:"ASCENDING",desc:"DESCENDING"},nL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iL={and:"AND",or:"OR"};class sL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Em(n,e){return n.useProto3Json||ud(e)?e:{value:e}}function Xf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rL(n,e){return Xf(n,e.toTimestamp())}function Vi(n){return Qe(!!n,49232),Re.fromTimestamp((function(t){const i=ur(t);return new ft(i.seconds,i.nanos)})(n))}function yg(n,e){return Sm(n,e).canonicalString()}function Sm(n,e){const t=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function OC(n){const e=ct.fromString(n);return Qe(FC(e),10190,{key:e.toString()}),e}function Am(n,e){return yg(n.databaseId,e.path)}function zp(n,e){const t=OC(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(zC(t))}function qC(n,e){return yg(n.databaseId,e)}function oL(n){const e=OC(n);return e.length===4?ct.emptyPath():zC(e)}function Cm(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zC(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function J0(n,e,t){return{name:Am(n,e),fields:t.value.mapValue.fields}}function aL(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ce(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(h,v){return h.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const v=h.code===void 0?re.UNKNOWN:PC(h.code);return new _e(v,h.message||"")})(u);t=new UC(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=zp(n,i.document.name),l=Vi(i.document.updateTime),u=i.document.createTime?Vi(i.document.createTime):Re.min(),f=new Hn({mapValue:{fields:i.document.fields}}),m=sn.newFoundDocument(o,l,u,f),h=i.targetIds||[],v=i.removedTargetIds||[];t=new If(h,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=zp(n,i.document),l=i.readTime?Vi(i.readTime):Re.min(),u=sn.newNoDocument(o,l),f=i.removedTargetIds||[];t=new If([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=zp(n,i.document),l=i.removedTargetIds||[];t=new If([],l,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,u=new WU(o,l),f=i.targetId;t=new VC(f,u)}}return t}function lL(n,e){let t;if(e instanceof Mu)t={update:J0(n,e.key,e.value)};else if(e instanceof kC)t={delete:Am(n,e.key)};else if(e instanceof co)t={update:J0(n,e.key,e.data),updateMask:yL(e.fieldMask)};else{if(!(e instanceof YU))return Ce(16599,{Vt:e.type});t={verify:Am(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof _u)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof vu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Tu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Yf)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ce(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:rL(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function uL(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Vi(o.updateTime):Vi(l);return u.isEqual(Re.min())&&(u=Vi(l)),new GU(u,o.transformResults||[])})(t,e)))):[]}function cL(n,e){return{documents:[qC(n,e.path)]}}function fL(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=qC(n,o);const l=(function(h){if(h.length!==0)return HC(qi.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:ua(S.field),direction:pL(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Em(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function dL(n){let e=oL(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=BC(T);return S instanceof qi&&yC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(k){return new Jf(ca(k.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,ud(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(T){const S=!!T.before,I=T.values||[];return new Kf(I,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,I=T.values||[];return new Kf(I,S)})(t.endAt)),NU(e,o,u,l,f,"F",m,h)}function hL(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ca(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ca(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ca(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ca(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(ca(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return qi.create(t.compositeFilter.filters.map((i=>BC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function pL(n){return tL[n]}function mL(n){return nL[n]}function gL(n){return iL[n]}function ua(n){return{fieldPath:n.canonicalString()}}function ca(n){return Zt.fromServerFormat(n.fieldPath)}function HC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(k0(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NAN"}};if(D0(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(k0(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NAN"}};if(D0(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(t.field),op:mL(t.op),value:t.value}}})(n):n instanceof qi?(function(t){const i=t.getFilters().map((o=>HC(o)));return i.length===1?i[0]:{compositeFilter:{op:gL(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function yL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function FC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,i,o,l=Re.min(),u=Re.min(),f=jt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.yt=e}}function vL(n){const e=dL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(){this.Cn=new EL}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(lr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class EL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new qt(ct.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new qt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GC=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(GC,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ra(0)}static cr(){return new Ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LruGarbageCollector",SL=1048576;function $0([n,e],[t,i]){const o=ze(n,t);return o===0?ze(e,i):o}class AL{constructor(e){this.Ir=e,this.buffer=new qt($0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();$0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CL{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(X0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oa(t)?de(X0,"Ignoring IndexedDB error during garbage collection: ",t):await La(t)}await this.Vr(3e5)}))}}class wL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(ld.ce);const i=new AL(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Y0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,u,f,m,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),aa()<=qe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(h-m)+`ms
Total Duration: ${h-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function IL(n,e){return new wL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.changes=new uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&lu(i.mutation,o,si.empty(),ft.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=Zr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let u=Ql();return l.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Zr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,o){let l=hs();const u=au(),f=(function(){return au()})();return t.forEach(((m,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof co)?l=l.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),lu(v.mutation,h,v.mutation.getFieldMask(),ft.now())):u.set(h.key,si.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>f.set(h,new bL(v,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=au();let o=new pt(((u,f)=>u-f)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let v=i.get(m)||si.empty();v=f.applyToLocalView(h,v),i.set(m,v);const T=(o.get(f.batchId)||Be()).add(m);o=o.insert(f.batchId,T)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),h=m.key,v=m.value,T=wC();v.forEach((S=>{if(!l.has(S)){const I=xC(t.get(S),i.get(S));I!==null&&T.set(S,I),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):se.resolve(Zr());let f=pu,m=l;return u.next((h=>se.forEach(h,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{m=m.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,m,h,Be()))).next((v=>({batchId:f,changes:CC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=Ql();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let u=Ql();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(m=>{const h=(function(T,S){return new fd(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((u=>{l.forEach(((m,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,sn.newInvalidDocument(v)))}));let f=Ql();return u.forEach(((m,h)=>{const v=l.get(m);v!==void 0&&lu(v.mutation,h,si.empty(),ft.now()),hd(t,h)&&(f=f.insert(m,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Vi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:vL(o.bundledQuery),readTime:Vi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.overlays=new pt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Zr();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=Zr(),l=t.length+1,u=new Ee(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new pt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=l.get(h.largestBatchId);v===null&&(v=Zr(),l=l.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const f=Zr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,v)=>f.set(h,v))),!(f.size()>=o)););return se.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new $U(t,i));let l=this.qr.get(t);l===void 0&&(l=Be(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new qt(Gt.$r),this.Ur=new qt(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Gt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new ct([])),i=new Gt(t,e),o=new Gt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ct([])),i=new Gt(t,e),o=new Gt(t,e+1);let l=Be();return this.Ur.forEachInRange([i,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Gt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Gt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new XU(l,t,i,o);this.mutationQueue.push(u);for(const f of o)this.Zr=this.Zr.add(new Gt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?lg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(u=>{const f=this.Xr(u.Yr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qt(ze);return t.forEach((o=>{const l=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Gt(new Ee(l),0);let f=new qt(ze);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(m.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const l=new Gt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Gt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let i=hs();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():sn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=hs();const u=t.path,f=new Ee(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:h,value:{document:v}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||aU(oU(v),i)<=0||(o.has(v.key)||hd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ce(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new VL(this)}getSize(e){return se.resolve(this.size)}}class VL extends RL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.persistence=e,this.si=new uo((t=>fg(t)),dg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=Ra.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ra(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.ui={},this.overlays={},this.ci=new ld(0),this.li=!1,this.li=!0,this.hi=new DL,this.referenceDelegate=e(this),this.Pi=new UL(this),this.indexManager=new TL,this.remoteDocumentCache=(function(o){return new PL(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new _L(t),this.Ii=new ML(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new kL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new LL(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class LL extends uU{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new vg(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $f{constructor(e,t){this.persistence=e,this.pi=new uo((i=>dU(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=IL(this,t)}static mi(e,t){return new $f(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Tg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Mk()?8:cU(on())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new OL;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(aa()<=qe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",la(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(aa()<=qe.DEBUG&&de("QueryEngine","Query:",la(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(aa()<=qe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",la(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):se.resolve())}ys(e,t){if(L0(t))return se.resolve(null);let i=Pi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Tm(t,null,"F"),i=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Be(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.Ds(t,f);return this.Cs(t,h,u,m.readTime)?this.ys(e,Tm(t,null,"F")):this.vs(e,h,t,m)}))))})))))}ws(e,t,i,o){return L0(t)||o.isEqual(Re.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,o)?se.resolve(null):(aa()<=qe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),la(t)),this.vs(e,u,t,rU(o,pu)).next((f=>f)))}))}Ds(e,t){let i=new qt(SC(e));return t.forEach(((o,l)=>{hd(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return aa()<=qe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",la(t)),this.ps.getDocumentsMatchingQuery(e,t,lr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",zL=3e8;class BL{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new pt(ze),this.xs=new uo((l=>fg(l)),dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function HL(n,e,t,i){return new BL(n,e,t,i)}async function JC(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let m=Be();for(const h of o){u.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}for(const h of l){f.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function FL(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,h,v){const T=h.batch,S=T.keys();let I=se.resolve();return S.forEach((k=>{I=I.next((()=>v.getEntry(m,k))).next((O=>{const z=h.docVersions.get(k);Qe(z!==null,48541),O.version.compareTo(z)<0&&(T.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),v.addEntry(O)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Be();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(m=m.add(f.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function YC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GL(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(jt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),o=o.insert(T,I),(function(O,z,W){return O.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=zL?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(S,I,v)&&f.push(t.Pi.updateTargetData(l,I))}));let m=hs(),h=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(KL(l,u,e.documentUpdates).next((v=>{m=v.ks,h=v.qs}))),!i.isEqual(Re.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(v)}return se.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,h))).next((()=>m))})).then((l=>(t.Ms=o,l)))}function KL(n,e,t){let i=Be(),o=Be();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=hs();return t.forEach(((f,m)=>{const h=l.get(f);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):de(Eg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function JL(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=lg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function YL(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new tr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function wm(n,e,t){const i=Me(n),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Oa(u))throw u;de(Eg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function W0(n,e,t){const i=Me(n);let o=Re.min(),l=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,v){const T=Me(m),S=T.xs.get(v);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,v)})(i,u,Pi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?l:Be()))).next((f=>(XL(i,DU(e),f),{documents:f,Qs:l})))))}function XL(n,e,t){let i=n.Os.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class Q0{constructor(){this.activeTargetIds=OU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $L{constructor(){this.Mo=new Q0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Q0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="ConnectivityMonitor";class j0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Z0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Z0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=null;function Im(){return mf===null?mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():mf++,"0x"+mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="RestConnection",QL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ff?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const u=Im(),f=this.zo(e,t.toUriEncodedString());de(Bp,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,l);const{host:h}=new URL(f),v=ka(h);return this.Jo(e,f,m,i,v).then((T=>(de(Bp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Aa(Bp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,o,l,u){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ua})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=QL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class eO extends ZL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const u=Im();return new Promise(((f,m)=>{const h=new WA;h.setWithCredentials(!0),h.listenOnce(QA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Sf.NO_ERROR:const T=h.getResponseJson();de(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Sf.TIMEOUT:de(tn,`RPC '${e}' ${u} timed out`),m(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const S=h.getStatus();if(de(tn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const O=(function(W){const $=W.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf($)>=0?$:re.UNKNOWN})(k.status);m(new _e(O,k.message))}else m(new _e(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{de(tn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);de(tn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=Im(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eC(),f=jA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");de(tn,`Creating RPC '${e}' stream ${o}: ${v}`,m);const T=u.createWebChannel(v,m);this.I_(T);let S=!1,I=!1;const k=new jL({Yo:z=>{I?de(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(S||(de(tn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),de(tn,`RPC '${e}' stream ${o} sending:`,z),T.send(z))},Zo:()=>T.close()}),O=(z,W,$)=>{z.listen(W,(J=>{try{$(J)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return O(T,Wl.EventType.OPEN,(()=>{I||(de(tn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),O(T,Wl.EventType.CLOSE,(()=>{I||(I=!0,de(tn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(T))})),O(T,Wl.EventType.ERROR,(z=>{I||(I=!0,Aa(tn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),k.a_(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),O(T,Wl.EventType.MESSAGE,(z=>{var W;if(!I){const $=z.data[0];Qe(!!$,16349);const J=$,Z=(J==null?void 0:J.error)||((W=J[0])==null?void 0:W.error);if(Z){de(tn,`RPC '${e}' stream ${o} received error:`,Z);const ue=Z.status;let le=(function(N){const P=kt[N];if(P!==void 0)return PC(P)})(ue),D=Z.message;le===void 0&&(le=re.INTERNAL,D="Unknown error status: "+ue+" with message "+Z.message),I=!0,k.a_(new _e(le,D)),T.close()}else de(tn,`RPC '${e}' stream ${o} received:`,$),k.u_($)}})),O(f,ZA.STAT_EVENT,(z=>{z.stat===pm.PROXY?de(tn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===pm.NOPROXY&&de(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n){return new sL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="PersistentStream";class $C{constructor(e,t,i,o,l,u,f,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ds(t.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(eS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(eS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tO extends $C{constructor(e,t,i,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aL(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Vi(u.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Cm(this.serializer),t.addTarget=(function(l,u){let f;const m=u.target;if(f=vm(m)?{documents:cL(l,m)}:{query:fL(l,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=LC(l,u.resumeToken);const h=Em(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=Xf(l,u.snapshotVersion.toTimestamp());const h=Em(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=hL(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Cm(this.serializer),t.removeTarget=e,this.q_(t)}}class nO extends $C{constructor(e,t,i,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uL(e.writeResults,e.commitTime),i=Vi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Cm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>lL(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{}class sO extends iO{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Sm(t,i),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(re.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Sm(t,i),o,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ds(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class oO{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{fo(this)&&(de(oo,"Restarting streams for network reachability change."),await(async function(m){const h=Me(m);h.Ea.add(4),await Du(h),h.Ra.set("Unknown"),h.Ea.delete(4),await _d(h)})(this))}))})),this.Ra=new rO(i,o)}}async function _d(n){if(fo(n))for(const e of n.da)await e(!0)}async function Du(n){for(const e of n.da)await e(!1)}function WC(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),wg(t)?Cg(t):qa(t).O_()&&Ag(t,e))}function Sg(n,e){const t=Me(n),i=qa(t);t.Ia.delete(e),i.O_()&&QC(t,e),t.Ia.size===0&&(i.O_()?i.L_():fo(t)&&t.Ra.set("Unknown"))}function Ag(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qa(n).Y_(e)}function QC(n,e){n.Va.Ue(e),qa(n).Z_(e)}function Cg(n){n.Va=new eL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qa(n).start(),n.Ra.ua()}function wg(n){return fo(n)&&!qa(n).x_()&&n.Ia.size>0}function fo(n){return Me(n).Ea.size===0}function ZC(n){n.Va=void 0}async function aO(n){n.Ra.set("Online")}async function lO(n){n.Ia.forEach(((e,t)=>{Ag(n,e)}))}async function uO(n,e){ZC(n),wg(n)?(n.Ra.ha(e),Cg(n)):n.Ra.set("Unknown")}async function cO(n,e,t){if(n.Ra.set("Online"),e instanceof UC&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){de(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wf(n,i)}else if(e instanceof If?n.Va.Ze(e):e instanceof VC?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const i=await YC(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(h);v&&l.Ia.set(h,v.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,h)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),QC(l,m);const T=new tr(v.target,m,h,v.sequenceNumber);Ag(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){de(oo,"Failed to raise snapshot:",i),await Wf(n,i)}}async function Wf(n,e,t){if(!Oa(e))throw e;n.Ea.add(1),await Du(n),n.Ra.set("Offline"),t||(t=()=>YC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(oo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _d(n)}))}function jC(n,e){return e().catch((t=>Wf(n,t,e)))}async function vd(n){const e=Me(n),t=dr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lg;for(;fO(e);)try{const o=await JL(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,dO(e,o)}catch(o){await Wf(e,o)}ew(e)&&tw(e)}function fO(n){return fo(n)&&n.Ta.length<10}function dO(n,e){n.Ta.push(e);const t=dr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ew(n){return fo(n)&&!dr(n).x_()&&n.Ta.length>0}function tw(n){dr(n).start()}async function hO(n){dr(n).ra()}async function pO(n){const e=dr(n);for(const t of n.Ta)e.ea(t.mutations)}async function mO(n,e,t){const i=n.Ta.shift(),o=mg.from(i,e,t);await jC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await vd(n)}async function gO(n,e){e&&dr(n).X_&&await(async function(i,o){if((function(u){return QU(u)&&u!==re.ABORTED})(o.code)){const l=i.Ta.shift();dr(i).B_(),await jC(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await vd(i)}})(n,e),ew(n)&&tw(n)}async function tS(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),de(oo,"RemoteStore received new credentials");const i=fo(t);t.Ea.add(3),await Du(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _d(t)}async function yO(n,e){const t=Me(n);e?(t.Ea.delete(2),await _d(t)):e||(t.Ea.add(2),await Du(t),t.Ra.set("Unknown"))}function qa(n){return n.ma||(n.ma=(function(t,i,o){const l=Me(t);return l.sa(),new tO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:aO.bind(null,n),t_:lO.bind(null,n),r_:uO.bind(null,n),H_:cO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),wg(n)?Cg(n):n.Ra.set("Unknown")):(await n.ma.stop(),ZC(n))}))),n.ma}function dr(n){return n.fa||(n.fa=(function(t,i,o){const l=Me(t);return l.sa(),new nO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:hO.bind(null,n),r_:gO.bind(null,n),ta:pO.bind(null,n),na:mO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await vd(n)):(await n.fa.stop(),n.Ta.length>0&&(de(oo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const u=Date.now()+i,f=new Ig(e,t,u,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(n,e){if(ds("AsyncQueue",`${e}: ${n}`),Oa(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Ql(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ta;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.ga=new pt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ba{constructor(e,t,i,o,l,u,f,m,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new ba(e,t,Ta.emptySet(t),u,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vO{constructor(){this.queries=iS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Me(t),l=o.queries;o.queries=iS(),l.forEach(((u,f)=>{for(const m of f.Sa)m.onError(i)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function iS(){return new uo((n=>EC(n)),dd)}async function TO(n,e){const t=Me(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new _O,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const f=Rg(u,`Initialization of query '${la(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&bg(t)}async function EO(n,e){const t=Me(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SO(n,e){const t=Me(n);let i=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(o)&&(i=!0);u.wa=o}}i&&bg(t)}function AO(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function bg(n){n.Ca.forEach((e=>{e.next()}))}var Rm,sS;(sS=Rm||(Rm={})).Ma="default",sS.Cache="cache";class CO{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ba(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.key=e}}class iw{constructor(e){this.key=e}}class wO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=SC(e),this.tu=new Ta(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new nS,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),I=hd(this.query,T)?T:null,k=!!S&&this.mutatedKeys.has(S.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let z=!1;S&&I?S.data.isEqual(I.data)?k!==O&&(i.track({type:3,doc:I}),z=!0):this.su(S,I)||(i.track({type:2,doc:I}),z=!0,(m&&this.eu(I,m)>0||h&&this.eu(I,h)<0)&&(f=!0)):!S&&I?(i.track({type:0,doc:I}),z=!0):S&&!I&&(i.track({type:1,doc:S}),z=!0,(m||h)&&(f=!0)),z&&(I?(u=u.add(I),l=O?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(I,k){const O=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:z})}};return O(I)-O(k)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,h=m!==this.Za;return this.Za=m,u.length!==0||h?{snapshot:new ba(this.query,e.tu,l,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new iw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new nw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ba.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ng="SyncEngine";class IO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RO{constructor(e){this.key=e,this.hu=!1}}class bO{constructor(e,t,i,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new uo((f=>EC(f)),dd),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ee.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=Ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NO(n,e,t=!0){const i=uw(n);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await sw(i,e,t,!0),o}async function MO(n,e){const t=uw(n);await sw(t,e,!0,!1)}async function sw(n,e,t,i){const o=await YL(n.localStore,Pi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await xO(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&WC(n.remoteStore,o),f}async function xO(n,e,t,i,o){n.pu=(T,S,I)=>(async function(O,z,W,$){let J=z.view.ru(W);J.Cs&&(J=await W0(O.localStore,z.query,!1).then((({documents:D})=>z.view.ru(D,J))));const Z=$&&$.targetChanges.get(z.targetId),ue=$&&$.targetMismatches.get(z.targetId)!=null,le=z.view.applyChanges(J,O.isPrimaryClient,Z,ue);return oS(O,z.targetId,le.au),le.snapshot})(n,T,S,I);const l=await W0(n.localStore,e,!0),u=new wO(e,l.Qs),f=u.ru(l.documents),m=xu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(f,n.isPrimaryClient,m);oS(n,t,h.au);const v=new IO(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function DO(n,e,t){const i=Me(n),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((u=>!dd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await wm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Sg(i.remoteStore,o.targetId),bm(i,o.targetId)})).catch(La)):(bm(i,o.targetId),await wm(i.localStore,o.targetId,!0))}async function kO(n,e){const t=Me(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Sg(t.remoteStore,i.targetId))}async function PO(n,e,t){const i=BO(n);try{const o=await(function(u,f){const m=Me(u),h=ft.now(),v=f.reduce(((I,k)=>I.add(k.key)),Be());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=hs(),O=Be();return m.Ns.getEntries(I,v).next((z=>{k=z,k.forEach(((W,$)=>{$.isValidDocument()||(O=O.add(W))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,k))).next((z=>{T=z;const W=[];for(const $ of f){const J=JU($,T.get($.key).overlayedDocument);J!=null&&W.push(new co($.key,J,pC(J.value.mapValue),ls.exists(!0)))}return m.mutationQueue.addMutationBatch(I,h,W,f)})).next((z=>{S=z;const W=z.applyToLocalDocumentSet(T,O);return m.documentOverlayCache.saveOverlays(I,z.batchId,W)}))})).then((()=>({batchId:S.batchId,changes:CC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,m){let h=u.Vu[u.currentUser.toKey()];h||(h=new pt(ze)),h=h.insert(f,m),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await ku(i,o.changes),await vd(i.remoteStore)}catch(o){const l=Rg(o,"Failed to persist write");t.reject(l)}}async function rw(n,e){const t=Me(n);try{const i=await GL(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Qe(u.hu,14607):o.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await ku(t,i,e)}catch(i){await La(i)}}function rS(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const m=Me(u);m.onlineState=f;let h=!1;m.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(f)&&(h=!0)})),h&&bg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function VO(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let u=new pt(Ee.comparator);u=u.insert(l,sn.newNoDocument(l,Re.min()));const f=Be().add(l),m=new gd(Re.min(),new Map,new pt(ze),u,f);await rw(i,m),i.du=i.du.remove(l),i.Au.delete(e),Mg(i)}else await wm(i.localStore,e,!1).then((()=>bm(i,e,t))).catch(La)}async function UO(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await FL(t.localStore,e);aw(t,i,null),ow(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ku(t,o)}catch(o){await La(o)}}async function LO(n,e,t){const i=Me(n);try{const o=await(function(u,f){const m=Me(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return m.mutationQueue.lookupMutationBatch(h,f).next((T=>(Qe(T!==null,37113),v=T.keys(),m.mutationQueue.removeMutationBatch(h,T)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>m.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);aw(i,e,t),ow(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ku(i,o)}catch(o){await La(o)}}function ow(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function aw(n,e,t){const i=Me(n);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||lw(n,i)}))}function lw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Mg(n))}function oS(n,e,t){for(const i of t)i instanceof nw?(n.Ru.addReference(i.key,e),OO(n,i)):i instanceof iw?(de(Ng,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||lw(n,i.key)):Ce(19791,{wu:i})}function OO(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(de(Ng,"New document in limbo: "+t),n.Eu.add(i),Mg(n))}function Mg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(ct.fromString(e)),i=n.fu.next();n.Au.set(i,new RO(t)),n.du=n.du.insert(t,i),WC(n.remoteStore,new tr(Pi(hg(t.path)),i,"TargetPurposeLimboResolution",ld.ce))}}async function ku(n,e,t){const i=Me(n),o=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,t).then((h=>{var v;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(h){o.push(h);const T=Tg.As(m.targetId,h);l.push(T)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,h){const v=Me(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Es,(I=>v.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>se.forEach(S.ds,(I=>v.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!Oa(T))throw T;de(Eg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const I=v.Ms.get(S),k=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(S,O)}}})(i.localStore,l))}async function qO(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){de(Ng,"User change. New user:",e.toKey());const i=await JC(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new _e(re.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ku(t,i.Ls)}}function zO(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const f=t.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function uw(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VO.bind(null,e),e.Pu.H_=SO.bind(null,e.eventManager),e.Pu.yu=AO.bind(null,e.eventManager),e}function BO(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class Qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return HL(this.persistence,new qL,e.initialUser,this.serializer)}Cu(e){return new KC(vg.mi,this.serializer)}Du(e){return new $L}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qf.provider={build:()=>new Qf};class HO extends Qf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof $f,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new CL(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new KC((i=>$f.mi(i,t)),this.serializer)}}class Nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qO.bind(null,this.syncEngine),await yO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vO})()}createDatastore(e){const t=yd(e.databaseInfo.databaseId),i=(function(l){return new eO(l)})(e.databaseInfo);return(function(l,u,f,m){return new sO(l,u,f,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,u,f){return new oO(i,o,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>rS(this.syncEngine,t,0)),(function(){return j0.v()?new j0:new WL})())}createSyncEngine(e,t){return(function(o,l,u,f,m,h,v){const T=new bO(o,l,u,f,m,h);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Me(o);de(oo,"RemoteStore shutting down."),l.Ea.add(5),await Du(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Nm.provider={build:()=>new Nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class GO{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{de(hr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(de(hr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Rg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Fp(n,e){n.asyncQueue.verifyOperationInProgress(),de(hr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await JC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function aS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KO(n);de(hr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>tS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>tS(e.remoteStore,o))),n._onlineComponents=e}async function KO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(hr,"Using user provided OfflineComponentProvider");try{await Fp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Aa("Error using user provided cache. Falling back to memory cache: "+t),await Fp(n,new Qf)}}else de(hr,"Using default OfflineComponentProvider"),await Fp(n,new HO(void 0));return n._offlineComponents}async function cw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(hr,"Using user provided OnlineComponentProvider"),await aS(n,n._uninitializedComponentsProvider._online)):(de(hr,"Using default OnlineComponentProvider"),await aS(n,new Nm))),n._onlineComponents}function JO(n){return cw(n).then((e=>e.syncEngine))}async function YO(n){const e=await cw(n),t=e.eventManager;return t.onListen=NO.bind(null,e.syncEngine),t.onUnlisten=DO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kO.bind(null,e.syncEngine),t}function XO(n,e,t={}){const i=new or;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,h){const v=new FO({next:S=>{v.Nu(),u.enqueueAndForget((()=>EO(l,T)));const I=S.docs.has(f);!I&&S.fromCache?h.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?h.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new CO(hg(f.path),v,{includeMetadataChanges:!0,qa:!0});return TO(l,T)})(await YO(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firestore.googleapis.com",uS=!0;class cS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dw,this.ssl=uS}else this.host=e.host,this.ssl=e.ssl??uS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SL)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new XV;switch(i.type){case"firstParty":return new ZV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=lS.get(t);i&&(de("ComponentProvider","Removing Datastore"),lS.delete(t),i.terminate())})(this),Promise.resolve()}}function $O(n,e,t,i={}){var h;n=hu(n,Td);const o=ka(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(cA(`https://${f}`),fA("Firestore",!0)),l.host!==dw&&l.host!==f&&Aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:o,emulatorOptions:i};if(!no(m,u)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=nn.MOCK_USER;else{v=Ek(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}n._authCredentials=new $V(new nC(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xg(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Nu(t,Ot._jsonSchema))return new Ot(e,i||null,new Ee(ct.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Pt("string",Ot._jsonSchemaVersion),referencePath:Pt("string")};class ar extends xg{constructor(e,t,i){super(e,t,hg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Ee(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function WO(n,e,...t){if(n=ri(n),iC("collection","path",e),n instanceof Td){const i=ct.fromString(e,...t);return C0(i),new ar(n,null,i)}{if(!(n instanceof Ot||n instanceof ar))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ct.fromString(e,...t));return C0(i),new ar(n.firestore,null,i)}}function hw(n,e,...t){if(n=ri(n),arguments.length===1&&(e=og.newId()),iC("doc","path",e),n instanceof Td){const i=ct.fromString(e,...t);return A0(i),new Ot(n,null,new Ee(i))}{if(!(n instanceof Ot||n instanceof ar))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ct.fromString(e,...t));return A0(i),new Ot(n.firestore,n instanceof ar?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="AsyncQueue";class dS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XC(this,"async_queue_retry"),this._c=()=>{const i=Hp();i&&de(fS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Oa(e))throw e;de(fS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ds("INTERNAL UNHANDLED ERROR: ",hS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ig.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:hS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Dg extends Td{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new dS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dS(e),this._firestoreClient=void 0,await e}}}function QO(n,e){const t=typeof n=="object"?n:mA(),i=typeof n=="string"?n:Ff,o=$m(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=vk("firestore");l&&$O(o,...l)}return o}function pw(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZO(n),n._firestoreClient}function ZO(n){var i,o,l;const e=n._freezeSettings(),t=(function(f,m,h,v){return new mU(f,m,h,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,fw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new GO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(jt.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Pt("string",Fn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Pt("string",Ui._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Pt("string",Li._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=/^__.*__$/;class e4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mu(e,this.data,t,this.fieldTransforms)}}function mw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Vg{constructor(e,t,i,o,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mw(this.Ac)&&jO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||yd(e)}Cc(e,t,i,o=!1){return new Vg({Ac:e,methodName:t,Dc:i,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function n4(n){const e=n._freezeSettings(),t=yd(n._databaseId);return new t4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function i4(n,e,t,i,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);vw("Data must be an object, but it was:",u,i);const f=yw(i,u);let m,h;if(l.merge)m=new si(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=s4(e,T,t);if(!u.contains(S))throw new _e(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);o4(v,S)||v.push(S)}m=new si(v),h=u.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,h=u.fieldTransforms;return new e4(new Hn(f),m,h)}class Ug extends Pg{_toFieldTransform(e){return new HU(e.path,new _u)}isEqual(e){return e instanceof Ug}}function gw(n,e){if(_w(n=ri(n)))return vw("Unsupported field value:",e,n),yw(n,e);if(n instanceof Pg)return(function(i,o){if(!mw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let u=0;for(const f of i){let m=gw(f,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=ri(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qU(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ft.fromDate(i);return{timestampValue:Xf(o.serializer,l)}}if(i instanceof ft){const l=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xf(o.serializer,l)}}if(i instanceof Ui)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:LC(o.serializer,i._byteString)};if(i instanceof Ot){const l=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Li)return(function(u,f){return{mapValue:{fields:{[dC]:{stringValue:hC},[Gf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return pg(f.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${ag(i)}`)})(n,e)}function yw(n,e){const t={};return oC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((i,o)=>{const l=gw(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function _w(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Ui||n instanceof Fn||n instanceof Ot||n instanceof Pg||n instanceof Li)}function vw(n,e,t){if(!_w(t)||!sC(t)){const i=ag(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function s4(n,e,t){if((e=ri(e))instanceof kg)return e._internalPath;if(typeof e=="string")return Tw(n,e);throw Zf("Field path arguments must be of type string or ",n,!1,void 0,t)}const r4=new RegExp("[~\\*/\\[\\]]");function Tw(n,e,t){if(e.search(r4)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kg(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zf(n,e,t,i,o){const l=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new _e(re.INVALID_ARGUMENT,f+n+m)}function o4(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class a4 extends Ew{data(){return super.data()}}function Sw(n,e){return typeof e=="string"?Tw(n,e):e instanceof kg?e._internalPath:e._delegate._internalPath}class l4{convertValue(e,t="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return lo(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[Gf].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>At(u.doubleValue)));return new Li(t)}convertGeoPoint(e){return new Ui(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=cd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const t=ur(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ct.fromString(e);Qe(FC(i),9688,{name:e});const o=new gu(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||ds(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends Ew{constructor(e,t,i,o,l,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Sw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",eo._jsonSchema={type:Pt("string",eo._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Rf extends eo{data(e={}){return super.data(e)}}class uu{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new jl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Rf(this._firestore,this._userDataWriter,i.key,i,new jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const m=new Rf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new jl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new Rf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new jl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:c4(f.type),doc:m,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n){n=hu(n,Ot);const e=hu(n.firestore,Dg);return XO(pw(e),n._key).then((t=>m4(e,n,t)))}uu._jsonSchemaVersion="firestore/querySnapshot/1.0",uu._jsonSchema={type:Pt("string",uu._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class d4 extends l4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function h4(n,e,t){n=hu(n,Ot);const i=hu(n.firestore,Dg),o=u4(n.converter,e);return p4(i,[i4(n4(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ls.none())])}function p4(n,e){return(function(i,o){const l=new or;return i.asyncQueue.enqueueAndForget((async()=>PO(await JO(i),o,l))),l.promise})(pw(n),e)}function m4(n,e,t){const i=t.docs.get(e._key),o=new d4(n);return new eo(n,o,e._key,i,new jl(t.hasPendingWrites,t.fromCache),e.converter)}function g4(){return new Ug("serverTimestamp")}(function(e,t=!0){(function(o){Ua=o})(Pa),Ea(new io("firestore",((i,{instanceIdentifier:o,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Dg(new WV(i.getProvider("auth-internal")),new jV(u,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(h.options.projectId,v)})(u,o),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),sr(v0,T0,e),sr(v0,T0,"esm2020")})();var ra={};const Gp={apiKey:ra.FIREBASE_API_KEY||"AIzaSy...YOUR-API-KEY",authDomain:ra.FIREBASE_AUTH_DOMAIN||"your-project-id.firebaseapp.com",projectId:ra.FIREBASE_PROJECT_ID||"your-project-id",storageBucket:ra.FIREBASE_STORAGE_BUCKET||"your-project-id.appspot.com",messagingSenderId:ra.FIREBASE_MESSAGING_SENDER_ID||"000000000000",appId:ra.FIREBASE_APP_ID||"1:000000000000:web:0000000000000000000000"};let Kp,y4,Eu,_4,Su=!1;if(Gp.projectId&&Gp.projectId!=="your-project-id")try{Kp=pA(Gp),y4=JV(Kp),Eu=QO(Kp),_4=new rs,Su=!0}catch(n){console.error("Firebase initialization failed:",n),Su=!1}else console.warn(`Firebase is not configured or is using placeholder credentials. The app will run in guest mode. 
Authentication, history sync, and sharing features will be disabled. 
Please create a Firebase project and add your credentials as environment variables to enable full functionality.`);const v4=async n=>{if(!Su||!Eu)throw new Error("Firebase not initialized.");try{const e=WO(Eu,"sharedPrompts"),t=hw(e);return await h4(t,{prompt:n,createdAt:g4()}),t.id}catch(e){throw console.error("Error creating shared prompt:",e),e}},T4=async n=>{if(!Su||!Eu)return null;try{const e=hw(Eu,"sharedPrompts",n),t=await f4(e);return t.exists()?t.data().prompt:null}catch(e){return console.error("Error fetching shared prompt:",e),null}},E4=()=>{const[n,e]=xp("theme","dark"),{user:t,isAuthenticated:i,isLoading:o,loginWithRedirect:l,logout:u}=nb(),f=(t==null?void 0:t["https://promptii.example.com/isPro"])===!0,[m,h]=xp("promptii-history-guest",[]),v=i&&(t!=null&&t.sub)?`promptii-history-${t.sub}`:"promptii-history-guest",[T,S]=xp(v,[]),I=i?T:m,k=i?S:h,[O,z]=ge.useState(null),[W,$]=ge.useState([]),[J,Z]=ge.useState(!1),[ue,le]=ge.useState(!1),[D,b]=ge.useState(!1),[N,P]=ge.useState(!1),[M,V]=ge.useState(!1),[x,Se]=ge.useState(!1),[we,X]=ge.useState(null);ge.useEffect(()=>{if(i&&(t!=null&&t.sub)&&m.length>0){const ae=new Set(T.map(ve=>ve.id)),fe=m.filter(ve=>!ae.has(ve.id));fe.length>0&&S(ve=>[...ve,...fe]),h([])}},[i,t==null?void 0:t.sub]),ge.useEffect(()=>{document.documentElement.classList.toggle("dark",n==="dark")},[n]),ge.useEffect(()=>{o||oe()},[i,o]),ge.useEffect(()=>{var ae;if(O&&W.length>1){const fe=(ae=W.find(Pe=>Pe.sender==="user"))==null?void 0:ae.text,ve=fe?fe.substring(0,30)+(fe.length>30?"...":""):"New Prompt",be={id:O,title:ve,messages:W,timestamp:Date.now()};k(Pe=>{const mt=Pe.findIndex(Ze=>Ze.id===O);if(mt>-1){const Ze=[...Pe];return Ze[mt]=be,Ze}else return[...Pe,be]})}},[W,O]);const oe=ge.useCallback(()=>{const ae=`chat-${Date.now()}`;z(ae),$([{id:"initial-system-message",sender:"system",text:"Welcome to promptii! Start by entering a simple idea or a prompt below."}]),Z(!1),le(!1)},[]),pe=ge.useCallback(ae=>{z(ae.id),$(ae.messages),Z(!1),le(!1)},[]),He=async()=>{await l()},Xe=async()=>{await u({logoutParams:{returnTo:window.location.origin}}),b(!1)},B=()=>P(!0),ne=async ae=>{if(!Su){alert("Sharing is not available. Please ensure Firebase is configured correctly.");return}X(null),V(!0),Se(!0);try{const fe=await v4(ae),ve=`${window.location.origin}/share/${fe}`;X(ve)}catch(fe){console.error("Failed to share prompt:",fe),X(null)}finally{Se(!1)}};return o?L.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-100 dark:bg-gemini-dark",children:L.jsx(Na,{className:"w-16 h-16 text-indigo-500 animate-pulse"})}):L.jsxs("div",{className:"h-screen w-screen font-sans text-base text-gray-900 dark:text-gray-200 bg-gray-100 dark:bg-gemini-dark overflow-hidden",children:[L.jsx(db,{history:I,onSelectHistory:pe,onNewChat:oe,isOpen:ue,setIsOpen:le,isSubscribed:f,onUpgradeClick:B}),ue&&L.jsx("div",{onClick:()=>le(!1),className:"fixed inset-0 bg-black/50 z-30"}),i&&t&&L.jsx(ak,{user:t,isOpen:D,onClose:()=>b(!1),onSignOut:Xe}),L.jsx(uk,{isOpen:N,onClose:()=>P(!1)}),L.jsx(ck,{isOpen:M,onClose:()=>V(!1),shareLink:we,isLoading:x}),L.jsxs("div",{className:"flex flex-col h-full",children:[L.jsx(S4,{user:t,theme:n,setTheme:e,toggleSidebar:()=>le(!ue),onSignIn:He,authLoading:o,onProfileClick:()=>b(!0),isAuthenticated:i}),L.jsx("main",{className:"flex-1 overflow-y-auto",children:L.jsx(rk,{messages:W,setMessages:$,isLoading:J,setIsLoading:Z,currentConversationId:O,onNewConversation:()=>{},user:t,isSubscribed:f,onUpgradeClick:B,onShare:ne})})]})]})},S4=({user:n,isAuthenticated:e,theme:t,setTheme:i,toggleSidebar:o,onSignIn:l,authLoading:u,onProfileClick:f})=>L.jsxs("header",{className:"flex items-center justify-between p-2 md:p-4 border-b border-gray-200 dark:border-gray-700/50 bg-gray-100/80 dark:bg-gemini-dark/80 backdrop-blur-sm sticky top-0 z-20",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("button",{onClick:o,className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gemini-dark-card",children:L.jsx(lb,{className:"w-6 h-6"})}),L.jsx(Na,{className:"w-8 h-8 text-indigo-500"}),L.jsx("h1",{className:"hidden sm:block text-xl font-bold text-gray-800 dark:text-gray-200",children:"promptii"})]}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx(ok,{theme:t,setTheme:i}),e&&n?L.jsx("button",{onClick:f,className:"rounded-full transition-opacity hover:opacity-80",children:L.jsx("img",{src:n.picture||void 0,alt:n.name||"User",className:"w-8 h-8 rounded-full"})}):L.jsx("button",{onClick:l,disabled:u,className:"flex items-center justify-center gap-2 bg-white/50 dark:bg-white/5 text-gray-800 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 ease-in-out text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:u?L.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):"Sign In"})]})]}),A4=()=>L.jsxs("div",{className:"min-h-screen font-sans bg-gray-100 dark:bg-gemini-dark text-gray-900 dark:text-gray-200 flex flex-col items-center justify-center p-4",children:[L.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gemini-dark-card shadow-2xl rounded-2xl max-w-lg w-full animate-fade-in-up",children:[L.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center",children:L.jsx(zm,{className:"w-10 h-10 text-white"})}),L.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Congratulations!"}),L.jsx("h2",{className:"text-xl font-semibold text-indigo-500 dark:text-indigo-400 mb-4",children:"You are now a Pro user."}),L.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You've unlocked the full power of promptii. You can now use our interactive AI to refine your ideas and generate truly professional prompts."}),L.jsx("a",{href:"/",className:"inline-block bg-indigo-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors text-base no-underline shadow-lg",children:"Start Creating"})]}),L.jsx("footer",{className:"mt-8 text-center",children:L.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 dark:text-gray-400",children:[L.jsx(Na,{className:"w-6 h-6"}),L.jsx("span",{className:"font-semibold",children:"promptii"})]})}),L.jsx("style",{children:`
            @keyframes fade-in-up {
              from { opacity: 0; transform: translateY(20px) scale(0.98); }
              to { opacity: 1; transform: translateY(0) scale(1); }
            }
            .animate-fade-in-up {
              animation: fade-in-up 0.5s ease-out forwards;
            }
          `})]}),C4=({promptId:n})=>{const[e,t]=ge.useState(null),[i,o]=ge.useState(!0),[l,u]=ge.useState(null);return ge.useEffect(()=>{(async()=>{try{o(!0);const m=await T4(n);m?t(m):u("Prompt not found. The link may be invalid or the prompt may have been deleted.")}catch(m){u("An error occurred while fetching the prompt."),console.error(m)}finally{o(!1)}})()},[n]),L.jsxs("div",{className:"min-h-screen font-sans bg-gray-100 dark:bg-gemini-dark text-gray-900 dark:text-gray-200",children:[L.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700/50 bg-gray-100/80 dark:bg-gemini-dark/80 backdrop-blur-sm sticky top-0 z-10",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(Na,{className:"w-8 h-8 text-indigo-500"}),L.jsx("h1",{className:"text-xl font-bold",children:"promptii"}),L.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"| Shared Prompt"})]}),L.jsx("a",{href:"/",className:"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors text-sm",children:"Create your own"})]}),L.jsx("main",{className:"p-4 md:p-8 max-w-4xl mx-auto",children:i?L.jsx("div",{className:"flex items-center justify-center h-64",children:L.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):l?L.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gemini-dark-card shadow-lg rounded-lg",children:[L.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Oops! Prompt Not Found"}),L.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l}),L.jsx("a",{href:"/",className:"inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors text-base no-underline",children:"Create a New Prompt"})]}):e?L.jsxs("div",{className:"bg-white dark:bg-gemini-dark-card shadow-lg rounded-lg overflow-hidden",children:[L.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-gray-200 dark:border-gray-700/50 bg-gray-50 dark:bg-black/20",children:[L.jsx("h2",{className:"font-semibold",children:"Generated Professional Prompt"}),L.jsx(xS,{textToCopy:e})]}),L.jsx("pre",{className:"p-6 whitespace-pre-wrap font-sans text-gray-700 dark:text-gray-300 text-sm leading-relaxed overflow-x-auto",children:e})]}):null})]})},Aw=document.getElementById("root");if(!Aw)throw new Error("Could not find root element to mount to");const w4=cR.createRoot(Aw),Jp=window.location.pathname,I4=()=>{const n=localStorage.getItem("theme"),e=()=>{n==='"dark"'||!n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};if(Jp.startsWith("/pro-success"))return e(),L.jsx(A4,{});if(Jp.startsWith("/share/")){const t=Jp.split("/")[2];if(t)return e(),L.jsx(C4,{promptId:t})}return L.jsx(tb,{domain:"dev-p2agkrhb142p0qfr.us.auth0.com",clientId:"kNENJ7sgIT78dtb2qBlnDMUPHnCc1UQ0",authorizationParams:{audience:"https://dev-p2agkrhb142p0qfr.us.auth0.com/api/v2/",redirect_uri:window.location.origin},children:L.jsx(E4,{})})};w4.render(L.jsx(mS.StrictMode,{children:L.jsx(I4,{})}));
